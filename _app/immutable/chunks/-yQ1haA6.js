import{d as Zi,i as Ji,f as $i,g as ea,j as ta,k as na,n as ra,o as ia,p as aa,q as oa,c as bt,a as Ie,v as sa,t as ui}from"./BOCYgPTh.js";import{N as ci,Q as li,Y as fi,i as gn,ao as di,O as Pe,_ as yn,P as Qr,aL as cr,as as ua,at as ca,W as bn,V as Yr,I as la,Z as fa,X as da,$ as ha,q as pa,a0 as va,w as ya,aM as ma,aN as ga,K as ba,aO as _a,aP as wa,p as hi,f as st,a as pi,c as xa,r as ka,t as or,g as at,j as ot,e as ut,l as Aa,h as Zr,s as Jr,aQ as Oa}from"./C0h71eE1.js";import{a as xe,i as lr,b as mn,r as vi,p as $r,c as Sa,s as Ca}from"./rr_i9oP7.js";function fr(d,l,...f){var s=d,x=gn,A;ci(()=>{x!==(x=l())&&(A&&(di(A),A=null),A=fi(()=>x(s,...f)))},li),Pe&&(s=yn)}function ei(d,l,f,s,x,A){let C=Pe;Pe&&Qr();var I,L,V=null;Pe&&yn.nodeType===1&&(V=yn,Qr());var se=Pe?yn:d,U;ci(()=>{const J=l()||null;var ae=J==="svg"?cr:null;J!==I&&(U&&(J===null?fa(U,()=>{U=null,L=null}):J===L?da(U):di(U)),J&&J!==L&&(U=fi(()=>{if(V=Pe?V:ae?document.createElementNS(ae,J):document.createElement(J),Zi(V,V),s){Pe&&Ji(J)&&V.append(document.createComment(""));var q=Pe?ua(V):V.appendChild(ca());Pe&&(q===null?bn(!1):Yr(q)),s(V,q)}la.nodes_end=V,se.before(V)})),I=J,I&&(L=I))},li),C&&(bn(!0),Yr(se))}function sr(d,l,f){ha(()=>{var s=pa(()=>l(d,f==null?void 0:f())||{});if(f&&(s!=null&&s.update)){var x=!1,A={};va(()=>{var C=f();ya(C),x&&ma(A,C)&&(A=C,s.update(C))}),x=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function yi(d){var l,f,s="";if(typeof d=="string"||typeof d=="number")s+=d;else if(typeof d=="object")if(Array.isArray(d)){var x=d.length;for(l=0;l<x;l++)d[l]&&(f=yi(d[l]))&&(s&&(s+=" "),s+=f)}else for(f in d)d[f]&&(s&&(s+=" "),s+=f);return s}function Pa(){for(var d,l,f=0,s="",x=arguments.length;f<x;f++)(d=arguments[f])&&(l=yi(d))&&(s&&(s+=" "),s+=l);return s}function Ea(d){return typeof d=="object"?Pa(d):d??""}function ao(d){if(Pe){var l=!1,f=()=>{if(!l){if(l=!0,d.hasAttribute("value")){var s=d.value;dr(d,"value",null),d.value=s}if(d.hasAttribute("checked")){var x=d.checked;dr(d,"checked",null),d.checked=x}}};d.__on_r=f,wa(f),aa()}}function Da(d,l){l?d.hasAttribute("selected")||d.setAttribute("selected",""):d.removeAttribute("selected")}function dr(d,l,f,s){var x=d.__attributes??(d.__attributes={});Pe&&(x[l]=d.getAttribute(l),l==="src"||l==="srcset"||l==="href"&&d.nodeName==="LINK")||x[l]!==(x[l]=f)&&(l==="style"&&"__styles"in d&&(d.__styles={}),l==="loading"&&(d[ga]=f),f==null?d.removeAttribute(l):typeof f!="string"&&mi(d).includes(l)?d[l]=f:d.setAttribute(l,f))}function ur(d,l,f,s,x=!1,A=!1,C=!1){let I=Pe&&A;I&&bn(!1);var L=l||{},V=d.tagName==="OPTION";for(var se in l)se in f||(f[se]=null);f.class&&(f.class=Ea(f.class));var U=mi(d),J=d.__attributes??(d.__attributes={});for(const N in f){let te=f[N];if(V&&N==="value"&&te==null){d.value=d.__value="",L[N]=te;continue}var ae=L[N];if(te!==ae){L[N]=te;var q=N[0]+N[1];if(q!=="$$"){if(q==="on"){const Q={},ve="$$"+N;let Y=N.slice(2);var ne=ia(Y);if($i(Y)&&(Y=Y.slice(0,-7),Q.capture=!0),!ne&&ae){if(te!=null)continue;d.removeEventListener(Y,L[ve],Q),L[ve]=null}if(te!=null)if(ne)d[`__${Y}`]=te,ta([Y]);else{let H=function(re){L[N].call(this,re)};L[ve]=ea(Y,d,H,Q)}else ne&&(d[`__${Y}`]=void 0)}else if(N==="style"&&te!=null)d.style.cssText=te+"";else if(N==="autofocus")na(d,!!te);else if(!A&&(N==="__value"||N==="value"&&te!=null))d.value=d.__value=te;else if(N==="selected"&&V)Da(d,te);else{var ee=N;x||(ee=ra(ee));var ce=ee==="defaultValue"||ee==="defaultChecked";if(te==null&&!A&&!ce)if(J[N]=null,ee==="value"||ee==="checked"){let Q=d;const ve=l===void 0;if(ee==="value"){let Y=Q.defaultValue;Q.removeAttribute(ee),Q.defaultValue=Y,Q.value=Q.__value=ve?Y:null}else{let Y=Q.defaultChecked;Q.removeAttribute(ee),Q.defaultChecked=Y,Q.checked=ve?Y:!1}}else d.removeAttribute(N);else ce||U.includes(ee)&&(A||typeof te!="string")?d[ee]=te:typeof te!="function"&&dr(d,ee,te)}N==="style"&&"__styles"in d&&(d.__styles={})}}}return I&&bn(!0),L}var ti=new Map;function mi(d){var l=ti.get(d.nodeName);if(l)return l;ti.set(d.nodeName,l=[]);for(var f,s=d,x=Element.prototype;x!==s;){f=_a(s);for(var A in f)f[A].set&&l.push(A);s=ba(s)}return l}var hr=function(d,l){return hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,s){f.__proto__=s}||function(f,s){for(var x in s)Object.prototype.hasOwnProperty.call(s,x)&&(f[x]=s[x])},hr(d,l)};function Ra(d,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");hr(d,l);function f(){this.constructor=d}d.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}var It=function(){return It=Object.assign||function(l){for(var f,s=1,x=arguments.length;s<x;s++){f=arguments[s];for(var A in f)Object.prototype.hasOwnProperty.call(f,A)&&(l[A]=f[A])}return l},It.apply(this,arguments)};function hn(d){var l=typeof Symbol=="function"&&Symbol.iterator,f=l&&d[l],s=0;if(f)return f.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&s>=d.length&&(d=void 0),{value:d&&d[s++],done:!d}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")}function oo(d,l){var f=typeof Symbol=="function"&&d[Symbol.iterator];if(!f)return d;var s=f.call(d),x,A=[],C;try{for(;(l===void 0||l-- >0)&&!(x=s.next()).done;)A.push(x.value)}catch(I){C={error:I}}finally{try{x&&!x.done&&(f=s.return)&&f.call(s)}finally{if(C)throw C.error}}return A}function so(d,l,f){if(f||arguments.length===2)for(var s=0,x=l.length,A;s<x;s++)(A||!(s in l))&&(A||(A=Array.prototype.slice.call(l,0,s)),A[s]=l[s]);return d.concat(A||Array.prototype.slice.call(l))}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ja=function(){function d(l){l===void 0&&(l={}),this.adapter=l}return Object.defineProperty(d,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(d,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(d,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(d,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),d.prototype.init=function(){},d.prototype.destroy=function(){},d}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ka(d,l){if(d.closest)return d.closest(l);for(var f=d;f;){if(gi(f,l))return f;f=f.parentElement}return null}function gi(d,l){var f=d.matches||d.webkitMatchesSelector||d.msMatchesSelector;return f.call(d,l)}function Ma(d){var l=d;if(l.offsetParent!==null)return l.scrollWidth;var f=l.cloneNode(!0);f.style.setProperty("position","absolute"),f.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(f);var s=f.scrollWidth;return document.documentElement.removeChild(f),s}const Ba=Object.freeze(Object.defineProperty({__proto__:null,closest:Ka,estimateScrollWidth:Ma,matches:gi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ia(d){return d===void 0&&(d=window),Fa(d)?{passive:!0}:!1}function Fa(d){d===void 0&&(d=window);var l=!1;try{var f={get passive(){return l=!0,!1}},s=function(){};d.document.addEventListener("test",s,f),d.document.removeEventListener("test",s,f)}catch{l=!1}return l}const qa=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:Ia},Symbol.toStringTag,{value:"Module"}));function Ta(d){return Object.entries(d).filter(([l,f])=>l!==""&&f).map(([l])=>l).join(" ")}function La(d,l,f,s={bubbles:!0}){if(typeof Event>"u")throw new Error("Event not defined.");if(!d)throw new Error("Tried to dispatch event without element.");const x=new CustomEvent(l,Object.assign(Object.assign({},s),{detail:f}));return d==null||d.dispatchEvent(x),x}function uo(d,l){let f=Object.getOwnPropertyNames(d);const s={};for(let x=0;x<f.length;x++){const A=f[x],C=A.indexOf("$");C!==-1&&l.indexOf(A.substring(0,C+1))!==-1||l.indexOf(A)===-1&&(s[A]=d[A])}return s}function co(d,l){let f=Object.getOwnPropertyNames(d);const s={};for(let x=0;x<f.length;x++){const A=f[x];A.substring(0,l.length)===l&&(s[A.substring(l.length)]=d[A])}return s}class Na{constructor(){this.elementMap=new Map}on(l,f,s,x){this.elementMap.has(l)||this.elementMap.set(l,{});const A=this.elementMap.get(l);if(A==null)throw new Error("Event map couldn't be created.");f in A||(A[f]=new Map),A[f].set(s,oa(l,f,s,x))}off(l,f,s){const x=this.elementMap.get(l);if(x==null||!(f in x))return;const A=x[f],C=A.get(s);C!=null&&(C(),A.delete(s),A.size===0&&(delete x[f],Object.keys(x).length===0&&this.elementMap.delete(l)))}clear(){this.elementMap.forEach((l,f)=>{for(let[s,x]of Object.entries(l))x.forEach((A,C)=>{A()})}),this.elementMap.clear()}}function Be(d,l){let f=[];if(l)for(let s=0;s<l.length;s++){const x=l[s],A=Array.isArray(x)?x[0]:x;Array.isArray(x)&&x.length>1?f.push(A(d,x[1])):f.push(A(d))}return{update(s){if((s&&s.length||0)!=f.length)throw new Error("You must not change the length of an actions array.");if(s)for(let x=0;x<s.length;x++){const A=f[x];if(A&&A.update){const C=s[x];Array.isArray(C)&&C.length>1?A.update(C[1]):A.update()}}},destroy(){for(let s=0;s<f.length;s++){const x=f[s];x&&x.destroy&&x.destroy()}}}}var Ua=sa("<svg><!></svg>");function Ha(d,l){hi(l,!0);let f=xe(l,"use",19,()=>[]),s=xe(l,"tag",3,"div"),x=vi(l,["$$slots","$$events","$$legacy","use","tag","children"]);const A=ot(()=>["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(s())>-1);let C;function I(){return C}var L=bt(),V=st(L);{var se=J=>{var ae=Ua();let q;var ne=xa(ae);fr(ne,()=>l.children??gn),ka(ae),mn(ae,ee=>C=ee,()=>C),sr(ae,(ee,ce)=>Be==null?void 0:Be(ee,ce),f),or(()=>q=ur(ae,q,{...x},void 0,!0)),Ie(J,ae)},U=J=>{var ae=bt(),q=st(ae);{var ne=ce=>{var N=bt(),te=st(N);ei(te,s,!1,(Q,ve)=>{mn(Q,H=>C=H,()=>C),sr(Q,(H,re)=>Be==null?void 0:Be(H,re),f);let Y;or(()=>Y=ur(Q,Y,{...x},void 0,Q.namespaceURI===cr,Q.nodeName.includes("-")))}),Ie(ce,N)},ee=ce=>{var N=bt(),te=st(N);ei(te,s,!1,(Q,ve)=>{mn(Q,ye=>C=ye,()=>C),sr(Q,(ye,ct)=>Be==null?void 0:Be(ye,ct),f);let Y;or(()=>Y=ur(Q,Y,{...x},void 0,Q.namespaceURI===cr,Q.nodeName.includes("-")));var H=bt(),re=st(H);fr(re,()=>l.children??gn),Ie(ve,H)}),Ie(ce,N)};lr(q,ce=>{at(A)?ce(ne):ce(ee,!1)},!0)}Ie(J,ae)};lr(V,J=>{s()==="svg"?J(se):J(U,!1)})}return Ie(d,L),pi({getElement:I})}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var za={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Ga={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},ni={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},pn;function Va(d,l){l===void 0&&(l=!1);var f=d.CSS,s=pn;if(typeof pn=="boolean"&&!l)return pn;var x=f&&typeof f.supports=="function";if(!x)return!1;var A=f.supports("--css-vars","yes"),C=f.supports("(--css-vars: yes)")&&f.supports("color","#00000000");return s=A||C,l||(pn=s),s}function Wa(d,l,f){if(!d)return{x:0,y:0};var s=l.x,x=l.y,A=s+f.left,C=x+f.top,I,L;if(d.type==="touchstart"){var V=d;I=V.changedTouches[0].pageX-A,L=V.changedTouches[0].pageY-C}else{var se=d;I=se.pageX-A,L=se.pageY-C}return{x:I,y:L}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ri=["touchstart","pointerdown","mousedown","keydown"],ii=["touchend","pointerup","mouseup","contextmenu"],vn=[],Xa=function(d){Ra(l,d);function l(f){var s=d.call(this,It(It({},l.defaultAdapter),f))||this;return s.activationAnimationHasEnded=!1,s.activationTimer=0,s.fgDeactivationRemovalTimer=0,s.fgScale="0",s.frame={width:0,height:0},s.initialSize=0,s.layoutFrame=0,s.maxRadius=0,s.unboundedCoords={left:0,top:0},s.activationState=s.defaultActivationState(),s.activationTimerCallback=function(){s.activationAnimationHasEnded=!0,s.runDeactivationUXLogicIfReady()},s.activateHandler=function(x){s.activateImpl(x)},s.deactivateHandler=function(){s.deactivateImpl()},s.focusHandler=function(){s.handleFocus()},s.blurHandler=function(){s.handleBlur()},s.resizeHandler=function(){s.layout()},s}return Object.defineProperty(l,"cssClasses",{get:function(){return za},enumerable:!1,configurable:!0}),Object.defineProperty(l,"strings",{get:function(){return Ga},enumerable:!1,configurable:!0}),Object.defineProperty(l,"numbers",{get:function(){return ni},enumerable:!1,configurable:!0}),Object.defineProperty(l,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),l.prototype.init=function(){var f=this,s=this.supportsPressRipple();if(this.registerRootHandlers(s),s){var x=l.cssClasses,A=x.ROOT,C=x.UNBOUNDED;requestAnimationFrame(function(){f.adapter.addClass(A),f.adapter.isUnbounded()&&(f.adapter.addClass(C),f.layoutInternal())})}},l.prototype.destroy=function(){var f=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(l.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(l.cssClasses.FG_DEACTIVATION));var s=l.cssClasses,x=s.ROOT,A=s.UNBOUNDED;requestAnimationFrame(function(){f.adapter.removeClass(x),f.adapter.removeClass(A),f.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},l.prototype.activate=function(f){this.activateImpl(f)},l.prototype.deactivate=function(){this.deactivateImpl()},l.prototype.layout=function(){var f=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){f.layoutInternal(),f.layoutFrame=0})},l.prototype.setUnbounded=function(f){var s=l.cssClasses.UNBOUNDED;f?this.adapter.addClass(s):this.adapter.removeClass(s)},l.prototype.handleFocus=function(){var f=this;requestAnimationFrame(function(){return f.adapter.addClass(l.cssClasses.BG_FOCUSED)})},l.prototype.handleBlur=function(){var f=this;requestAnimationFrame(function(){return f.adapter.removeClass(l.cssClasses.BG_FOCUSED)})},l.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},l.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},l.prototype.registerRootHandlers=function(f){var s,x;if(f){try{for(var A=hn(ri),C=A.next();!C.done;C=A.next()){var I=C.value;this.adapter.registerInteractionHandler(I,this.activateHandler)}}catch(L){s={error:L}}finally{try{C&&!C.done&&(x=A.return)&&x.call(A)}finally{if(s)throw s.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},l.prototype.registerDeactivationHandlers=function(f){var s,x;if(f.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var A=hn(ii),C=A.next();!C.done;C=A.next()){var I=C.value;this.adapter.registerDocumentInteractionHandler(I,this.deactivateHandler)}}catch(L){s={error:L}}finally{try{C&&!C.done&&(x=A.return)&&x.call(A)}finally{if(s)throw s.error}}},l.prototype.deregisterRootHandlers=function(){var f,s;try{for(var x=hn(ri),A=x.next();!A.done;A=x.next()){var C=A.value;this.adapter.deregisterInteractionHandler(C,this.activateHandler)}}catch(I){f={error:I}}finally{try{A&&!A.done&&(s=x.return)&&s.call(x)}finally{if(f)throw f.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},l.prototype.deregisterDeactivationHandlers=function(){var f,s;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var x=hn(ii),A=x.next();!A.done;A=x.next()){var C=A.value;this.adapter.deregisterDocumentInteractionHandler(C,this.deactivateHandler)}}catch(I){f={error:I}}finally{try{A&&!A.done&&(s=x.return)&&s.call(x)}finally{if(f)throw f.error}}},l.prototype.removeCssVars=function(){var f=this,s=l.strings,x=Object.keys(s);x.forEach(function(A){A.indexOf("VAR_")===0&&f.adapter.updateCssVariable(s[A],null)})},l.prototype.activateImpl=function(f){var s=this;if(!this.adapter.isSurfaceDisabled()){var x=this.activationState;if(!x.isActivated){var A=this.previousActivationEvent,C=A&&f!==void 0&&A.type!==f.type;if(!C){x.isActivated=!0,x.isProgrammatic=f===void 0,x.activationEvent=f,x.wasActivatedByPointer=x.isProgrammatic?!1:f!==void 0&&(f.type==="mousedown"||f.type==="touchstart"||f.type==="pointerdown");var I=f!==void 0&&vn.length>0&&vn.some(function(L){return s.adapter.containsEventTarget(L)});if(I){this.resetActivationState();return}f!==void 0&&(vn.push(f.target),this.registerDeactivationHandlers(f)),x.wasElementMadeActive=this.checkElementMadeActive(f),x.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){vn=[],!x.wasElementMadeActive&&f!==void 0&&(f.key===" "||f.keyCode===32)&&(x.wasElementMadeActive=s.checkElementMadeActive(f),x.wasElementMadeActive&&s.animateActivation()),x.wasElementMadeActive||(s.activationState=s.defaultActivationState())})}}}},l.prototype.checkElementMadeActive=function(f){return f!==void 0&&f.type==="keydown"?this.adapter.isSurfaceActive():!0},l.prototype.animateActivation=function(){var f=this,s=l.strings,x=s.VAR_FG_TRANSLATE_START,A=s.VAR_FG_TRANSLATE_END,C=l.cssClasses,I=C.FG_DEACTIVATION,L=C.FG_ACTIVATION,V=l.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var se="",U="";if(!this.adapter.isUnbounded()){var J=this.getFgTranslationCoordinates(),ae=J.startPoint,q=J.endPoint;se=ae.x+"px, "+ae.y+"px",U=q.x+"px, "+q.y+"px"}this.adapter.updateCssVariable(x,se),this.adapter.updateCssVariable(A,U),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(I),this.adapter.computeBoundingRect(),this.adapter.addClass(L),this.activationTimer=setTimeout(function(){f.activationTimerCallback()},V)},l.prototype.getFgTranslationCoordinates=function(){var f=this.activationState,s=f.activationEvent,x=f.wasActivatedByPointer,A;x?A=Wa(s,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):A={x:this.frame.width/2,y:this.frame.height/2},A={x:A.x-this.initialSize/2,y:A.y-this.initialSize/2};var C={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:A,endPoint:C}},l.prototype.runDeactivationUXLogicIfReady=function(){var f=this,s=l.cssClasses.FG_DEACTIVATION,x=this.activationState,A=x.hasDeactivationUXRun,C=x.isActivated,I=A||!C;I&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(s),this.fgDeactivationRemovalTimer=setTimeout(function(){f.adapter.removeClass(s)},ni.FG_DEACTIVATION_MS))},l.prototype.rmBoundedActivationClasses=function(){var f=l.cssClasses.FG_ACTIVATION;this.adapter.removeClass(f),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},l.prototype.resetActivationState=function(){var f=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return f.previousActivationEvent=void 0},l.numbers.TAP_DELAY_MS)},l.prototype.deactivateImpl=function(){var f=this,s=this.activationState;if(s.isActivated){var x=It({},s);s.isProgrammatic?(requestAnimationFrame(function(){f.animateDeactivation(x)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){f.activationState.hasDeactivationUXRun=!0,f.animateDeactivation(x),f.resetActivationState()}))}},l.prototype.animateDeactivation=function(f){var s=f.wasActivatedByPointer,x=f.wasElementMadeActive;(s||x)&&this.runDeactivationUXLogicIfReady()},l.prototype.layoutInternal=function(){var f=this;this.frame=this.adapter.computeBoundingRect();var s=Math.max(this.frame.height,this.frame.width),x=function(){var C=Math.sqrt(Math.pow(f.frame.width,2)+Math.pow(f.frame.height,2));return C+l.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?s:x();var A=Math.floor(s*l.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&A%2!==0?this.initialSize=A-1:this.initialSize=A,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},l.prototype.updateLayoutCssVars=function(){var f=l.strings,s=f.VAR_FG_SIZE,x=f.VAR_LEFT,A=f.VAR_TOP,C=f.VAR_FG_SCALE;this.adapter.updateCssVariable(s,this.initialSize+"px"),this.adapter.updateCssVariable(C,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(x,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(A,this.unboundedCoords.top+"px"))},l}(ja);const{applyPassive:ai}=qa,{matches:Qa}=Ba;function Ya(d,{ripple:l=!0,surface:f=!1,unbounded:s=!1,disabled:x=!1,color:A,active:C,rippleElement:I,eventTarget:L,activeTarget:V,addClass:se=q=>d.classList.add(q),removeClass:U=q=>d.classList.remove(q),addStyle:J=(q,ne)=>d.style.setProperty(q,ne),initPromise:ae=Promise.resolve()}={}){let q,ne=new Na,ee=ut("SMUI:addLayoutListener"),ce,N=C,te=L,Q=V;function ve(){f?(se("mdc-ripple-surface"),A==="primary"?(se("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary")):A==="secondary"?(U("smui-ripple-surface--primary"),se("smui-ripple-surface--secondary")):(U("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary"))):(U("mdc-ripple-surface"),U("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary")),q&&N!==C&&(N=C,C?q.activate():C===!1&&q.deactivate()),l&&!q?(q=new Xa({addClass:se,browserSupportsCssVars:()=>Va(window),computeBoundingRect:()=>(I||d).getBoundingClientRect(),containsEventTarget:H=>d.contains(H),deregisterDocumentInteractionHandler:(H,re)=>ne.off(document.documentElement,H,re),deregisterInteractionHandler:(H,re)=>ne.off(L||d,H,re),deregisterResizeHandler:H=>window.removeEventListener("resize",H),getWindowPageOffset:()=>{var H,re;return{x:(H=window.pageXOffset)!==null&&H!==void 0?H:window.scrollX,y:(re=window.pageYOffset)!==null&&re!==void 0?re:window.scrollY}},isSurfaceActive:()=>C??Qa(V||d,":active"),isSurfaceDisabled:()=>!!x,isUnbounded:()=>!!s,registerDocumentInteractionHandler:(H,re)=>{const ye=ai();ne.on(document.documentElement,H,re,typeof ye=="boolean"?{capture:ye}:ye)},registerInteractionHandler:(H,re)=>{const ye=ai();ne.on(L||d,H,re,typeof ye=="boolean"?{capture:ye}:ye)},registerResizeHandler:H=>ne.on(window,"resize",H),removeClass:U,updateCssVariable:J}),ae.then(()=>{q&&(q.init(),q.setUnbounded(s))})):q&&!l&&ae.then(()=>{q&&(q.destroy(),q=void 0,ne.clear())}),q&&(te!==L||Q!==V)&&(te=L,Q=V,q.destroy(),requestAnimationFrame(()=>{q&&(q.init(),q.setUnbounded(s))})),!l&&s&&se("mdc-ripple-upgraded--unbounded")}ve(),ee&&(ce=ee(Y));function Y(){q&&q.layout()}return{update(H){({ripple:l,surface:f,unbounded:s,disabled:x,color:A,active:C,rippleElement:I,eventTarget:L,activeTarget:V,addClass:se,removeClass:U,addStyle:J,initPromise:ae}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:re=>d.classList.add(re),removeClass:re=>d.classList.remove(re),addStyle:(re,ye)=>d.style.setProperty(re,ye),initPromise:Promise.resolve()},H)),ve()},destroy(){q&&(q.destroy(),q=void 0,ne.clear(),U("mdc-ripple-surface"),U("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary")),ce&&ce()}}}var Za=ui('<div class="mdc-button__touch"></div>'),Ja=ui('<div class="mdc-button__ripple"></div> <!><!>',1);function lo(d,l){hi(l,!0);let f=xe(l,"use",19,()=>[]),s=xe(l,"class",3,""),x=xe(l,"style",3,""),A=xe(l,"ripple",3,!0),C=xe(l,"color",3,"primary"),I=xe(l,"variant",3,"text"),L=xe(l,"touch",3,!1),V=xe(l,"action",3,"close"),se=xe(l,"defaultAction",3,!1),U=xe(l,"secondary",3,!1),J=xe(l,"component",3,Ha),ae=xe(l,"tag",19,()=>l.href==null?"button":"a"),q=vi(l,["$$slots","$$events","$$legacy","use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","tag","children"]),ne,ee=$r({}),ce=$r({}),N=ut("SMUI:button:context");const te=ot(()=>N==="dialog:action"&&V()!=null?{"data-mdc-dialog-action":V()}:{action:V()}),Q=ot(()=>N==="dialog:action"&&se()?{"data-mdc-dialog-button-default":""}:{}),ve=ot(()=>N==="banner"?{}:{secondary:U()});let Y=l.disabled;Aa(()=>{if(Y!==l.disabled){if(ne){const de=lt();"blur"in de&&de.blur()}Y=q.disabled}}),Zr("SMUI:label:context","button"),Zr("SMUI:icon:context","button");function H(de){ee[de]||(ee[de]=!0)}function re(de){(!(de in ee)||ee[de])&&(ee[de]=!1)}function ye(de,me){ce[de]!=me&&(me===""||me==null?delete ce[de]:ce[de]=me)}function ct(){N==="banner"&&La(lt(),U()?"SMUIBannerButtonSecondaryActionClick":"SMUIBannerButtonPrimaryActionClick")}function lt(){return ne.getElement()}var Fe=bt(),je=st(Fe);const xn=ot(()=>[[Ya,{ripple:A(),unbounded:!1,color:C(),disabled:!!l.disabled,addClass:H,removeClass:re,addStyle:ye}],...f()]),_t=ot(()=>Ta({[s()]:!0,"mdc-button":!0,"mdc-button--raised":I()==="raised","mdc-button--unelevated":I()==="unelevated","mdc-button--outlined":I()==="outlined","smui-button--color-secondary":C()==="secondary","mdc-button--touch":L(),"mdc-card__action":N==="card:action","mdc-card__action--button":N==="card:action","mdc-dialog__button":N==="dialog:action","mdc-top-app-bar__navigation-icon":N==="top-app-bar:navigation","mdc-top-app-bar__action-item":N==="top-app-bar:action","mdc-snackbar__action":N==="snackbar:actions","mdc-banner__secondary-action":N==="banner"&&U(),"mdc-banner__primary-action":N==="banner"&&!U(),"mdc-tooltip__action":N==="tooltip:rich-actions",...ee})),wt=ot(()=>Object.entries(ce).map(([de,me])=>`${de}: ${me};`).concat([x()]).join(" "));return Sa(je,J,(de,me)=>{mn(me(de,Ca({get tag(){return ae()},get use(){return at(xn)},get class(){return at(_t)},get style(){return at(wt)}},()=>at(te),()=>at(Q),()=>at(ve),{get href(){return l.href}},()=>q,{onclick:Se=>{var ke;ct(),(ke=l.onclick)==null||ke.call(l,Se)},children:(Se,ke)=>{var ft=Ja(),Ft=Jr(st(ft),2);fr(Ft,()=>l.children??gn);var qe=Jr(Ft);{var qt=Te=>{var Le=Za();Ie(Te,Le)};lr(qe,Te=>{L()&&Te(qt)})}Ie(Se,ft)},$$slots:{default:!0}})),Se=>ne=Se,()=>ne)}),Ie(d,Fe),pi({getElement:lt})}var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $a(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var bi={exports:{}};(function(d,l){(function(f,s){d.exports=s()})(oi,function(){var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function x(e,t,n){for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var A=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:oi,C=Object.keys,I=Array.isArray;function L(e,t){return typeof t!="object"||C(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||A.Promise||(A.Promise=Promise);var V=Object.getPrototypeOf,se={}.hasOwnProperty;function U(e,t){return se.call(e,t)}function J(e,t){typeof t=="function"&&(t=t(V(e))),(typeof Reflect>"u"?C:Reflect.ownKeys)(t).forEach(function(n){q(e,n,t[n])})}var ae=Object.defineProperty;function q(e,t,n,r){ae(e,t,L(n&&U(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function ne(e){return{from:function(t){return e.prototype=Object.create(t.prototype),q(e.prototype,"constructor",e),{extend:J.bind(null,e.prototype)}}}}var ee=Object.getOwnPropertyDescriptor,ce=[].slice;function N(e,t,n){return ce.call(e,t,n)}function te(e,t){return t(e)}function Q(e){if(!e)throw new Error("Assertion Failed")}function ve(e){A.setImmediate?setImmediate(e):setTimeout(e,0)}function Y(e,t){if(typeof t=="string"&&U(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=Y(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u==null?void 0:Y(u,t.substr(o+1))}}function H(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Q(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)H(e,t[r],n[r])}else{var a,o,u=t.indexOf(".");u!==-1?(a=t.substr(0,u),(o=t.substr(u+1))===""?n===void 0?I(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:H(u=!(u=e[a])||!U(e,a)?e[a]={}:u,o,n)):n===void 0?I(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function re(e){var t,n={};for(t in e)U(e,t)&&(n[t]=e[t]);return n}var ye=[].concat;function ct(e){return ye.apply([],e)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ct([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return A[e]}),lt=new Set(Qe.map(function(e){return A[e]})),Fe=null;function je(e){return Fe=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=Fe.get(n);if(r)return r;if(I(n)){r=[],Fe.set(n,r);for(var i=0,a=n.length;i<a;++i)r.push(t(n[i]))}else if(lt.has(n.constructor))r=n;else{var o,u=V(n);for(o in r=u===Object.prototype?{}:Object.create(u),Fe.set(n,r),n)U(n,o)&&(r[o]=t(n[o]))}return r}(e),Fe=null,e}var xn={}.toString;function _t(e){return xn.call(e).slice(8,-1)}var wt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof wt=="symbol"?function(e){var t;return e!=null&&(t=e[wt])&&t.apply(e)}:function(){return null};function me(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Se={};function ke(e){var t,n,r,i;if(arguments.length===1){if(I(e))return e.slice();if(this===Se&&typeof e=="string")return[e];if(i=de(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ft=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},At=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ce=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(At),Ft={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qe(e,t){this.name=e,this.message=t}function qt(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Te(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=qt(e,t)}function Le(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=qt(e,this.failures)}ne(qe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),ne(Te).from(qe),ne(Le).from(qe);var kn=Ce.reduce(function(e,t){return e[t]=t+"Error",e},{}),_i=qe,T=Ce.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Ft[t]||n,this.inner=null)}return ne(r).from(_i),e[t]=r,e},{});T.Syntax=SyntaxError,T.Type=TypeError,T.Range=RangeError;var vr=At.reduce(function(e,t){return e[t+"Error"]=T[t],e},{}),Tt=Ce.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=T[t]),e},{});function ie(){}function xt(e){return e}function wi(e,t){return e==null||e===xt?t:function(n){return t(e(n))}}function Xe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xi(e,t){return e===ie?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Xe(i,this.onerror):i),a!==void 0?a:n}}function ki(e,t){return e===ie?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Xe(r,this.onerror):r)}}function Ai(e,t){return e===ie?t:function(n){var r=e.apply(this,arguments);L(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Xe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Xe(a,this.onerror):a),r===void 0?n===void 0?void 0:n:L(r,n)}}function Oi(e,t){return e===ie?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function An(e,t){return e===ie?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}Tt.ModifyError=Te,Tt.DexieError=qe,Tt.BulkError=Le;var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yr(e){Ee=e}var kt={},mr=100,Qe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,V(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,V(t),e]}(),At=Qe[0],Ce=Qe[1],Qe=Qe[2],Ce=Ce&&Ce.then,Ye=At&&At.constructor,On=!!Qe,Ot=function(e,t){St.push([e,t]),Lt&&(queueMicrotask(Ci),Lt=!1)},Sn=!0,Lt=!0,Ze=[],Nt=[],Cn=xt,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ie,pgp:!1,env:{},finalize:ie},F=Ne,St=[],Je=0,Ut=[];function M(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=F;if(typeof e!="function"){if(e!==kt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&En(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(a){if(r._state===null){if(a===r)throw new TypeError("A promise cannot be resolved with itself.");var o=r._lib&&dt();a&&typeof a.then=="function"?n(r,function(u,h){a instanceof M?a._then(u,h):a.then(u,h)}):(r._state=!0,r._value=a,br(r)),o&&ht()}},En.bind(null,r))}catch(a){En(r,a)}}(this,e)}var Pn={get:function(){var e=F,t=Vt;function n(r,i){var a=this,o=!e.global&&(e!==F||t!==Vt),u=o&&!He(),h=new M(function(v,g){Dn(a,new gr(wr(r,e,o,u),wr(i,e,o,u),v,g,e))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return n.prototype=kt,n},set:function(e){q(this,"then",e&&e.prototype===kt?Pn:{get:function(){return e},set:Pn.set})}};function gr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function En(e,t){var n,r;Nt.push(t),e._state===null&&(n=e._lib&&dt(),t=Cn(t),e._state=!1,e._value=t,r=e,Ze.some(function(i){return i._value===r._value})||Ze.push(r),br(e),n&&ht())}function br(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Dn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Je===0&&(++Je,Ot(function(){--Je==0&&Rn()},[]))}function Dn(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Je,Ot(Si,[n,e,t])}else e._listeners.push(t)}function Si(e,t,n){try{var r,i=t._value;!t._state&&Nt.length&&(Nt=[]),r=Ee&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||Nt.indexOf(i)!==-1||function(a){for(var o=Ze.length;o;)if(Ze[--o]._value===a._value)return Ze.splice(o,1)}(t),n.resolve(r)}catch(a){n.reject(a)}finally{--Je==0&&Rn(),--n.psd.ref||n.psd.finalize()}}function Ci(){$e(Ne,function(){dt()&&ht()})}function dt(){var e=Sn;return Lt=Sn=!1,e}function ht(){var e,t,n;do for(;0<St.length;)for(e=St,St=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<St.length);Lt=Sn=!0}function Rn(){var e=Ze;Ze=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ut.slice(0),n=t.length;n;)t[--n]()}function Ht(e){return new M(kt,!1,e)}function ue(e,t){var n=F;return function(){var r=dt(),i=F;try{return ze(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ze(i,!1),r&&ht()}}}J(M.prototype,{then:Pn,_then:function(e,t){Dn(this,new gr(null,null,e,t,F))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Ht)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Ht)(r)})},finally:function(e){return this.then(function(t){return M.resolve(e()).then(function(){return t})},function(t){return M.resolve(e()).then(function(){return Ht(t)})})},timeout:function(e,t){var n=this;return e<1/0?new M(function(r,i){var a=setTimeout(function(){return i(new T.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&q(M.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=_r(),J(M,{all:function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return M.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){return e instanceof M?e:e&&typeof e.then=="function"?new M(function(t,n){e.then(t,n)}):new M(kt,!0,e)},reject:Ht,race:function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t,n){e.map(function(r){return M.resolve(r).then(t,n)})})},PSD:{get:function(){return F},set:function(e){return F=e}},totalEchoes:{get:function(){return Vt}},newPSD:Ue,usePSD:$e,scheduler:{get:function(){return Ot},set:function(e){Ot=e}},rejectionMapper:{get:function(){return Cn},set:function(e){Cn=e}},follow:function(e,t){return new M(function(n,r){return Ue(function(i,a){var o=F;o.unhandleds=[],o.onunhandled=a,o.finalize=Xe(function(){var u,h=this;u=function(){h.unhandleds.length===0?i():a(h.unhandleds[0])},Ut.push(function v(){u(),Ut.splice(Ut.indexOf(v),1)}),++Je,Ot(function(){--Je==0&&Rn()},[])},o.finalize),e()},t,n,r)})}}),Ye&&(Ye.allSettled&&q(M,"allSettled",function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return M.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Ye.any&&typeof AggregateError<"u"&&q(M,"any",function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return M.resolve(a).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}),Ye.withResolvers&&(M.withResolvers=Ye.withResolvers));var he={awaits:0,echoes:0,id:0},Pi=0,zt=[],Gt=0,Vt=0,Ei=0;function Ue(e,t,n,r){var i=F,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++Ei,Ne.env,a.env=On?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},t&&L(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=$e(a,e,n,r),a.ref===0&&a.finalize(),r}function pt(){return he.id||(he.id=++Pi),++he.awaits,he.echoes+=mr,he.id}function He(){return!!he.awaits&&(--he.awaits==0&&(he.id=0),he.echoes=he.awaits*mr,!0)}function Wt(e){return he.echoes&&e&&e.constructor===Ye?(pt(),e.then(function(t){return He(),t},function(t){return He(),le(t)})):e}function Di(){var e=zt[zt.length-1];zt.pop(),ze(e,!1)}function ze(e,t){var n,r=F;(t?!he.echoes||Gt++&&e===F:!Gt||--Gt&&e===F)||queueMicrotask(t?(function(i){++Vt,he.echoes&&--he.echoes!=0||(he.echoes=he.awaits=he.id=0),zt.push(F),ze(i,!0)}).bind(null,e):Di),e!==F&&(F=e,r===Ne&&(Ne.env=_r()),On&&(n=Ne.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(A,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function _r(){var e=A.Promise;return On?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(A,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function $e(e,t,n,r,i){var a=F;try{return ze(e,!0),t(n,r,i)}finally{ze(a,!1)}}function wr(e,t,n,r){return typeof e!="function"?e:function(){var i=F;n&&pt(),ze(t,!0);try{return e.apply(this,arguments)}finally{ze(i,!1),r&&queueMicrotask(He)}}}function jn(e){Promise===Ye&&he.echoes===0?Gt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ce).indexOf("[native code]")===-1&&(pt=He=ie);var le=M.reject,et="￿",Ke="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xr="String expected.",vt=[],Xt="__dbnames",Kn="readonly",Mn="readwrite";function tt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var kr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qt(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=je(t))[e],t}}function Ar(){throw T.Type()}function Z(e,t){try{var n=Or(e),r=Or(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,a){for(var o=i.length,u=a.length,h=o<u?o:u,v=0;v<h;++v)if(i[v]!==a[v])return i[v]<a[v]?-1:1;return o===u?0:o<u?-1:1}(Sr(e),Sr(t));case"Array":return function(i,a){for(var o=i.length,u=a.length,h=o<u?o:u,v=0;v<h;++v){var g=Z(i[v],a[v]);if(g!==0)return g}return o===u?0:o<u?-1:1}(e,t)}}catch{}return NaN}function Or(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=_t(e),e==="ArrayBuffer"?"binary":e)}function Sr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Cr=(oe.prototype._trans=function(e,t,n){var r=this._tx||F.trans,i=this.name,a=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function o(v,g,c){if(!c.schema[i])throw new T.NotFound("Table "+i+" not part of transaction");return t(c.idbtrans,c)}var u=dt();try{var h=r&&r.db._novip===this.db._novip?r===F.trans?r._promise(e,o,n):Ue(function(){return r._promise(e,o,n)},{trans:r,transless:F.transless||F}):function v(g,c,_,p){if(g.idbdb&&(g._state.openComplete||F.letThrough||g._vip)){var m=g._createTransaction(c,_,g._dbSchema);try{m.create(),g._state.PR1398_maxLoop=3}catch(b){return b.name===kn.InvalidState&&g.isOpen()&&0<--g._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),g.close({disableAutoOpen:!1}),g.open().then(function(){return v(g,c,_,p)})):le(b)}return m._promise(c,function(b,y){return Ue(function(){return F.trans=m,p(b,y,m)})}).then(function(b){if(c==="readwrite")try{m.idbtrans.commit()}catch{}return c==="readonly"?b:m._completion.then(function(){return b})})}if(g._state.openComplete)return le(new T.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return le(new T.DatabaseClosed);g.open().catch(ie)}return g._state.dbReadyPromise.then(function(){return v(g,c,_,p)})}(this.db,e,[this.name],o);return a&&(h._consoleTask=a,h=h.catch(function(v){return console.trace(v),le(v)})),h}finally{u&&ht()}},oe.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?le(new T.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},oe.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(I(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=C(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(u){if(u.compound&&t.every(function(v){return 0<=u.keyPath.indexOf(v)})){for(var h=0;h<t.length;++h)if(t.indexOf(u.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(u,h){return u.keyPath.length-h.keyPath.length})[0];if(n&&this.db._maxKey!==et){var a=n.keyPath.slice(0,t.length);return this.where(a).equals(a.map(function(h){return e[h]}))}!n&&Ee&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function i(u,h){return Z(u,h)===0}var o=t.reduce(function(c,h){var v=c[0],g=c[1],c=r[h],_=e[h];return[v||c,v||!c?tt(g,c&&c.multi?function(p){return p=Y(p,h),I(p)&&p.some(function(m){return i(_,m)})}:function(p){return i(_,Y(p,h))}):g]},[null,null]),a=o[0],o=o[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(o):n?this.filter(o):this.where(t).equals("")},oe.prototype.filter=function(e){return this.toCollection().and(e)},oe.prototype.count=function(e){return this.toCollection().count(e)},oe.prototype.offset=function(e){return this.toCollection().offset(e)},oe.prototype.limit=function(e){return this.toCollection().limit(e)},oe.prototype.each=function(e){return this.toCollection().each(e)},oe.prototype.toArray=function(e){return this.toCollection().toArray(e)},oe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},oe.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,I(e)?"[".concat(e.join("+"),"]"):e))},oe.prototype.reverse=function(){return this.toCollection().reverse()},oe.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ar&&(function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=h}f(h,v),h.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var a=new Set,o=e.prototype;o;o=V(o))Object.getOwnPropertyNames(o).forEach(function(h){return a.add(h)});function u(h){if(!h)return h;var v,g=Object.create(e.prototype);for(v in h)if(!a.has(v))try{g[v]=h[v]}catch{}return g}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),e},oe.prototype.defineClass=function(){return this.mapToClass(function(e){L(this,e)})},oe.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=Qt(a)(e)),this._trans("readwrite",function(u){return n.core.mutate({trans:u,type:"add",keys:t!=null?[t]:null,values:[o]})}).then(function(u){return u.numFailures?M.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{H(e,a,u)}catch{}return u})},oe.prototype.update=function(e,t){return typeof e!="object"||I(e)?this.where(":id").equals(e).modify(t):(e=Y(e,this.schema.primKey.keyPath),e===void 0?le(new T.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},oe.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=Qt(a)(e)),this._trans("readwrite",function(u){return n.core.mutate({trans:u,type:"put",values:[o],keys:t!=null?[t]:null})}).then(function(u){return u.numFailures?M.reject(u.failures[0]):u.lastResult}).then(function(u){if(a)try{H(e,a,u)}catch{}return u})},oe.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?M.reject(n.failures[0]):void 0})},oe.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:kr})}).then(function(t){return t.numFailures?M.reject(t.failures[0]):void 0})},oe.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},oe.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(o){var v=r.schema.primKey,u=v.auto,v=v.keyPath;if(v&&i)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,v=v&&u?e.map(Qt(v)):e;return r.core.mutate({trans:o,type:"add",keys:i,values:v,wantResults:a}).then(function(m){var c=m.numFailures,_=m.results,p=m.lastResult,m=m.failures;if(c===0)return a?_:p;throw new Le("".concat(r.name,".bulkAdd(): ").concat(c," of ").concat(h," operations failed"),m)})})},oe.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(o){var v=r.schema.primKey,u=v.auto,v=v.keyPath;if(v&&i)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,v=v&&u?e.map(Qt(v)):e;return r.core.mutate({trans:o,type:"put",keys:i,values:v,wantResults:a}).then(function(m){var c=m.numFailures,_=m.results,p=m.lastResult,m=m.failures;if(c===0)return a?_:p;throw new Le("".concat(r.name,".bulkPut(): ").concat(c," of ").concat(h," operations failed"),m)})})},oe.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(o){return o.key}),i=e.map(function(o){return o.changes}),a=[];return this._trans("readwrite",function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then(function(u){var h=[],v=[];e.forEach(function(c,_){var p=c.key,m=c.changes,b=u[_];if(b){for(var y=0,w=Object.keys(m);y<w.length;y++){var k=w[y],O=m[k];if(k===t.schema.primKey.keyPath){if(Z(O,p)!==0)throw new T.Constraint("Cannot update primary key in bulkUpdate()")}else H(b,k,O)}a.push(_),h.push(p),v.push(b)}});var g=h.length;return n.mutate({trans:o,type:"put",keys:h,values:v,updates:{keys:r,changeSpecs:i}}).then(function(c){var _=c.numFailures,p=c.failures;if(_===0)return g;for(var m=0,b=Object.keys(p);m<b.length;m++){var y,w=b[m],k=a[Number(w)];k!=null&&(y=p[w],delete p[w],p[k]=y)}throw new Le("".concat(t.name,".bulkUpdate(): ").concat(_," of ").concat(g," operations failed"),p)})})})},oe.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(o){var i=o.numFailures,a=o.lastResult,o=o.failures;if(i===0)return a;throw new Le("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),o)})},oe);function oe(){}function Ct(e){function t(o,u){if(u){for(var h=arguments.length,v=new Array(h-1);--h;)v[h-1]=arguments[h];return n[o].subscribe.apply(null,v),e}if(typeof o=="string")return n[o]}var n={};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return t;function a(o,u,h){if(typeof o!="object"){var v;u=u||Oi;var g={subscribers:[],fire:h=h||ie,subscribe:function(c){g.subscribers.indexOf(c)===-1&&(g.subscribers.push(c),g.fire=u(g.fire,c))},unsubscribe:function(c){g.subscribers=g.subscribers.filter(function(_){return _!==c}),g.fire=g.subscribers.reduce(u,h)}};return n[o]=t[o]=g}C(v=o).forEach(function(c){var _=v[c];if(I(_))a(c,v[c][0],v[c][1]);else{if(_!=="asap")throw new T.InvalidArgument("Invalid event config");var p=a(c,xt,function(){for(var m=arguments.length,b=new Array(m);m--;)b[m]=arguments[m];p.subscribers.forEach(function(y){ve(function(){y.apply(null,b)})})})}})}}function Pt(e,t){return ne(t).from({prototype:e}),t}function yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Bn(e,t){e.filter=tt(e.filter,t)}function In(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return tt(r(),t())}:t,e.justLimit=n&&!r}function Yt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new T.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Pr(e,t,n){var r=Yt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Zt(e,t,n,r){var i=e.replayFilter?tt(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(u,h,v){var g,c;i&&!i(h,v,function(_){return h.stop(_)},function(_){return h.fail(_)})||((c=""+(g=h.primaryKey))=="[object ArrayBuffer]"&&(c=""+new Uint8Array(g)),U(a,c)||(a[c]=!0,t(u,h,v)))};return Promise.all([e.or._iterate(o,n),Er(Pr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Er(Pr(e,r,n),tt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Er(e,t,n,r){var i=ue(r?function(a,o,u){return n(r(a),o,u)}:n);return e.then(function(a){if(a)return a.start(function(){var o=function(){return a.continue()};t&&!t(a,function(u){return o=u},function(u){a.stop(u),o=ie},function(u){a.fail(u),o=ie})||i(a.value,a,function(u){return o=u}),o()})})}var Et=(Dr.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(I(n))return x(x([],I(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(I(r))return I(e)?e.filter(function(i){return!r.includes(i)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Dr);function Dr(e){this["@@propmod"]=e}var Ri=($.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,le.bind(null,n.error)):n.table._trans("readonly",e).then(t)},$.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,le.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},$.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=tt(t.algorithm,e)},$.prototype._iterate=function(e,t){return Zt(this._ctx,e,t,this._ctx.table.core)},$.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&L(n,e),t._ctx=n,t},$.prototype.raw=function(){return this._ctx.valueMapper=null,this},$.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Zt(t,e,n,t.table.core)})},$.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(yt(r,!0))return i.count({trans:n,query:{index:Yt(r,i.schema),range:r.range}}).then(function(o){return Math.min(o,r.limit)});var a=0;return Zt(r,function(){return++a,!1},n,i).then(function(){return a})}).then(e)},$.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(h,v){return v?a(h[n[v]],v-1):h[r]}var o=this._ctx.dir==="next"?1:-1;function u(h,v){return Z(a(h,i),a(v,i))*o}return this.toArray(function(h){return h.sort(u)}).then(t)},$.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&yt(r,!0)&&0<r.limit){var i=r.valueMapper,a=Yt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(u){return u=u.result,i?u.map(i):u})}var o=[];return Zt(r,function(u){return o.push(u)},n,r.table.core).then(function(){return o})},e)},$.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,yt(t)?In(t,function(){var n=e;return function(r,i){return n===0||(n===1?--n:i(function(){r.advance(n),n=0}),!1)}}):In(t,function(){var n=e;return function(){return--n<0}})),this},$.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),In(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},$.prototype.until=function(e,t){return Bn(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},$.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},$.prototype.last=function(e){return this.reverse().first(e)},$.prototype.filter=function(e){var t;return Bn(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=tt(t.isMatch,e),this},$.prototype.and=function(e){return this.filter(e)},$.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},$.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},$.prototype.desc=function(){return this.reverse()},$.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},$.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},$.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},$.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},$.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&yt(t,!0)&&0<t.limit)return this._read(function(r){var i=Yt(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},$.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},$.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},$.prototype.lastKey=function(e){return this.reverse().firstKey(e)},$.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return Bn(this._ctx,function(i){var r=i.primaryKey.toString(),i=U(t,r);return t[r]=!0,!i}),this},$.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,a,o;o=typeof e=="function"?e:(i=C(e),a=i.length,function(y){for(var w=!1,k=0;k<a;++k){var O=i[k],S=e[O],P=Y(y,O);S instanceof Et?(H(y,O,S.execute(P)),w=!0):P!==S&&(H(y,O,S),w=!0)}return w});var u=n.table.core,c=u.schema.primaryKey,h=c.outbound,v=c.extractKey,g=200,c=t.db._options.modifyChunkSize;c&&(g=typeof c=="object"?c[u.name]||c["*"]||200:c);function _(y,O){var k=O.failures,O=O.numFailures;m+=y-O;for(var S=0,P=C(k);S<P.length;S++){var j=P[S];p.push(k[j])}}var p=[],m=0,b=[];return t.clone().primaryKeys().then(function(y){function w(O){var S=Math.min(g,y.length-O);return u.getMany({trans:r,keys:y.slice(O,O+S),cache:"immutable"}).then(function(P){for(var j=[],E=[],D=h?[]:null,K=[],R=0;R<S;++R){var B=P[R],G={value:je(B),primKey:y[O+R]};o.call(G,G.value,G)!==!1&&(G.value==null?K.push(y[O+R]):h||Z(v(B),v(G.value))===0?(E.push(G.value),h&&D.push(y[O+R])):(K.push(y[O+R]),j.push(G.value)))}return Promise.resolve(0<j.length&&u.mutate({trans:r,type:"add",values:j}).then(function(W){for(var X in W.failures)K.splice(parseInt(X),1);_(j.length,W)})).then(function(){return(0<E.length||k&&typeof e=="object")&&u.mutate({trans:r,type:"put",keys:D,values:E,criteria:k,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<O}).then(function(W){return _(E.length,W)})}).then(function(){return(0<K.length||k&&e===Fn)&&u.mutate({trans:r,type:"delete",keys:K,criteria:k,isAdditionalChunk:0<O}).then(function(W){return _(K.length,W)})}).then(function(){return y.length>O+S&&w(O+g)})})}var k=yt(n)&&n.limit===1/0&&(typeof e!="function"||e===Fn)&&{index:n.index,range:n.range};return w(0).then(function(){if(0<p.length)throw new Te("Error modifying one or more objects",p,m,b);return y.length})})})},$.prototype.delete=function(){var e=this._ctx,t=e.range;return yt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(a){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(o){var u=o.failures;if(o.lastResult,o.results,o=o.numFailures,o)throw new Te("Could not delete some values",Object.keys(u).map(function(h){return u[h]}),a-o);return a-o})})}):this.modify(Fn)},$);function $(){}var Fn=function(e,t){return t.value=null};function ji(e,t){return e<t?-1:e===t?0:1}function Ki(e,t){return t<e?-1:e===t?0:1}function Ae(e,t,n){return e=e instanceof jr?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function mt(e){return new e.Collection(e,function(){return Rr("")}).limit(0)}function Jt(e,t,n,r){var i,a,o,u,h,v,g,c=n.length;if(!n.every(function(m){return typeof m=="string"}))return Ae(e,xr);function _(m){i=m==="next"?function(y){return y.toUpperCase()}:function(y){return y.toLowerCase()},a=m==="next"?function(y){return y.toLowerCase()}:function(y){return y.toUpperCase()},o=m==="next"?ji:Ki;var b=n.map(function(y){return{lower:a(y),upper:i(y)}}).sort(function(y,w){return o(y.lower,w.lower)});u=b.map(function(y){return y.upper}),h=b.map(function(y){return y.lower}),g=(v=m)==="next"?"":r}_("next"),e=new e.Collection(e,function(){return Ge(u[0],h[c-1]+r)}),e._ondirectionchange=function(m){_(m)};var p=0;return e._addAlgorithm(function(m,b,y){var w=m.key;if(typeof w!="string")return!1;var k=a(w);if(t(k,h,p))return!0;for(var O=null,S=p;S<c;++S){var P=function(j,E,D,K,R,B){for(var G=Math.min(j.length,K.length),W=-1,X=0;X<G;++X){var Oe=E[X];if(Oe!==K[X])return R(j[X],D[X])<0?j.substr(0,X)+D[X]+D.substr(X+1):R(j[X],K[X])<0?j.substr(0,X)+K[X]+D.substr(X+1):0<=W?j.substr(0,W)+E[W]+D.substr(W+1):null;R(j[X],Oe)<0&&(W=X)}return G<K.length&&B==="next"?j+D.substr(j.length):G<j.length&&B==="prev"?j.substr(0,D.length):W<0?null:j.substr(0,W)+K[W]+D.substr(W+1)}(w,k,u[S],h[S],o,v);P===null&&O===null?p=S+1:(O===null||0<o(O,P))&&(O=P)}return b(O!==null?function(){m.continue(O+g)}:y),!1}),e}function Ge(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Rr(e){return{type:1,lower:e,upper:e}}var jr=(Object.defineProperty(pe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),pe.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?mt(this):new this.Collection(this,function(){return Ge(e,t,!n,!r)})}catch{return Ae(this,Ke)}},pe.prototype.equals=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Rr(e)})},pe.prototype.above=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(e,void 0,!0)})},pe.prototype.aboveOrEqual=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(e,void 0,!1)})},pe.prototype.below=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(void 0,e,!1,!0)})},pe.prototype.belowOrEqual=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(void 0,e)})},pe.prototype.startsWith=function(e){return typeof e!="string"?Ae(this,xr):this.between(e,e+et,!0,!0)},pe.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Jt(this,function(t,n){return t.indexOf(n[0])===0},[e],et)},pe.prototype.equalsIgnoreCase=function(e){return Jt(this,function(t,n){return t===n[0]},[e],"")},pe.prototype.anyOfIgnoreCase=function(){var e=ke.apply(Se,arguments);return e.length===0?mt(this):Jt(this,function(t,n){return n.indexOf(t)!==-1},e,"")},pe.prototype.startsWithAnyOfIgnoreCase=function(){var e=ke.apply(Se,arguments);return e.length===0?mt(this):Jt(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,et)},pe.prototype.anyOf=function(){var e=this,t=ke.apply(Se,arguments),n=this._cmp;try{t.sort(n)}catch{return Ae(this,Ke)}if(t.length===0)return mt(this);var r=new this.Collection(this,function(){return Ge(t[0],t[t.length-1])});r._ondirectionchange=function(a){n=a==="next"?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(a,o,u){for(var h=a.key;0<n(h,t[i]);)if(++i===t.length)return o(u),!1;return n(h,t[i])===0||(o(function(){a.continue(t[i])}),!1)}),r},pe.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},pe.prototype.noneOf=function(){var e=ke.apply(Se,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ae(this,Ke)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},pe.prototype.inAnyRange=function(w,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,o=this._min,u=this._max;if(w.length===0)return mt(this);if(!w.every(function(k){return k[0]!==void 0&&k[1]!==void 0&&i(k[0],k[1])<=0}))return Ae(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var h=!t||t.includeLowers!==!1,v=t&&t.includeUppers===!0,g,c=i;function _(k,O){return c(k[0],O[0])}try{(g=w.reduce(function(k,O){for(var S=0,P=k.length;S<P;++S){var j=k[S];if(r(O[0],j[1])<0&&0<r(O[1],j[0])){j[0]=o(j[0],O[0]),j[1]=u(j[1],O[1]);break}}return S===P&&k.push(O),k},[])).sort(_)}catch{return Ae(this,Ke)}var p=0,m=v?function(k){return 0<i(k,g[p][1])}:function(k){return 0<=i(k,g[p][1])},b=h?function(k){return 0<a(k,g[p][0])}:function(k){return 0<=a(k,g[p][0])},y=m,w=new this.Collection(this,function(){return Ge(g[0][0],g[g.length-1][1],!h,!v)});return w._ondirectionchange=function(k){c=k==="next"?(y=m,i):(y=b,a),g.sort(_)},w._addAlgorithm(function(k,O,S){for(var P,j=k.key;y(j);)if(++p===g.length)return O(S),!1;return!m(P=j)&&!b(P)||(n._cmp(j,g[p][1])===0||n._cmp(j,g[p][0])===0||O(function(){c===i?k.continue(g[p][0]):k.continue(g[p][1])}),!1)}),w},pe.prototype.startsWithAnyOf=function(){var e=ke.apply(Se,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?mt(this):this.inAnyRange(e.map(function(t){return[t,t+et]})):Ae(this,"startsWithAnyOf() only works with strings")},pe);function pe(){}function De(e){return ue(function(t){return Dt(t),e(t.target.error),!1})}function Dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Rt="storagemutated",qn="x-storagemutated-1",Ve=Ct(null,Rt),Mi=(Re.prototype._lock=function(){return Q(!F.global),++this._reculock,this._reculock!==1||F.global||(F.lockOwnerFor=this),this},Re.prototype._unlock=function(){if(Q(!F.global),--this._reculock==0)for(F.global||(F.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{$e(e[1],e[0])}catch{}}return this},Re.prototype._locked=function(){return this._reculock&&F.lockOwnerFor!==this},Re.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Q(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new T.DatabaseClosed(r);case"MissingAPIError":throw new T.MissingAPI(r.message,r);default:throw new T.OpenFailed(r)}if(!this.active)throw new T.TransactionInactive;return Q(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ue(function(i){Dt(i),t._reject(e.error)}),e.onabort=ue(function(i){Dt(i),t.active&&t._reject(new T.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=ue(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ve.storagemutated.fire(e.mutatedParts)}),this},Re.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return le(new T.ReadOnly("Transaction is readonly"));if(!this.active)return le(new T.TransactionInactive);if(this._locked())return new M(function(a,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,o)},F])});if(n)return Ue(function(){var a=new M(function(o,u){r._lock();var h=t(o,u,r);h&&h.then&&h.then(o,u)});return a.finally(function(){return r._unlock()}),a._lib=!0,a});var i=new M(function(a,o){var u=t(a,o,r);u&&u.then&&u.then(a,o)});return i._lib=!0,i},Re.prototype._root=function(){return this.parent?this.parent._root():this},Re.prototype.waitFor=function(e){var t,n=this._root(),r=M.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=a)}());var i=n._waitingFor;return new M(function(a,o){r.then(function(u){return n._waitingQueue.push(ue(a.bind(null,u)))},function(u){return n._waitingQueue.push(ue(o.bind(null,u)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Re.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},Re.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(U(t,e))return t[e];var n=this.schema[e];if(!n)throw new T.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Re);function Re(){}function Tn(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Kr(t)}}function Kr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ln(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,a,o){return o=r(a,o),o&&(i[o[0]]=o[1]),i},{}))};var r}var jt=function(e){try{return e.only([[]]),jt=function(){return[[]]},[[]]}catch{return jt=function(){return et},et}};function Nn(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return Y(n,t)}:function(n){return Y(n,e)};var t}function Mr(e){return[].slice.call(e)}var Bi=0;function Kt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Ii(e,t,h){function r(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=y.lower,m=y.upper,b=y.lowerOpen,y=y.upperOpen;return p===void 0?m===void 0?null:t.upperBound(m,!!y):m===void 0?t.lowerBound(p,!!b):t.bound(p,m,!!b,!!y)}function i(_){var p,m=_.name;return{name:m,schema:_,mutate:function(b){var y=b.trans,w=b.type,k=b.keys,O=b.values,S=b.range;return new Promise(function(P,j){P=ue(P);var E=y.objectStore(m),D=E.keyPath==null,K=w==="put"||w==="add";if(!K&&w!=="delete"&&w!=="deleteRange")throw new Error("Invalid operation type: "+w);var R,B=(k||O||{length:1}).length;if(k&&O&&k.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});function G(we){++Oe,Dt(we)}var W=[],X=[],Oe=0;if(w==="deleteRange"){if(S.type===4)return P({numFailures:Oe,failures:X,results:[],lastResult:void 0});S.type===3?W.push(R=E.clear()):W.push(R=E.delete(r(S)))}else{var D=K?D?[O,k]:[O,null]:[k,null],z=D[0],be=D[1];if(K)for(var _e=0;_e<B;++_e)W.push(R=be&&be[_e]!==void 0?E[w](z[_e],be[_e]):E[w](z[_e])),R.onerror=G;else for(_e=0;_e<B;++_e)W.push(R=E[w](z[_e])),R.onerror=G}function dn(we){we=we.target.result,W.forEach(function(it,ar){return it.error!=null&&(X[ar]=it.error)}),P({numFailures:Oe,failures:X,results:w==="delete"?k:W.map(function(it){return it.result}),lastResult:we})}R.onerror=function(we){G(we),dn(we)},R.onsuccess=dn})},getMany:function(b){var y=b.trans,w=b.keys;return new Promise(function(k,O){k=ue(k);for(var S,P=y.objectStore(m),j=w.length,E=new Array(j),D=0,K=0,R=function(W){W=W.target,E[W._pos]=W.result,++K===D&&k(E)},B=De(O),G=0;G<j;++G)w[G]!=null&&((S=P.get(w[G]))._pos=G,S.onsuccess=R,S.onerror=B,++D);D===0&&k(E)})},get:function(b){var y=b.trans,w=b.key;return new Promise(function(k,O){k=ue(k);var S=y.objectStore(m).get(w);S.onsuccess=function(P){return k(P.target.result)},S.onerror=De(O)})},query:(p=v,function(b){return new Promise(function(y,w){y=ue(y);var k,O,S,D=b.trans,P=b.values,j=b.limit,R=b.query,E=j===1/0?void 0:j,K=R.index,R=R.range,D=D.objectStore(m),K=K.isPrimaryKey?D:D.index(K.name),R=r(R);if(j===0)return y({result:[]});p?((E=P?K.getAll(R,E):K.getAllKeys(R,E)).onsuccess=function(B){return y({result:B.target.result})},E.onerror=De(w)):(k=0,O=!P&&"openKeyCursor"in K?K.openKeyCursor(R):K.openCursor(R),S=[],O.onsuccess=function(B){var G=O.result;return G?(S.push(P?G.value:G.primaryKey),++k===j?y({result:S}):void G.continue()):y({result:S})},O.onerror=De(w))})}),openCursor:function(b){var y=b.trans,w=b.values,k=b.query,O=b.reverse,S=b.unique;return new Promise(function(P,j){P=ue(P);var K=k.index,E=k.range,D=y.objectStore(m),D=K.isPrimaryKey?D:D.index(K.name),K=O?S?"prevunique":"prev":S?"nextunique":"next",R=!w&&"openKeyCursor"in D?D.openKeyCursor(r(E),K):D.openCursor(r(E),K);R.onerror=De(j),R.onsuccess=ue(function(B){var G,W,X,Oe,z=R.result;z?(z.___id=++Bi,z.done=!1,G=z.continue.bind(z),W=(W=z.continuePrimaryKey)&&W.bind(z),X=z.advance.bind(z),Oe=function(){throw new Error("Cursor not stopped")},z.trans=y,z.stop=z.continue=z.continuePrimaryKey=z.advance=function(){throw new Error("Cursor not started")},z.fail=ue(j),z.next=function(){var be=this,_e=1;return this.start(function(){return _e--?be.continue():be.stop()}).then(function(){return be})},z.start=function(be){function _e(){if(R.result)try{be()}catch(we){z.fail(we)}else z.done=!0,z.start=function(){throw new Error("Cursor behind last entry")},z.stop()}var dn=new Promise(function(we,it){we=ue(we),R.onerror=De(it),z.fail=it,z.stop=function(ar){z.stop=z.continue=z.continuePrimaryKey=z.advance=Oe,we(ar)}});return R.onsuccess=ue(function(we){R.onsuccess=_e,_e()}),z.continue=G,z.continuePrimaryKey=W,z.advance=X,_e(),dn},P(z)):P(null)},j)})},count:function(b){var y=b.query,w=b.trans,k=y.index,O=y.range;return new Promise(function(S,P){var j=w.objectStore(m),E=k.isPrimaryKey?j:j.index(k.name),j=r(O),E=j?E.count(j):E.count();E.onsuccess=ue(function(D){return S(D.target.result)}),E.onerror=De(P)})}}}var a,o,u,g=(o=h,u=Mr((a=e).objectStoreNames),{schema:{name:a.name,tables:u.map(function(_){return o.objectStore(_)}).map(function(_){var p=_.keyPath,y=_.autoIncrement,m=I(p),b={},y={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:p==null,compound:m,keyPath:p,autoIncrement:y,unique:!0,extractKey:Nn(p)},indexes:Mr(_.indexNames).map(function(w){return _.index(w)}).map(function(S){var k=S.name,O=S.unique,P=S.multiEntry,S=S.keyPath,P={name:k,compound:I(S),keyPath:S,unique:O,multiEntry:P,extractKey:Nn(S)};return b[Kt(S)]=P}),getIndexByKeyPath:function(w){return b[Kt(w)]}};return b[":id"]=y.primaryKey,p!=null&&(b[Kt(p)]=y.primaryKey),y})},hasGetAll:0<u.length&&"getAll"in o.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),h=g.schema,v=g.hasGetAll,g=h.tables.map(i),c={};return g.forEach(function(_){return c[_.name]=_}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(_){if(!c[_])throw new Error("Table '".concat(_,"' not found"));return c[_]},MIN_KEY:-1/0,MAX_KEY:jt(t),schema:h}}function Fi(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Ii(t,i,r),e.dbcore.reduce(function(a,o){return o=o.create,s(s({},a),o(a))},r))}}function $t(e,r){var n=r.db,r=Fi(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(o){return o.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function en(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(o){var u=function h(v,g){return ee(v,g)||(v=V(v))&&h(v,g)}(o,i);(!u||"value"in u&&u.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?q(o,i,{get:function(){return this.table(i)},set:function(h){ae(this,i,{value:h,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,a))})})}function Un(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function qi(e,t){return e._cfg.version-t._cfg.version}function Ti(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Ln("$meta",Ir("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=F.transless||F;Ue(function(){return F.trans=a,F.transless=u,t!==0?($t(e,n),v=t,((h=a).storeNames.includes("$meta")?h.table("$meta").get("version").then(function(g){return g??v}):M.resolve(v)).then(function(g){return _=g,p=a,m=n,b=[],g=(c=e)._versions,y=c._dbSchema=nn(0,c.idbdb,m),(g=g.filter(function(w){return w._cfg.version>=_})).length!==0?(g.forEach(function(w){b.push(function(){var k=y,O=w._cfg.dbschema;rn(c,k,m),rn(c,O,m),y=c._dbSchema=O;var S=Hn(k,O);S.add.forEach(function(K){zn(m,K[0],K[1].primKey,K[1].indexes)}),S.change.forEach(function(K){if(K.recreate)throw new T.Upgrade("Not yet support for changing primary key");var R=m.objectStore(K.name);K.add.forEach(function(B){return tn(R,B)}),K.change.forEach(function(B){R.deleteIndex(B.name),tn(R,B)}),K.del.forEach(function(B){return R.deleteIndex(B)})});var P=w._cfg.contentUpgrade;if(P&&w._cfg.version>_){$t(c,m),p._memoizedTables={};var j=re(O);S.del.forEach(function(K){j[K]=k[K]}),Un(c,[c.Transaction.prototype]),en(c,[c.Transaction.prototype],C(j),j),p.schema=j;var E,D=ft(P);return D&&pt(),S=M.follow(function(){var K;(E=P(p))&&D&&(K=He.bind(null,null),E.then(K,K))}),E&&typeof E.then=="function"?M.resolve(E):S.then(function(){return E})}}),b.push(function(k){var O,S,P=w._cfg.dbschema;O=P,S=k,[].slice.call(S.db.objectStoreNames).forEach(function(j){return O[j]==null&&S.db.deleteObjectStore(j)}),Un(c,[c.Transaction.prototype]),en(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),p.schema=c._dbSchema}),b.push(function(k){c.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(c.idbdb.version/10)===w._cfg.version?(c.idbdb.deleteObjectStore("$meta"),delete c._dbSchema.$meta,c._storeNames=c._storeNames.filter(function(O){return O!=="$meta"})):k.objectStore("$meta").put(w._cfg.version,"version"))})}),function w(){return b.length?M.resolve(b.shift()(p.idbtrans)).then(w):M.resolve()}().then(function(){Br(y,m)})):M.resolve();var c,_,p,m,b,y}).catch(o)):(C(i).forEach(function(g){zn(n,g,i[g].primKey,i[g].indexes)}),$t(e,n),void M.follow(function(){return e.on.populate.fire(a)}).catch(o));var h,v})}function Li(e,t){Br(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=nn(0,e.idbdb,t);rn(e,e._dbSchema,t);for(var r=0,i=Hn(n,e._dbSchema).change;r<i.length;r++){var a=function(o){if(o.change.length||o.recreate)return console.warn("Unable to patch indexes of table ".concat(o.name," because it has changes on the type of index or primary key.")),{value:void 0};var u=t.objectStore(o.name);o.add.forEach(function(h){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(o.name,".").concat(h.src)),tn(u,h)})}(i[r]);if(typeof a=="object")return a.value}}function Hn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var o={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)o.recreate=!0,r.change.push(o);else{var u=i.idxByName,h=a.idxByName,v=void 0;for(v in u)h[v]||o.del.push(v);for(v in h){var g=u[v],c=h[v];g?g.src!==c.src&&o.change.push(c):o.add.push(c)}(0<o.del.length||0<o.add.length||0<o.change.length)&&r.change.push(o)}}else r.add.push([n,a])}return r}function zn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return tn(i,a)}),i}function Br(e,t){C(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Ee&&console.debug("Dexie: Creating missing table",n),zn(t,n,e[n].primKey,e[n].indexes))})}function tn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function nn(e,t,n){var r={};return N(t.objectStoreNames,0).forEach(function(i){for(var a=n.objectStore(i),o=Tn(Kr(v=a.keyPath),v||"",!0,!1,!!a.autoIncrement,v&&typeof v!="string",!0),u=[],h=0;h<a.indexNames.length;++h){var g=a.index(a.indexNames[h]),v=g.keyPath,g=Tn(g.name,v,!!g.unique,!!g.multiEntry,!1,v&&typeof v!="string",!1);u.push(g)}r[i]=Ln(i,o,u)}),r}function rn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var h=o.indexNames[u],v=o.index(h).keyPath,g=typeof v=="string"?v:"["+N(v).join("+")+"]";!t[a]||(v=t[a].idxByName[g])&&(v.name=h,delete t[a].idxByName[g],t[a].idxByName[h]=v)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&A.WorkerGlobalScope&&A instanceof A.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ir(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Tn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),I(i),n===0)})}var Ni=(an.prototype._parseStoresSpec=function(e,t){C(e).forEach(function(n){if(e[n]!==null){var r=Ir(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new T.Schema("Primary key cannot be multi-valued");r.forEach(function(a){if(a.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),t[n]=Ln(n,i,r)}})},an.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?L(this._cfg.storesSource,n):n;var n=t._versions,r={},i={};return n.forEach(function(a){L(r,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(r,i)}),t._dbSchema=i,Un(t,[t._allTables,t,t.Transaction.prototype]),en(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],C(i),i),t._storeNames=C(i),this},an.prototype.upgrade=function(e){return this._cfg.contentUpgrade=An(this._cfg.contentUpgrade||ie,e),this},an);function an(){}function Gn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Me(Xt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Vn(e){return e&&typeof e.databases=="function"}function Wn(e){return Ue(function(){return F.letThrough=!0,e()})}function Xn(e){return!("from"in e)}var ge=function(e,t){if(!this){var n=new ge;return e&&"d"in e&&L(n,e),n}L(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Mt(e,t,n){var r=Z(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Xn(e))return L(e,{from:t,to:n,d:1});var i=e.l,r=e.r;if(Z(n,e.from)<0)return i?Mt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},qr(e);if(0<Z(t,e.to))return r?Mt(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},qr(e);Z(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<Z(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Bt(e,i),r&&n&&Bt(e,r)}}function Bt(e,t){Xn(t)||function n(r,h){var a=h.from,o=h.to,u=h.l,h=h.r;Mt(r,a,o),u&&n(r,u),h&&n(r,h)}(e,t)}function Fr(e,t){var n=on(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=on(e),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(Z(u.from,i.to)<=0&&0<=Z(u.to,i.from))return!0;Z(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function on(e){var t=Xn(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Z(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Z(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function qr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t=i=="r"?"l":"r",n=s({},e),r=e[i],e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Tr(n)),e.d=Tr(e)}function Tr(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function sn(e,t){return C(t).forEach(function(n){e[n]?Bt(e[n],t[n]):e[n]=function r(i){var a,o,u={};for(a in i)U(i,a)&&(o=i[a],u[a]=!o||typeof o!="object"||lt.has(o.constructor)?o:r(o));return u}(t[n])}),e}function Qn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Fr(t[n],e[n])})}J(ge.prototype,((Ce={add:function(e){return Bt(this,e),this},addKey:function(e){return Mt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Mt(t,n,n)}),this},hasKey:function(e){var t=on(this).next(e).value;return t&&Z(t.from,e)<=0&&0<=Z(t.to,e)}})[wt]=function(){return on(this)},Ce));var nt={},Yn={},Zn=!1;function un(e){sn(Yn,e),Zn||(Zn=!0,setTimeout(function(){Zn=!1,Jn(Yn,!(Yn={}))},0))}function Jn(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(nt);r<i.length;r++)Lr(o=i[r],e,n,t);else for(var a in e){var o,u=/^idb\:\/\/(.*)\/(.*)\//.exec(a);u&&(a=u[1],u=u[2],(o=nt["idb://".concat(a,"/").concat(u)])&&Lr(o,e,n,t))}n.forEach(function(h){return h()})}function Lr(e,t,n,r){for(var i=[],a=0,o=Object.entries(e.queries.query);a<o.length;a++){for(var u=o[a],h=u[0],v=[],g=0,c=u[1];g<c.length;g++){var _=c[g];Qn(t,_.obsSet)?_.subscribers.forEach(function(y){return n.add(y)}):r&&v.push(_)}r&&i.push([h,v])}if(r)for(var p=0,m=i;p<m.length;p++){var b=m[p],h=b[0],v=b[1];e.queries.query[h]=v}}function Ui(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?le(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function o(){if(t.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}function u(){return new M(function(_,p){if(o(),!n)throw new T.MissingAPI;var m=e.name,b=t.autoSchema||!i?n.open(m):n.open(m,i);if(!b)throw new T.MissingAPI;b.onerror=De(p),b.onblocked=ue(e._fireOnBlocked),b.onupgradeneeded=ue(function(y){var w;g=b.transaction,t.autoSchema&&!e._options.allowEmptyDB?(b.onerror=Dt,g.abort(),b.result.close(),(w=n.deleteDatabase(m)).onsuccess=w.onerror=ue(function(){p(new T.NoSuchDatabase("Database ".concat(m," doesnt exist")))})):(g.onerror=De(p),y=y.oldVersion>Math.pow(2,62)?0:y.oldVersion,c=y<1,e.idbdb=b.result,a&&Li(e,g),Ti(e,y/10,g,p))},p),b.onsuccess=ue(function(){g=null;var y,w,k,O,S,P=e.idbdb=b.result,j=N(P.objectStoreNames);if(0<j.length)try{var E=P.transaction((O=j).length===1?O[0]:O,"readonly");if(t.autoSchema)w=P,k=E,(y=e).verno=w.version/10,k=y._dbSchema=nn(0,w,k),y._storeNames=N(w.objectStoreNames,0),en(y,[y._allTables],C(k),k);else if(rn(e,e._dbSchema,E),((S=Hn(nn(0,(S=e).idbdb,E),S._dbSchema)).add.length||S.change.some(function(D){return D.add.length||D.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),i=P.version+1,a=!0,_(u());$t(e,E)}catch{}vt.push(e),P.onversionchange=ue(function(D){t.vcFired=!0,e.on("versionchange").fire(D)}),P.onclose=ue(function(D){e.on("close").fire(D)}),c&&(S=e._deps,E=m,P=S.indexedDB,S=S.IDBKeyRange,Vn(P)||E===Xt||Gn(P,S).put({name:E}).catch(ie)),_()},p)}).catch(function(_){switch(_==null?void 0:_.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u();break;case"VersionError":if(0<i)return i=0,u()}return M.reject(_)})}var h,v=t.dbReadyResolve,g=null,c=!1;return M.race([r,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(_){function p(){return indexedDB.databases().finally(_)}h=setInterval(p,100),p()}).finally(function(){return clearInterval(h)}):Promise.resolve()).then(u)]).then(function(){return o(),t.onReadyBeingFired=[],M.resolve(Wn(function(){return e.on.ready.fire(e.vip)})).then(function _(){if(0<t.onReadyBeingFired.length){var p=t.onReadyBeingFired.reduce(An,ie);return t.onReadyBeingFired=[],M.resolve(Wn(function(){return p(e.vip)})).then(_)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(_){t.dbOpenError=_;try{g&&g.abort()}catch{}return r===t.openCanceller&&e._close(),le(_)}).finally(function(){t.openComplete=!0,v()}).then(function(){var _;return c&&(_={},e.tables.forEach(function(p){p.schema.indexes.forEach(function(m){m.name&&(_["idb://".concat(e.name,"/").concat(p.name,"/").concat(m.name)]=new ge(-1/0,[[[]]]))}),_["idb://".concat(e.name,"/").concat(p.name,"/")]=_["idb://".concat(e.name,"/").concat(p.name,"/:dels")]=new ge(-1/0,[[[]]])}),Ve(Rt).fire(_),Jn(_,!0)),e})}function $n(e){function t(a){return e.next(a)}var n=i(t),r=i(function(a){return e.throw(a)});function i(a){return function(h){var u=a(h),h=u.value;return u.done?h:h&&typeof h.then=="function"?h.then(n,r):I(h)?Promise.all(h).then(n,r):n(h)}}return i(t)()}function cn(e,t,n){for(var r=I(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Hi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(c,_,p){var m=Kt(c),b=i[m]=i[m]||[],y=c==null?0:typeof c=="string"?1:c.length,w=0<_,w=s(s({},p),{name:w?"".concat(m,"(virtual-from:").concat(p.name,")"):p.name,lowLevelIndex:p,isVirtual:w,keyTail:_,keyLength:y,extractKey:Nn(c),unique:!w&&p.unique});return b.push(w),w.isPrimaryKey||a.push(w),1<y&&o(y===2?c[0]:c.slice(0,y-1),_+1,p),b.sort(function(k,O){return k.keyTail-O.keyTail}),w}t=o(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var u=0,h=r.indexes;u<h.length;u++){var v=h[u];o(v.keyPath,0,v)}function g(c){var _,p=c.query.index;return p.isVirtual?s(s({},c),{query:{index:p.lowLevelIndex,range:(_=c.query.range,p=p.keyTail,{type:_.type===1?2:_.type,lower:cn(_.lower,_.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:cn(_.upper,_.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0})}}):c}return s(s({},n),{schema:s(s({},r),{primaryKey:t,indexes:a,getIndexByKeyPath:function(c){return(c=i[Kt(c)])&&c[0]}}),count:function(c){return n.count(g(c))},query:function(c){return n.query(g(c))},openCursor:function(c){var _=c.query.index,p=_.keyTail,m=_.isVirtual,b=_.keyLength;return m?n.openCursor(g(c)).then(function(w){return w&&y(w)}):n.openCursor(c);function y(w){return Object.create(w,{continue:{value:function(k){k!=null?w.continue(cn(k,c.reverse?e.MAX_KEY:e.MIN_KEY,p)):c.unique?w.continue(w.key.slice(0,b).concat(c.reverse?e.MIN_KEY:e.MAX_KEY,p)):w.continue()}},continuePrimaryKey:{value:function(k,O){w.continuePrimaryKey(cn(k,e.MAX_KEY,p),O)}},primaryKey:{get:function(){return w.primaryKey}},key:{get:function(){var k=w.key;return b===1?k[0]:k.slice(0,b)}},value:{get:function(){return w.value}}})}}})}})}};function er(e,t,n,r){return n=n||{},r=r||"",C(e).forEach(function(i){var a,o,u;U(t,i)?(a=e[i],o=t[i],typeof a=="object"&&typeof o=="object"&&a&&o?(u=_t(a))!==_t(o)?n[r+i]=t[i]:u==="Object"?er(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i]):a!==o&&(n[r+i]=t[i])):n[r+i]=void 0}),C(t).forEach(function(i){U(e,i)||(n[r+i]=t[i])}),n}function tr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var zi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return s(s({},n),{mutate:function(i){var a=F.trans,o=a.table(t).hook,u=o.deleting,h=o.creating,v=o.updating;switch(i.type){case"add":if(h.fire===ie)break;return a._promise("readwrite",function(){return g(i)},!0);case"put":if(h.fire===ie&&v.fire===ie)break;return a._promise("readwrite",function(){return g(i)},!0);case"delete":if(u.fire===ie)break;return a._promise("readwrite",function(){return g(i)},!0);case"deleteRange":if(u.fire===ie)break;return a._promise("readwrite",function(){return function c(_,p,m){return n.query({trans:_,values:!1,query:{index:r,range:p},limit:m}).then(function(b){var y=b.result;return g({type:"delete",keys:y,trans:_}).then(function(w){return 0<w.numFailures?Promise.reject(w.failures[0]):y.length<m?{failures:[],numFailures:0,lastResult:void 0}:c(_,s(s({},p),{lower:y[y.length-1],lowerOpen:!0}),m)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function g(c){var _,p,m,b=F.trans,y=c.keys||tr(r,c);if(!y)throw new Error("Keys missing");return(c=c.type==="add"||c.type==="put"?s(s({},c),{keys:y}):s({},c)).type!=="delete"&&(c.values=x([],c.values)),c.keys&&(c.keys=x([],c.keys)),_=n,m=y,((p=c).type==="add"?Promise.resolve([]):_.getMany({trans:p.trans,keys:m,cache:"immutable"})).then(function(w){var k=y.map(function(O,S){var P,j,E,D=w[S],K={onerror:null,onsuccess:null};return c.type==="delete"?u.fire.call(K,O,D,b):c.type==="add"||D===void 0?(P=h.fire.call(K,O,c.values[S],b),O==null&&P!=null&&(c.keys[S]=O=P,r.outbound||H(c.values[S],r.keyPath,O))):(P=er(D,c.values[S]),(j=v.fire.call(K,P,O,D,b))&&(E=c.values[S],Object.keys(j).forEach(function(R){U(E,R)?E[R]=j[R]:H(E,R,j[R])}))),K});return n.mutate(c).then(function(O){for(var S=O.failures,P=O.results,j=O.numFailures,O=O.lastResult,E=0;E<y.length;++E){var D=(P||y)[E],K=k[E];D==null?K.onerror&&K.onerror(S[E]):K.onsuccess&&K.onsuccess(c.type==="put"&&w[E]?c.values[E]:D)}return{failures:S,results:P,numFailures:j,lastResult:O}}).catch(function(O){return k.forEach(function(S){return S.onerror&&S.onerror(O)}),Promise.reject(O)})})}}})}})}};function Nr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)Z(t.keys[i],e[a])===0&&(r.push(n?je(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var Gi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Nr(r.keys,r.trans._cache,r.cache==="clone");return i?M.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?je(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Ur(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Hr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Vi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new ge(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(r,i,a){if(F.subscr&&i!=="readonly")throw new T.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(F.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,c=a.indexes,u=o.extractKey,h=o.outbound,v=o.autoIncrement&&c.filter(function(p){return p.compound&&p.keyPath.includes(o.keyPath)}),g=s(s({},i),{mutate:function(p){function m(R){return R="idb://".concat(t,"/").concat(r,"/").concat(R),O[R]||(O[R]=new ge)}var b,y,w,k=p.trans,O=p.mutatedParts||(p.mutatedParts={}),S=m(""),P=m(":dels"),j=p.type,K=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[tr(o,p).filter(function(R){return R}),p.values]:[],E=K[0],D=K[1],K=p.trans._cache;return I(E)?(S.addKeys(E),(K=j==="delete"||E.length===D.length?Nr(E,K):null)||P.addKeys(E),(K||D)&&(b=m,y=K,w=D,a.indexes.forEach(function(R){var B=b(R.name||"");function G(X){return X!=null?R.extractKey(X):null}function W(X){return R.multiEntry&&I(X)?X.forEach(function(Oe){return B.addKey(Oe)}):B.addKey(X)}(y||w).forEach(function(X,be){var z=y&&G(y[be]),be=w&&G(w[be]);Z(z,be)!==0&&(z!=null&&W(z),be!=null&&W(be))})}))):E?(D={from:(D=E.lower)!==null&&D!==void 0?D:e.MIN_KEY,to:(D=E.upper)!==null&&D!==void 0?D:e.MAX_KEY},P.add(D),S.add(D)):(S.add(n),P.add(n),a.indexes.forEach(function(R){return m(R.name).add(n)})),i.mutate(p).then(function(R){return!E||p.type!=="add"&&p.type!=="put"||(S.addKeys(R.results),v&&v.forEach(function(B){for(var G=p.values.map(function(z){return B.extractKey(z)}),W=B.keyPath.findIndex(function(z){return z===o.keyPath}),X=0,Oe=R.results.length;X<Oe;++X)G[X][W]=R.results[X];m(B.name).addKeys(G)})),k.mutatedParts=sn(k.mutatedParts||{},O),R})}}),c=function(m){var b=m.query,m=b.index,b=b.range;return[m,new ge((m=b.lower)!==null&&m!==void 0?m:e.MIN_KEY,(b=b.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},_={get:function(p){return[o,new ge(p.key)]},getMany:function(p){return[o,new ge().addKeys(p.keys)]},count:c,query:c,openCursor:c};return C(_).forEach(function(p){g[p]=function(m){var b=F.subscr,y=!!b,w=Ur(F,i)&&Hr(p,m)?m.obsSet={}:b;if(y){var k=function(D){return D="idb://".concat(t,"/").concat(r,"/").concat(D),w[D]||(w[D]=new ge)},O=k(""),S=k(":dels"),b=_[p](m),y=b[0],b=b[1];if((p==="query"&&y.isPrimaryKey&&!m.values?S:k(y.name||"")).add(b),!y.isPrimaryKey){if(p!=="count"){var P=p==="query"&&h&&m.values&&i.query(s(s({},m),{values:!1}));return i[p].apply(this,arguments).then(function(D){if(p==="query"){if(h&&m.values)return P.then(function(G){return G=G.result,O.addKeys(G),D});var K=m.values?D.result.map(u):D.result;(m.values?O:S).addKeys(K)}else if(p==="openCursor"){var R=D,B=m.values;return R&&Object.create(R,{key:{get:function(){return S.addKey(R.primaryKey),R.key}},primaryKey:{get:function(){var G=R.primaryKey;return S.addKey(G),G}},value:{get:function(){return B&&O.addKey(R.primaryKey),R.value}}})}return D})}S.add(n)}}return i[p].apply(this,arguments)}}),g}})}};function zr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=s({},t),I(t.keys)&&(t.keys=t.keys.filter(function(i,a){return!(a in n.failures)})),"values"in t&&I(t.values)&&(t.values=t.values.filter(function(i,a){return!(a in n.failures)})),t)}function nr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<Z(n,r.lower):0<=Z(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?Z(e,t.upper)<0:Z(e,t.upper)<=0));var n,r}function Gr(e,t,_,r,i,a){if(!_||_.length===0)return e;var o=t.query.index,u=o.multiEntry,h=t.query.range,v=r.schema.primaryKey.extractKey,g=o.extractKey,c=(o.lowLevelIndex||o).extractKey,_=_.reduce(function(p,m){var b=p,y=[];if(m.type==="add"||m.type==="put")for(var w=new ge,k=m.values.length-1;0<=k;--k){var O,S=m.values[k],P=v(S);w.hasKey(P)||(O=g(S),(u&&I(O)?O.some(function(R){return nr(R,h)}):nr(O,h))&&(w.addKey(P),y.push(S)))}switch(m.type){case"add":var j=new ge().addKeys(t.values?p.map(function(B){return v(B)}):p),b=p.concat(t.values?y.filter(function(B){return B=v(B),!j.hasKey(B)&&(j.addKey(B),!0)}):y.map(function(B){return v(B)}).filter(function(B){return!j.hasKey(B)&&(j.addKey(B),!0)}));break;case"put":var E=new ge().addKeys(m.values.map(function(B){return v(B)}));b=p.filter(function(B){return!E.hasKey(t.values?v(B):B)}).concat(t.values?y:y.map(function(B){return v(B)}));break;case"delete":var D=new ge().addKeys(m.keys);b=p.filter(function(B){return!D.hasKey(t.values?v(B):B)});break;case"deleteRange":var K=m.range;b=p.filter(function(B){return!nr(v(B),K)})}return b},e);return _===e?e:(_.sort(function(p,m){return Z(c(p),c(m))||Z(v(p),v(m))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function Vr(e,t){return Z(e.lower,t.lower)===0&&Z(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Wi(e,t){return function(n,r,i,a){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=Z(n,r))===0){if(i&&a)return 0;if(i)return 1;if(a)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,a){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=Z(n,r))===0){if(i&&a)return 0;if(i)return-1;if(a)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xi(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,a;e.subscribers.delete(n),e.subscribers.size===0&&(i=e,a=t,setTimeout(function(){i.subscribers.size===0&&me(a,i)},3e3))})}var Qi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,r,i){var a,o,u=e.transaction(n,r,i);return r==="readwrite"&&(o=(a=new AbortController).signal,i=function(h){return function(){if(a.abort(),r==="readwrite"){for(var v=new Set,g=0,c=n;g<c.length;g++){var _=c[g],p=nt["idb://".concat(t,"/").concat(_)];if(p){var m=e.table(_),b=p.optimisticOps.filter(function(B){return B.trans===u});if(u._explicit&&h&&u.mutatedParts)for(var y=0,w=Object.values(p.queries.query);y<w.length;y++)for(var k=0,O=(j=w[y]).slice();k<O.length;k++)Qn((E=O[k]).obsSet,u.mutatedParts)&&(me(j,E),E.subscribers.forEach(function(B){return v.add(B)}));else if(0<b.length){p.optimisticOps=p.optimisticOps.filter(function(B){return B.trans!==u});for(var S=0,P=Object.values(p.queries.query);S<P.length;S++)for(var j,E,D,K=0,R=(j=P[S]).slice();K<R.length;K++)(E=R[K]).res!=null&&u.mutatedParts&&(h&&!E.dirty?(D=Object.isFrozen(E.res),D=Gr(E.res,E.req,b,m,E,D),E.dirty?(me(j,E),E.subscribers.forEach(function(B){return v.add(B)})):D!==E.res&&(E.res=D,E.promise=M.resolve({result:D}))):(E.dirty&&me(j,E),E.subscribers.forEach(function(B){return v.add(B)})))}}}v.forEach(function(B){return B()})}}},u.addEventListener("abort",i(!1),{signal:o}),u.addEventListener("error",i(!1),{signal:o}),u.addEventListener("complete",i(!0),{signal:o})),u},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return s(s({},r),{mutate:function(a){var o=F.trans;if(i.outbound||o.db._options.cache==="disabled"||o.explicit||o.idbtrans.mode!=="readwrite")return r.mutate(a);var u=nt["idb://".concat(t,"/").concat(n)];return u?(o=r.mutate(a),a.type!=="add"&&a.type!=="put"||!(50<=a.values.length||tr(i,a).some(function(h){return h==null}))?(u.optimisticOps.push(a),a.mutatedParts&&un(a.mutatedParts),o.then(function(h){0<h.numFailures&&(me(u.optimisticOps,a),(h=zr(0,a,h))&&u.optimisticOps.push(h),a.mutatedParts&&un(a.mutatedParts))}),o.catch(function(){me(u.optimisticOps,a),a.mutatedParts&&un(a.mutatedParts)})):o.then(function(h){var v=zr(0,s(s({},a),{values:a.values.map(function(g,c){var _;return h.failures[c]?g:(g=(_=i.keyPath)!==null&&_!==void 0&&_.includes(".")?je(g):s({},g),H(g,i.keyPath,h.results[c]),g)})}),h);u.optimisticOps.push(v),queueMicrotask(function(){return a.mutatedParts&&un(a.mutatedParts)})}),o):r.mutate(a)},query:function(a){if(!Ur(F,r)||!Hr("query",a))return r.query(a);var o=((v=F.trans)===null||v===void 0?void 0:v.db._options.cache)==="immutable",c=F,u=c.requery,h=c.signal,v=function(m,b,y,w){var k=nt["idb://".concat(m,"/").concat(b)];if(!k)return[];if(!(b=k.queries[y]))return[null,!1,k,null];var O=b[(w.query?w.query.index.name:null)||""];if(!O)return[null,!1,k,null];switch(y){case"query":var S=O.find(function(P){return P.req.limit===w.limit&&P.req.values===w.values&&Vr(P.req.query.range,w.query.range)});return S?[S,!0,k,O]:[O.find(function(P){return("limit"in P.req?P.req.limit:1/0)>=w.limit&&(!w.values||P.req.values)&&Wi(P.req.query.range,w.query.range)}),!1,k,O];case"count":return S=O.find(function(P){return Vr(P.req.query.range,w.query.range)}),[S,!!S,k,O]}}(t,n,"query",a),g=v[0],c=v[1],_=v[2],p=v[3];return g&&c?g.obsSet=a.obsSet:(c=r.query(a).then(function(m){var b=m.result;if(g&&(g.res=b),o){for(var y=0,w=b.length;y<w;++y)Object.freeze(b[y]);Object.freeze(b)}else m.result=je(b);return m}).catch(function(m){return p&&g&&me(p,g),Promise.reject(m)}),g={obsSet:a.obsSet,promise:c,subscribers:new Set,type:"query",req:a,dirty:!1},p?p.push(g):(p=[g],(_=_||(nt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=p)),Xi(g,p,u,h),g.promise.then(function(m){return{result:Gr(m.result,a,_==null?void 0:_.optimisticOps,r,g,o)}})}})}})}};function ln(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var Me=(fe.prototype.version=function(e){if(isNaN(e)||e<.1)throw new T.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(qi),n.stores({}),this._state.autoSchema=!1,n)},fe.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||F.letThrough||this._vip)?e():new M(function(n,r){if(t._state.openComplete)return r(new T.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new T.DatabaseClosed);t.open().catch(ie)}t._state.dbReadyPromise.then(n,r)}).then(e)},fe.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:i}),e.sort(function(a,o){return a.level-o.level}),this},fe.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},fe.prototype.open=function(){var e=this;return $e(Ne,function(){return Ui(e)})},fe.prototype._close=function(){var e=this._state,t=vt.indexOf(this);if(0<=t&&vt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new M(function(n){e.dbReadyResolve=n}),e.openCanceller=new M(function(n,r){e.cancelOpen=r}))},fe.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new T.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new T.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},fe.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new M(function(i,a){function o(){t.close(e);var u=t._deps.indexedDB.deleteDatabase(t.name);u.onsuccess=ue(function(){var h,v,g;h=t._deps,v=t.name,g=h.indexedDB,h=h.IDBKeyRange,Vn(g)||v===Xt||Gn(g,h).delete(v).catch(ie),i()}),u.onerror=De(a),u.onblocked=t._fireOnBlocked}if(n)throw new T.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},fe.prototype.backendDB=function(){return this.idbdb},fe.prototype.isOpen=function(){return this.idbdb!==null},fe.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},fe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},fe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(fe.prototype,"tables",{get:function(){var e=this;return C(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),fe.prototype.transaction=function(){var e=(function(t,n,r){var i=arguments.length;if(i<2)throw new T.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];return r=a.pop(),[t,ct(a),r]}).apply(this,arguments);return this._transaction.apply(this,e)},fe.prototype._transaction=function(e,t,n){var r=this,i=F.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);var a,o,u=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(o=t.map(function(v){if(v=v instanceof r.Table?v.name:v,typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),e=="r"||e===Kn)a=Kn;else{if(e!="rw"&&e!=Mn)throw new T.InvalidArgument("Invalid transaction mode: "+e);a=Mn}if(i){if(i.mode===Kn&&a===Mn){if(!u)throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach(function(v){if(i&&i.storeNames.indexOf(v)===-1){if(!u)throw new T.SubTransaction("Table "+v+" not included in parent transaction.");i=null}}),u&&i&&!i.active&&(i=null)}}catch(v){return i?i._promise(null,function(g,c){c(v)}):le(v)}var h=(function v(g,c,_,p,m){return M.resolve().then(function(){var b=F.transless||F,y=g._createTransaction(c,_,g._dbSchema,p);if(y.explicit=!0,b={trans:y,transless:b},p)y.idbtrans=p.idbtrans;else try{y.create(),y.idbtrans._explicit=!0,g._state.PR1398_maxLoop=3}catch(O){return O.name===kn.InvalidState&&g.isOpen()&&0<--g._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),g.close({disableAutoOpen:!1}),g.open().then(function(){return v(g,c,_,null,m)})):le(O)}var w,k=ft(m);return k&&pt(),b=M.follow(function(){var O;(w=m.call(y,y))&&(k?(O=He.bind(null,null),w.then(O,O)):typeof w.next=="function"&&typeof w.throw=="function"&&(w=$n(w)))},b),(w&&typeof w.then=="function"?M.resolve(w).then(function(O){return y.active?O:le(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):b.then(function(){return w})).then(function(O){return p&&y._resolve(),y._completion.then(function(){return O})}).catch(function(O){return y._reject(O),le(O)})})}).bind(null,this,a,o,i,n);return i?i._promise(a,h,"lock"):F.trans?$e(F.transless,function(){return r._whenReady(h)}):this._whenReady(h)},fe.prototype.table=function(e){if(!U(this._allTables,e))throw new T.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},fe);function fe(e,t){var n=this;this._middlewares={},this.verno=0;var r=fe.dependencies;this._options=t=s({addons:fe.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,o,u,h,v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ie,dbReadyPromise:null,cancelOpen:ie,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};v.dbReadyPromise=new M(function(c){v.dbReadyResolve=c}),v.openCanceller=new M(function(c,_){v.cancelOpen=_}),this._state=v,this.name=e,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[An,ie]}),this.on.ready.subscribe=te(this.on.ready.subscribe,function(c){return function(_,p){fe.vip(function(){var m,b=n._state;b.openComplete?(b.dbOpenError||M.resolve().then(_),p&&c(_)):b.onReadyBeingFired?(b.onReadyBeingFired.push(_),p&&c(_)):(c(_),m=n,p||c(function y(){m.on.ready.unsubscribe(_),m.on.ready.unsubscribe(y)}))})}}),this.Collection=(i=this,Pt(Ri.prototype,function(w,y){this.db=i;var p=kr,m=null;if(y)try{p=y()}catch(k){m=k}var b=w._ctx,y=b.table,w=y.hook.reading.fire;this._ctx={table:y,index:b.index,isPrimKey:!b.index||y.schema.primKey.keyPath&&b.index===y.schema.primKey.name,range:p,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:b.or,valueMapper:w!==xt?w:null}})),this.Table=(a=this,Pt(Cr.prototype,function(c,_,p){this.db=a,this._tx=p,this.name=c,this.schema=_,this.hook=a._allTables[c]?a._allTables[c].hook:Ct(null,{creating:[xi,ie],reading:[wi,xt],updating:[Ai,ie],deleting:[ki,ie]})})),this.Transaction=(o=this,Pt(Mi.prototype,function(c,_,p,m,b){var y=this;this.db=o,this.mode=c,this.storeNames=_,this.schema=p,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=b||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(w,k){y._resolve=w,y._reject=k}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(w){var k=y.active;return y.active=!1,y.on.error.fire(w),y.parent?y.parent._reject(w):k&&y.idbtrans&&y.idbtrans.abort(),le(w)})})),this.Version=(u=this,Pt(Ni.prototype,function(c){this.db=u,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(h=this,Pt(jr.prototype,function(c,_,p){if(this.db=h,this._ctx={table:c,index:_===":id"?null:_,or:p},this._cmp=this._ascending=Z,this._descending=function(m,b){return Z(b,m)},this._max=function(m,b){return 0<Z(m,b)?m:b},this._min=function(m,b){return Z(m,b)<0?m:b},this._IDBKeyRange=h._deps.IDBKeyRange,!this._IDBKeyRange)throw new T.MissingAPI})),this.on("versionchange",function(c){0<c.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(c){!c.newVersion||c.newVersion<c.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(c.oldVersion/10))}),this._maxKey=jt(t.IDBKeyRange),this._createTransaction=function(c,_,p,m){return new n.Transaction(c,_,p,n._options.chromeTransactionDurability,m)},this._fireOnBlocked=function(c){n.on("blocked").fire(c),vt.filter(function(_){return _.name===n.name&&_!==n&&!_._state.vcFired}).map(function(_){return _.on("versionchange").fire(c)})},this.use(Gi),this.use(Qi),this.use(Vi),this.use(Hi),this.use(zi);var g=new Proxy(this,{get:function(c,_,p){if(_==="_vip")return!0;if(_==="table")return function(b){return ln(n.table(b),g)};var m=Reflect.get(c,_,p);return m instanceof Cr?ln(m,g):_==="tables"?m.map(function(b){return ln(b,g)}):_==="_createTransaction"?function(){return ln(m.apply(this,arguments),g)}:m}});this.vip=g,r.forEach(function(c){return c(n)})}var fn,Ce=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Yi=(rr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},rr.prototype[Ce]=function(){return this},rr);function rr(e){this._subscribe=e}try{fn={indexedDB:A.indexedDB||A.mozIndexedDB||A.webkitIndexedDB||A.msIndexedDB,IDBKeyRange:A.IDBKeyRange||A.webkitIDBKeyRange}}catch{fn={indexedDB:null,IDBKeyRange:null}}function Wr(e){var t,n=!1,r=new Yi(function(i){var a=ft(e),o,u=!1,h={},v={},g={get closed(){return u},unsubscribe:function(){u||(u=!0,o&&o.abort(),c&&Ve.storagemutated.unsubscribe(p))}};i.start&&i.start(g);var c=!1,_=function(){return jn(m)},p=function(b){sn(h,b),Qn(v,h)&&_()},m=function(){var b,y,w;!u&&fn.indexedDB&&(h={},b={},o&&o.abort(),o=new AbortController,w=function(k){var O=dt();try{a&&pt();var S=Ue(e,k);return S=a?S.finally(He):S}finally{O&&ht()}}(y={subscr:b,signal:o.signal,requery:_,querier:e,trans:null}),Promise.resolve(w).then(function(k){n=!0,t=k,u||y.signal.aborted||(h={},function(O){for(var S in O)if(U(O,S))return;return 1}(v=b)||c||(Ve(Rt,p),c=!0),jn(function(){return!u&&i.next&&i.next(k)}))},function(k){n=!1,["DatabaseClosedError","AbortError"].includes(k==null?void 0:k.name)||u||jn(function(){u||i.error&&i.error(k)})}))};return setTimeout(_,0),g});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var rt=Me;function ir(e){var t=We;try{We=!0,Ve.storagemutated.fire(e),Jn(e,!0)}finally{We=t}}J(rt,s(s({},Tt),{delete:function(e){return new rt(e,{addons:[]}).delete()},exists:function(e){return new rt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=rt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Vn(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Xt})}):Gn(n,t).toCollection().primaryKeys()).then(e)}catch{return le(new T.MissingAPI)}var t,n},defineClass:function(){return function(e){L(this,e)}},ignoreTransaction:function(e){return F.trans?$e(F.transless,e):e()},vip:Wn,async:function(e){return function(){try{var t=$n(e.apply(this,arguments));return t&&typeof t.then=="function"?t:M.resolve(t)}catch(n){return le(n)}}},spawn:function(e,t,n){try{var r=$n(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:M.resolve(r)}catch(i){return le(i)}},currentTransaction:{get:function(){return F.trans||null}},waitFor:function(e,t){return t=M.resolve(typeof e=="function"?rt.ignoreTransaction(e):e).timeout(t||6e4),F.trans?F.trans.waitFor(t):t},Promise:M,debug:{get:function(){return Ee},set:function(e){yr(e)}},derive:ne,extend:L,props:J,override:te,Events:Ct,on:Ve,liveQuery:Wr,extendObservabilitySet:sn,getByKeyPath:Y,setByKeyPath:H,delByKeyPath:function(e,t){typeof t=="string"?H(e,t,void 0):"length"in t&&[].map.call(t,function(n){H(e,n,void 0)})},shallowClone:re,deepClone:je,getObjectDiff:er,cmp:Z,asap:ve,minKey:-1/0,addons:[],connections:vt,errnames:kn,dependencies:fn,cache:nt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),rt.maxKey=jt(rt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ve(Rt,function(e){We||(e=new CustomEvent(qn,{detail:e}),We=!0,dispatchEvent(e),We=!1)}),addEventListener(qn,function(e){e=e.detail,We||ir(e)}));var gt,We=!1,Xr=function(){};return typeof BroadcastChannel<"u"&&((Xr=function(){(gt=new BroadcastChannel(qn)).onmessage=function(e){return e.data&&ir(e.data)}})(),typeof gt.unref=="function"&&gt.unref(),Ve(Rt,function(e){We||gt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Me.disableBfCache&&e.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),gt!=null&&gt.close();for(var t=0,n=vt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Me.disableBfCache&&e.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Xr(),ir({all:new ge(-1/0,[[]])}))})),M.rejectionMapper=function(e,t){return!e||e instanceof qe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!vr[e.name]?e:(t=new vr[e.name](t||e.message,e),"stack"in e&&q(t,"stack",{get:function(){return this.inner.stack}}),t)},yr(Ee),s(Me,Object.freeze({__proto__:null,Dexie:Me,liveQuery:Wr,Entity:Ar,cmp:Z,PropModification:Et,replacePrefix:function(e,t){return new Et({replacePrefix:[e,t]})},add:function(e){return new Et({add:e})},remove:function(e){return new Et({remove:e})},default:Me,RangeSet:ge,mergeRanges:Bt,rangesOverlap:Fr}),{default:Me}),Me})})(bi);var eo=bi.exports;const pr=$a(eo),si=Symbol.for("Dexie"),_n=globalThis[si]||(globalThis[si]=pr);if(pr.semVer!==_n.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pr.semVer} and ${_n.semVer}`);const{liveQuery:fo,mergeRanges:ho,rangesOverlap:po,RangeSet:vo,cmp:yo,Entity:mo,PropModification:go,replacePrefix:bo,add:_o,remove:wo}=_n;function xo(){const d=ut("snackbar"),l=ut("qrButtonClick"),f=ut("uploadButtonClick"),s=ut("downloadButtonClick"),x=ut("title");return{snackbar:d,qrButtonClick:l,uploadButtonClick:f,downloadButtonClick:s,title:x}}const to="1yI5jxYxfCLxibPrqLVBAe9kpX4e9nWNGTMGqtU00GUAfqsocqLnH78uL8ouiEhX";async function ko(d,l=!1){d.startsWith("/")||(d="/"+d);const f=`https://www.thebluealliance.com/api/v3${d}`,s={"X-TBA-Auth-Key":to};if(!l){const I=await wn.eTagResponses.where("url").equals(d).first();I&&(s["If-None-Match"]=I.etag)}console.debug(`Requesting TBA @ ${f}`);const x=await fetch(f,{headers:s});if(x.status===304)return console.debug("Not Modified; not attempting to read data"),!1;const A=x.headers.get("ETag"),C=x.json();return A&&await wn.eTagResponses.put({etag:A,url:d}),C}const Ao=Oa("navigator"in globalThis&&"onLine"in navigator?navigator.onLine:!1,d=>{"addEventListener"in globalThis?(addEventListener("online",l=>{console.log("Online event",l),d(!0)}),addEventListener("offline",l=>{console.log("Offline event",l),d(!1)})):console.warn("Was unable to add an event listener for deviceOnline. If you see this warning while building/deploying sveltekit or in the nodejs console, everything should be ok, but if you see this in the browser console then the app will not be able to be reactive to the device going online/offline.")});function Oo(d){if(!d)return"";switch(d.comp_level){case"qm":return`Qualifying Match ${String(d.match_number).padStart(2,"0")}`;case"qf":return`Quarterfinal ${d.set_number} Match ${d.match_number}`;case"sf":return`Semifinal ${d.set_number} Match ${d.match_number}`;case"f":return`Final ${d.set_number} Match ${d.match_number}`;default:return""}}const wn=new _n("AEMDashboard");wn.version(8).stores({csv2024:"[eventkey+role+matchNum], [eventkey+teamNum]",csv2025:"[eventkey+role+matchNum], [eventkey+teamNum]",events:"key, year",matches:"key, event_key, [event_key+match_number]",eTagResponses:"&url",current_event:"key",authenticated:"++"});"window"in globalThis&&(window.db=wn);export{lo as B,ja as M,Ya as R,Ha as S,Ra as _,It as a,oo as b,Ta as c,wn as d,so as e,La as f,xo as g,sr as h,uo as i,co as j,ur as k,fo as l,Oo as m,Na as n,hn as o,Ba as p,dr as q,ao as r,fr as s,ko as t,Be as u,qa as v,Ea as w,Ao as x};
