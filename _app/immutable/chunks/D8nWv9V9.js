import{f as Yi,i as Ji,g as $i,j as ea,d as ta,k as na,n as ra,p as ia,q as aa,o as oa,c as bt,a as Ie,v as sa,t as ui}from"./CRSh-WWB.js";import{A as ci,ag as li,J as fi,e as gn,W as di,y as Pe,F as yn,z as Qr,aM as cr,Z as ua,_ as ca,E as bn,D as Zr,Q as la,K as fa,I as da,ah as ha,q as pa,ai as va,w as ya,aN as ma,af as ga,aO as ba,aP as _a,aQ as wa,p as hi,f as st,a as pi,c as xa,r as ka,t as or,g as at,j as ot,h as ut,l as Aa,i as Yr,s as Jr,aR as Sa}from"./DoN0iJJ0.js";import{a as xe,i as lr,b as mn,r as vi,p as $r,c as Oa,s as Ca}from"./BD2kLoV-.js";function fr(d,f,...u){var s=d,x=gn,b;ci(()=>{x!==(x=f())&&(b&&(di(b),b=null),b=fi(()=>x(s,...u)))},li),Pe&&(s=yn)}function ei(d,f,u,s,x,b){let C=Pe;Pe&&Qr();var I,T,B=null;Pe&&yn.nodeType===1&&(B=yn,Qr());var Q=Pe?yn:d,U;ci(()=>{const $=f()||null;var oe=$==="svg"?cr:null;$!==I&&(U&&($===null?fa(U,()=>{U=null,T=null}):$===T?da(U):di(U)),$&&$!==T&&(U=fi(()=>{if(B=Pe?B:oe?document.createElementNS(oe,$):document.createElement($),Yi(B,B),s){Pe&&Ji($)&&B.append(document.createComment(""));var L=Pe?ua(B):B.appendChild(ca());Pe&&(L===null?bn(!1):Zr(L)),s(B,L)}la.nodes_end=B,Q.before(B)})),I=$,I&&(T=I))},li),C&&(bn(!0),Zr(Q))}function sr(d,f,u){ha(()=>{var s=pa(()=>f(d,u==null?void 0:u())||{});if(u&&(s!=null&&s.update)){var x=!1,b={};va(()=>{var C=u();ya(C),x&&ma(b,C)&&(b=C,s.update(C))}),x=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function yi(d){var f,u,s="";if(typeof d=="string"||typeof d=="number")s+=d;else if(typeof d=="object")if(Array.isArray(d)){var x=d.length;for(f=0;f<x;f++)d[f]&&(u=yi(d[f]))&&(s&&(s+=" "),s+=u)}else for(u in d)d[u]&&(s&&(s+=" "),s+=u);return s}function Pa(){for(var d,f,u=0,s="",x=arguments.length;u<x;u++)(d=arguments[u])&&(f=yi(d))&&(s&&(s+=" "),s+=f);return s}function Ea(d){return typeof d=="object"?Pa(d):d??""}function ao(d){if(Pe){var f=!1,u=()=>{if(!f){if(f=!0,d.hasAttribute("value")){var s=d.value;dr(d,"value",null),d.value=s}if(d.hasAttribute("checked")){var x=d.checked;dr(d,"checked",null),d.checked=x}}};d.__on_r=u,wa(u),aa()}}function Da(d,f){f?d.hasAttribute("selected")||d.setAttribute("selected",""):d.removeAttribute("selected")}function dr(d,f,u,s){var x=d.__attributes??(d.__attributes={});Pe&&(x[f]=d.getAttribute(f),f==="src"||f==="srcset"||f==="href"&&d.nodeName==="LINK")||x[f]!==(x[f]=u)&&(f==="style"&&"__styles"in d&&(d.__styles={}),f==="loading"&&(d[ba]=u),u==null?d.removeAttribute(f):typeof u!="string"&&mi(d).includes(f)?d[f]=u:d.setAttribute(f,u))}function ur(d,f,u,s,x=!1,b=!1,C=!1){let I=Pe&&b;I&&bn(!1);var T=f||{},B=d.tagName==="OPTION";for(var Q in f)Q in u||(u[Q]=null);u.class&&(u.class=Ea(u.class));var U=mi(d),$=d.__attributes??(d.__attributes={});for(const H in u){let ne=u[H];if(B&&H==="value"&&ne==null){d.value=d.__value="",T[H]=ne;continue}var oe=T[H];if(ne!==oe){T[H]=ne;var L=H[0]+H[1];if(L!=="$$"){if(L==="on"){const Z={},ve="$$"+H;let Y=H.slice(2);var re=ia(Y);if($i(Y)&&(Y=Y.slice(0,-7),Z.capture=!0),!re&&oe){if(ne!=null)continue;d.removeEventListener(Y,T[ve],Z),T[ve]=null}if(ne!=null)if(re)d[`__${Y}`]=ne,ta([Y]);else{let z=function(ie){T[H].call(this,ie)};T[ve]=ea(Y,d,z,Z)}else re&&(d[`__${Y}`]=void 0)}else if(H==="style"&&ne!=null)d.style.cssText=ne+"";else if(H==="autofocus")na(d,!!ne);else if(!b&&(H==="__value"||H==="value"&&ne!=null))d.value=d.__value=ne;else if(H==="selected"&&B)Da(d,ne);else{var te=H;x||(te=ra(te));var ce=te==="defaultValue"||te==="defaultChecked";if(ne==null&&!b&&!ce)if($[H]=null,te==="value"||te==="checked"){let Z=d;const ve=f===void 0;if(te==="value"){let Y=Z.defaultValue;Z.removeAttribute(te),Z.defaultValue=Y,Z.value=Z.__value=ve?Y:null}else{let Y=Z.defaultChecked;Z.removeAttribute(te),Z.defaultChecked=Y,Z.checked=ve?Y:!1}}else d.removeAttribute(H);else ce||U.includes(te)&&(b||typeof ne!="string")?d[te]=ne:typeof ne!="function"&&dr(d,te,ne)}H==="style"&&"__styles"in d&&(d.__styles={})}}}return I&&bn(!0),T}var ti=new Map;function mi(d){var f=ti.get(d.nodeName);if(f)return f;ti.set(d.nodeName,f=[]);for(var u,s=d,x=Element.prototype;x!==s;){u=_a(s);for(var b in u)u[b].set&&f.push(b);s=ga(s)}return f}var hr=function(d,f){return hr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var x in s)Object.prototype.hasOwnProperty.call(s,x)&&(u[x]=s[x])},hr(d,f)};function Ra(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");hr(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}var It=function(){return It=Object.assign||function(f){for(var u,s=1,x=arguments.length;s<x;s++){u=arguments[s];for(var b in u)Object.prototype.hasOwnProperty.call(u,b)&&(f[b]=u[b])}return f},It.apply(this,arguments)};function oo(d,f,u,s){function x(b){return b instanceof u?b:new u(function(C){C(b)})}return new(u||(u=Promise))(function(b,C){function I(Q){try{B(s.next(Q))}catch(U){C(U)}}function T(Q){try{B(s.throw(Q))}catch(U){C(U)}}function B(Q){Q.done?b(Q.value):x(Q.value).then(I,T)}B((s=s.apply(d,f||[])).next())})}function so(d,f){var u={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},s,x,b,C=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return C.next=I(0),C.throw=I(1),C.return=I(2),typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function I(B){return function(Q){return T([B,Q])}}function T(B){if(s)throw new TypeError("Generator is already executing.");for(;C&&(C=0,B[0]&&(u=0)),u;)try{if(s=1,x&&(b=B[0]&2?x.return:B[0]?x.throw||((b=x.return)&&b.call(x),0):x.next)&&!(b=b.call(x,B[1])).done)return b;switch(x=0,b&&(B=[B[0]&2,b.value]),B[0]){case 0:case 1:b=B;break;case 4:return u.label++,{value:B[1],done:!1};case 5:u.label++,x=B[1],B=[0];continue;case 7:B=u.ops.pop(),u.trys.pop();continue;default:if(b=u.trys,!(b=b.length>0&&b[b.length-1])&&(B[0]===6||B[0]===2)){u=0;continue}if(B[0]===3&&(!b||B[1]>b[0]&&B[1]<b[3])){u.label=B[1];break}if(B[0]===6&&u.label<b[1]){u.label=b[1],b=B;break}if(b&&u.label<b[2]){u.label=b[2],u.ops.push(B);break}b[2]&&u.ops.pop(),u.trys.pop();continue}B=f.call(d,u)}catch(Q){B=[6,Q],x=0}finally{s=b=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}}function hn(d){var f=typeof Symbol=="function"&&Symbol.iterator,u=f&&d[f],s=0;if(u)return u.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&s>=d.length&&(d=void 0),{value:d&&d[s++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")}function uo(d,f){var u=typeof Symbol=="function"&&d[Symbol.iterator];if(!u)return d;var s=u.call(d),x,b=[],C;try{for(;(f===void 0||f-- >0)&&!(x=s.next()).done;)b.push(x.value)}catch(I){C={error:I}}finally{try{x&&!x.done&&(u=s.return)&&u.call(s)}finally{if(C)throw C.error}}return b}function co(d,f,u){if(u||arguments.length===2)for(var s=0,x=f.length,b;s<x;s++)(b||!(s in f))&&(b||(b=Array.prototype.slice.call(f,0,s)),b[s]=f[s]);return d.concat(b||Array.prototype.slice.call(f))}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ja=function(){function d(f){f===void 0&&(f={}),this.adapter=f}return Object.defineProperty(d,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(d,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(d,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(d,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),d.prototype.init=function(){},d.prototype.destroy=function(){},d}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ka(d,f){if(d.closest)return d.closest(f);for(var u=d;u;){if(gi(u,f))return u;u=u.parentElement}return null}function gi(d,f){var u=d.matches||d.webkitMatchesSelector||d.msMatchesSelector;return u.call(d,f)}function Ma(d){var f=d;if(f.offsetParent!==null)return f.scrollWidth;var u=f.cloneNode(!0);u.style.setProperty("position","absolute"),u.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(u);var s=u.scrollWidth;return document.documentElement.removeChild(u),s}const Ba=Object.freeze(Object.defineProperty({__proto__:null,closest:Ka,estimateScrollWidth:Ma,matches:gi},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ia(d){return d===void 0&&(d=window),Fa(d)?{passive:!0}:!1}function Fa(d){d===void 0&&(d=window);var f=!1;try{var u={get passive(){return f=!0,!1}},s=function(){};d.document.addEventListener("test",s,u),d.document.removeEventListener("test",s,u)}catch{f=!1}return f}const qa=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:Ia},Symbol.toStringTag,{value:"Module"}));function Ta(d){return Object.entries(d).filter(([f,u])=>f!==""&&u).map(([f])=>f).join(" ")}function La(d,f,u,s={bubbles:!0}){if(typeof Event>"u")throw new Error("Event not defined.");if(!d)throw new Error("Tried to dispatch event without element.");const x=new CustomEvent(f,Object.assign(Object.assign({},s),{detail:u}));return d==null||d.dispatchEvent(x),x}function lo(d,f){let u=Object.getOwnPropertyNames(d);const s={};for(let x=0;x<u.length;x++){const b=u[x],C=b.indexOf("$");C!==-1&&f.indexOf(b.substring(0,C+1))!==-1||f.indexOf(b)===-1&&(s[b]=d[b])}return s}function fo(d,f){let u=Object.getOwnPropertyNames(d);const s={};for(let x=0;x<u.length;x++){const b=u[x];b.substring(0,f.length)===f&&(s[b.substring(f.length)]=d[b])}return s}class Na{constructor(){this.elementMap=new Map}on(f,u,s,x){this.elementMap.has(f)||this.elementMap.set(f,{});const b=this.elementMap.get(f);if(b==null)throw new Error("Event map couldn't be created.");u in b||(b[u]=new Map),b[u].set(s,oa(f,u,s,x))}off(f,u,s){const x=this.elementMap.get(f);if(x==null||!(u in x))return;const b=x[u],C=b.get(s);C!=null&&(C(),b.delete(s),b.size===0&&(delete x[u],Object.keys(x).length===0&&this.elementMap.delete(f)))}clear(){this.elementMap.forEach((f,u)=>{for(let[s,x]of Object.entries(f))x.forEach((b,C)=>{b()})}),this.elementMap.clear()}}function Be(d,f){let u=[];if(f)for(let s=0;s<f.length;s++){const x=f[s],b=Array.isArray(x)?x[0]:x;Array.isArray(x)&&x.length>1?u.push(b(d,x[1])):u.push(b(d))}return{update(s){if((s&&s.length||0)!=u.length)throw new Error("You must not change the length of an actions array.");if(s)for(let x=0;x<s.length;x++){const b=u[x];if(b&&b.update){const C=s[x];Array.isArray(C)&&C.length>1?b.update(C[1]):b.update()}}},destroy(){for(let s=0;s<u.length;s++){const x=u[s];x&&x.destroy&&x.destroy()}}}}var Ua=sa("<svg><!></svg>");function Ha(d,f){hi(f,!0);let u=xe(f,"use",19,()=>[]),s=xe(f,"tag",3,"div"),x=vi(f,["$$slots","$$events","$$legacy","use","tag","children"]);const b=ot(()=>["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(s())>-1);let C;function I(){return C}var T=bt(),B=st(T);{var Q=$=>{var oe=Ua();let L;var re=xa(oe);fr(re,()=>f.children??gn),ka(oe),mn(oe,te=>C=te,()=>C),sr(oe,(te,ce)=>Be==null?void 0:Be(te,ce),u),or(()=>L=ur(oe,L,{...x},void 0,!0)),Ie($,oe)},U=$=>{var oe=bt(),L=st(oe);{var re=ce=>{var H=bt(),ne=st(H);ei(ne,s,!1,(Z,ve)=>{mn(Z,z=>C=z,()=>C),sr(Z,(z,ie)=>Be==null?void 0:Be(z,ie),u);let Y;or(()=>Y=ur(Z,Y,{...x},void 0,Z.namespaceURI===cr,Z.nodeName.includes("-")))}),Ie(ce,H)},te=ce=>{var H=bt(),ne=st(H);ei(ne,s,!1,(Z,ve)=>{mn(Z,ye=>C=ye,()=>C),sr(Z,(ye,ct)=>Be==null?void 0:Be(ye,ct),u);let Y;or(()=>Y=ur(Z,Y,{...x},void 0,Z.namespaceURI===cr,Z.nodeName.includes("-")));var z=bt(),ie=st(z);fr(ie,()=>f.children??gn),Ie(ve,z)}),Ie(ce,H)};lr(L,ce=>{at(b)?ce(re):ce(te,!1)},!0)}Ie($,oe)};lr(B,$=>{s()==="svg"?$(Q):$(U,!1)})}return Ie(d,T),pi({getElement:I})}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var za={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Ga={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},ni={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},pn;function Va(d,f){f===void 0&&(f=!1);var u=d.CSS,s=pn;if(typeof pn=="boolean"&&!f)return pn;var x=u&&typeof u.supports=="function";if(!x)return!1;var b=u.supports("--css-vars","yes"),C=u.supports("(--css-vars: yes)")&&u.supports("color","#00000000");return s=b||C,f||(pn=s),s}function Wa(d,f,u){if(!d)return{x:0,y:0};var s=f.x,x=f.y,b=s+u.left,C=x+u.top,I,T;if(d.type==="touchstart"){var B=d;I=B.changedTouches[0].pageX-b,T=B.changedTouches[0].pageY-C}else{var Q=d;I=Q.pageX-b,T=Q.pageY-C}return{x:I,y:T}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ri=["touchstart","pointerdown","mousedown","keydown"],ii=["touchend","pointerup","mouseup","contextmenu"],vn=[],Xa=function(d){Ra(f,d);function f(u){var s=d.call(this,It(It({},f.defaultAdapter),u))||this;return s.activationAnimationHasEnded=!1,s.activationTimer=0,s.fgDeactivationRemovalTimer=0,s.fgScale="0",s.frame={width:0,height:0},s.initialSize=0,s.layoutFrame=0,s.maxRadius=0,s.unboundedCoords={left:0,top:0},s.activationState=s.defaultActivationState(),s.activationTimerCallback=function(){s.activationAnimationHasEnded=!0,s.runDeactivationUXLogicIfReady()},s.activateHandler=function(x){s.activateImpl(x)},s.deactivateHandler=function(){s.deactivateImpl()},s.focusHandler=function(){s.handleFocus()},s.blurHandler=function(){s.handleBlur()},s.resizeHandler=function(){s.layout()},s}return Object.defineProperty(f,"cssClasses",{get:function(){return za},enumerable:!1,configurable:!0}),Object.defineProperty(f,"strings",{get:function(){return Ga},enumerable:!1,configurable:!0}),Object.defineProperty(f,"numbers",{get:function(){return ni},enumerable:!1,configurable:!0}),Object.defineProperty(f,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),f.prototype.init=function(){var u=this,s=this.supportsPressRipple();if(this.registerRootHandlers(s),s){var x=f.cssClasses,b=x.ROOT,C=x.UNBOUNDED;requestAnimationFrame(function(){u.adapter.addClass(b),u.adapter.isUnbounded()&&(u.adapter.addClass(C),u.layoutInternal())})}},f.prototype.destroy=function(){var u=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(f.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(f.cssClasses.FG_DEACTIVATION));var s=f.cssClasses,x=s.ROOT,b=s.UNBOUNDED;requestAnimationFrame(function(){u.adapter.removeClass(x),u.adapter.removeClass(b),u.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},f.prototype.activate=function(u){this.activateImpl(u)},f.prototype.deactivate=function(){this.deactivateImpl()},f.prototype.layout=function(){var u=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){u.layoutInternal(),u.layoutFrame=0})},f.prototype.setUnbounded=function(u){var s=f.cssClasses.UNBOUNDED;u?this.adapter.addClass(s):this.adapter.removeClass(s)},f.prototype.handleFocus=function(){var u=this;requestAnimationFrame(function(){return u.adapter.addClass(f.cssClasses.BG_FOCUSED)})},f.prototype.handleBlur=function(){var u=this;requestAnimationFrame(function(){return u.adapter.removeClass(f.cssClasses.BG_FOCUSED)})},f.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},f.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},f.prototype.registerRootHandlers=function(u){var s,x;if(u){try{for(var b=hn(ri),C=b.next();!C.done;C=b.next()){var I=C.value;this.adapter.registerInteractionHandler(I,this.activateHandler)}}catch(T){s={error:T}}finally{try{C&&!C.done&&(x=b.return)&&x.call(b)}finally{if(s)throw s.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},f.prototype.registerDeactivationHandlers=function(u){var s,x;if(u.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var b=hn(ii),C=b.next();!C.done;C=b.next()){var I=C.value;this.adapter.registerDocumentInteractionHandler(I,this.deactivateHandler)}}catch(T){s={error:T}}finally{try{C&&!C.done&&(x=b.return)&&x.call(b)}finally{if(s)throw s.error}}},f.prototype.deregisterRootHandlers=function(){var u,s;try{for(var x=hn(ri),b=x.next();!b.done;b=x.next()){var C=b.value;this.adapter.deregisterInteractionHandler(C,this.activateHandler)}}catch(I){u={error:I}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(u)throw u.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},f.prototype.deregisterDeactivationHandlers=function(){var u,s;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var x=hn(ii),b=x.next();!b.done;b=x.next()){var C=b.value;this.adapter.deregisterDocumentInteractionHandler(C,this.deactivateHandler)}}catch(I){u={error:I}}finally{try{b&&!b.done&&(s=x.return)&&s.call(x)}finally{if(u)throw u.error}}},f.prototype.removeCssVars=function(){var u=this,s=f.strings,x=Object.keys(s);x.forEach(function(b){b.indexOf("VAR_")===0&&u.adapter.updateCssVariable(s[b],null)})},f.prototype.activateImpl=function(u){var s=this;if(!this.adapter.isSurfaceDisabled()){var x=this.activationState;if(!x.isActivated){var b=this.previousActivationEvent,C=b&&u!==void 0&&b.type!==u.type;if(!C){x.isActivated=!0,x.isProgrammatic=u===void 0,x.activationEvent=u,x.wasActivatedByPointer=x.isProgrammatic?!1:u!==void 0&&(u.type==="mousedown"||u.type==="touchstart"||u.type==="pointerdown");var I=u!==void 0&&vn.length>0&&vn.some(function(T){return s.adapter.containsEventTarget(T)});if(I){this.resetActivationState();return}u!==void 0&&(vn.push(u.target),this.registerDeactivationHandlers(u)),x.wasElementMadeActive=this.checkElementMadeActive(u),x.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){vn=[],!x.wasElementMadeActive&&u!==void 0&&(u.key===" "||u.keyCode===32)&&(x.wasElementMadeActive=s.checkElementMadeActive(u),x.wasElementMadeActive&&s.animateActivation()),x.wasElementMadeActive||(s.activationState=s.defaultActivationState())})}}}},f.prototype.checkElementMadeActive=function(u){return u!==void 0&&u.type==="keydown"?this.adapter.isSurfaceActive():!0},f.prototype.animateActivation=function(){var u=this,s=f.strings,x=s.VAR_FG_TRANSLATE_START,b=s.VAR_FG_TRANSLATE_END,C=f.cssClasses,I=C.FG_DEACTIVATION,T=C.FG_ACTIVATION,B=f.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var Q="",U="";if(!this.adapter.isUnbounded()){var $=this.getFgTranslationCoordinates(),oe=$.startPoint,L=$.endPoint;Q=oe.x+"px, "+oe.y+"px",U=L.x+"px, "+L.y+"px"}this.adapter.updateCssVariable(x,Q),this.adapter.updateCssVariable(b,U),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(I),this.adapter.computeBoundingRect(),this.adapter.addClass(T),this.activationTimer=setTimeout(function(){u.activationTimerCallback()},B)},f.prototype.getFgTranslationCoordinates=function(){var u=this.activationState,s=u.activationEvent,x=u.wasActivatedByPointer,b;x?b=Wa(s,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):b={x:this.frame.width/2,y:this.frame.height/2},b={x:b.x-this.initialSize/2,y:b.y-this.initialSize/2};var C={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:b,endPoint:C}},f.prototype.runDeactivationUXLogicIfReady=function(){var u=this,s=f.cssClasses.FG_DEACTIVATION,x=this.activationState,b=x.hasDeactivationUXRun,C=x.isActivated,I=b||!C;I&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(s),this.fgDeactivationRemovalTimer=setTimeout(function(){u.adapter.removeClass(s)},ni.FG_DEACTIVATION_MS))},f.prototype.rmBoundedActivationClasses=function(){var u=f.cssClasses.FG_ACTIVATION;this.adapter.removeClass(u),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},f.prototype.resetActivationState=function(){var u=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return u.previousActivationEvent=void 0},f.numbers.TAP_DELAY_MS)},f.prototype.deactivateImpl=function(){var u=this,s=this.activationState;if(s.isActivated){var x=It({},s);s.isProgrammatic?(requestAnimationFrame(function(){u.animateDeactivation(x)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){u.activationState.hasDeactivationUXRun=!0,u.animateDeactivation(x),u.resetActivationState()}))}},f.prototype.animateDeactivation=function(u){var s=u.wasActivatedByPointer,x=u.wasElementMadeActive;(s||x)&&this.runDeactivationUXLogicIfReady()},f.prototype.layoutInternal=function(){var u=this;this.frame=this.adapter.computeBoundingRect();var s=Math.max(this.frame.height,this.frame.width),x=function(){var C=Math.sqrt(Math.pow(u.frame.width,2)+Math.pow(u.frame.height,2));return C+f.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?s:x();var b=Math.floor(s*f.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&b%2!==0?this.initialSize=b-1:this.initialSize=b,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},f.prototype.updateLayoutCssVars=function(){var u=f.strings,s=u.VAR_FG_SIZE,x=u.VAR_LEFT,b=u.VAR_TOP,C=u.VAR_FG_SCALE;this.adapter.updateCssVariable(s,this.initialSize+"px"),this.adapter.updateCssVariable(C,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(x,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(b,this.unboundedCoords.top+"px"))},f}(ja);const{applyPassive:ai}=qa,{matches:Qa}=Ba;function Za(d,{ripple:f=!0,surface:u=!1,unbounded:s=!1,disabled:x=!1,color:b,active:C,rippleElement:I,eventTarget:T,activeTarget:B,addClass:Q=L=>d.classList.add(L),removeClass:U=L=>d.classList.remove(L),addStyle:$=(L,re)=>d.style.setProperty(L,re),initPromise:oe=Promise.resolve()}={}){let L,re=new Na,te=ut("SMUI:addLayoutListener"),ce,H=C,ne=T,Z=B;function ve(){u?(Q("mdc-ripple-surface"),b==="primary"?(Q("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary")):b==="secondary"?(U("smui-ripple-surface--primary"),Q("smui-ripple-surface--secondary")):(U("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary"))):(U("mdc-ripple-surface"),U("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary")),L&&H!==C&&(H=C,C?L.activate():C===!1&&L.deactivate()),f&&!L?(L=new Xa({addClass:Q,browserSupportsCssVars:()=>Va(window),computeBoundingRect:()=>(I||d).getBoundingClientRect(),containsEventTarget:z=>d.contains(z),deregisterDocumentInteractionHandler:(z,ie)=>re.off(document.documentElement,z,ie),deregisterInteractionHandler:(z,ie)=>re.off(T||d,z,ie),deregisterResizeHandler:z=>window.removeEventListener("resize",z),getWindowPageOffset:()=>{var z,ie;return{x:(z=window.pageXOffset)!==null&&z!==void 0?z:window.scrollX,y:(ie=window.pageYOffset)!==null&&ie!==void 0?ie:window.scrollY}},isSurfaceActive:()=>C??Qa(B||d,":active"),isSurfaceDisabled:()=>!!x,isUnbounded:()=>!!s,registerDocumentInteractionHandler:(z,ie)=>{const ye=ai();re.on(document.documentElement,z,ie,typeof ye=="boolean"?{capture:ye}:ye)},registerInteractionHandler:(z,ie)=>{const ye=ai();re.on(T||d,z,ie,typeof ye=="boolean"?{capture:ye}:ye)},registerResizeHandler:z=>re.on(window,"resize",z),removeClass:U,updateCssVariable:$}),oe.then(()=>{L&&(L.init(),L.setUnbounded(s))})):L&&!f&&oe.then(()=>{L&&(L.destroy(),L=void 0,re.clear())}),L&&(ne!==T||Z!==B)&&(ne=T,Z=B,L.destroy(),requestAnimationFrame(()=>{L&&(L.init(),L.setUnbounded(s))})),!f&&s&&Q("mdc-ripple-upgraded--unbounded")}ve(),te&&(ce=te(Y));function Y(){L&&L.layout()}return{update(z){({ripple:f,surface:u,unbounded:s,disabled:x,color:b,active:C,rippleElement:I,eventTarget:T,activeTarget:B,addClass:Q,removeClass:U,addStyle:$,initPromise:oe}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:ie=>d.classList.add(ie),removeClass:ie=>d.classList.remove(ie),addStyle:(ie,ye)=>d.style.setProperty(ie,ye),initPromise:Promise.resolve()},z)),ve()},destroy(){L&&(L.destroy(),L=void 0,re.clear(),U("mdc-ripple-surface"),U("smui-ripple-surface--primary"),U("smui-ripple-surface--secondary")),ce&&ce()}}}var Ya=ui('<div class="mdc-button__touch"></div>'),Ja=ui('<div class="mdc-button__ripple"></div> <!><!>',1);function ho(d,f){hi(f,!0);let u=xe(f,"use",19,()=>[]),s=xe(f,"class",3,""),x=xe(f,"style",3,""),b=xe(f,"ripple",3,!0),C=xe(f,"color",3,"primary"),I=xe(f,"variant",3,"text"),T=xe(f,"touch",3,!1),B=xe(f,"action",3,"close"),Q=xe(f,"defaultAction",3,!1),U=xe(f,"secondary",3,!1),$=xe(f,"component",3,Ha),oe=xe(f,"tag",19,()=>f.href==null?"button":"a"),L=vi(f,["$$slots","$$events","$$legacy","use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","tag","children"]),re,te=$r({}),ce=$r({}),H=ut("SMUI:button:context");const ne=ot(()=>H==="dialog:action"&&B()!=null?{"data-mdc-dialog-action":B()}:{action:B()}),Z=ot(()=>H==="dialog:action"&&Q()?{"data-mdc-dialog-button-default":""}:{}),ve=ot(()=>H==="banner"?{}:{secondary:U()});let Y=f.disabled;Aa(()=>{if(Y!==f.disabled){if(re){const de=lt();"blur"in de&&de.blur()}Y=L.disabled}}),Yr("SMUI:label:context","button"),Yr("SMUI:icon:context","button");function z(de){te[de]||(te[de]=!0)}function ie(de){(!(de in te)||te[de])&&(te[de]=!1)}function ye(de,me){ce[de]!=me&&(me===""||me==null?delete ce[de]:ce[de]=me)}function ct(){H==="banner"&&La(lt(),U()?"SMUIBannerButtonSecondaryActionClick":"SMUIBannerButtonPrimaryActionClick")}function lt(){return re.getElement()}var Fe=bt(),je=st(Fe);const xn=ot(()=>[[Za,{ripple:b(),unbounded:!1,color:C(),disabled:!!f.disabled,addClass:z,removeClass:ie,addStyle:ye}],...u()]),_t=ot(()=>Ta({[s()]:!0,"mdc-button":!0,"mdc-button--raised":I()==="raised","mdc-button--unelevated":I()==="unelevated","mdc-button--outlined":I()==="outlined","smui-button--color-secondary":C()==="secondary","mdc-button--touch":T(),"mdc-card__action":H==="card:action","mdc-card__action--button":H==="card:action","mdc-dialog__button":H==="dialog:action","mdc-top-app-bar__navigation-icon":H==="top-app-bar:navigation","mdc-top-app-bar__action-item":H==="top-app-bar:action","mdc-snackbar__action":H==="snackbar:actions","mdc-banner__secondary-action":H==="banner"&&U(),"mdc-banner__primary-action":H==="banner"&&!U(),"mdc-tooltip__action":H==="tooltip:rich-actions",...te})),wt=ot(()=>Object.entries(ce).map(([de,me])=>`${de}: ${me};`).concat([x()]).join(" "));return Oa(je,$,(de,me)=>{mn(me(de,Ca({get tag(){return oe()},get use(){return at(xn)},get class(){return at(_t)},get style(){return at(wt)}},()=>at(ne),()=>at(Z),()=>at(ve),{get href(){return f.href}},()=>L,{onclick:Oe=>{var ke;ct(),(ke=f.onclick)==null||ke.call(f,Oe)},children:(Oe,ke)=>{var ft=Ja(),Ft=Jr(st(ft),2);fr(Ft,()=>f.children??gn);var qe=Jr(Ft);{var qt=Te=>{var Le=Ya();Ie(Te,Le)};lr(qe,Te=>{T()&&Te(qt)})}Ie(Oe,ft)},$$slots:{default:!0}})),Oe=>re=Oe,()=>re)}),Ie(d,Fe),pi({getElement:lt})}var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $a(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var bi={exports:{}};(function(d,f){(function(u,s){d.exports=s()})(oi,function(){var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function x(e,t,n){for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var b=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:oi,C=Object.keys,I=Array.isArray;function T(e,t){return typeof t!="object"||C(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||b.Promise||(b.Promise=Promise);var B=Object.getPrototypeOf,Q={}.hasOwnProperty;function U(e,t){return Q.call(e,t)}function $(e,t){typeof t=="function"&&(t=t(B(e))),(typeof Reflect>"u"?C:Reflect.ownKeys)(t).forEach(function(n){L(e,n,t[n])})}var oe=Object.defineProperty;function L(e,t,n,r){oe(e,t,T(n&&U(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function re(e){return{from:function(t){return e.prototype=Object.create(t.prototype),L(e.prototype,"constructor",e),{extend:$.bind(null,e.prototype)}}}}var te=Object.getOwnPropertyDescriptor,ce=[].slice;function H(e,t,n){return ce.call(e,t,n)}function ne(e,t){return t(e)}function Z(e){if(!e)throw new Error("Assertion Failed")}function ve(e){b.setImmediate?setImmediate(e):setTimeout(e,0)}function Y(e,t){if(typeof t=="string"&&U(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=Y(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var c=e[t.substr(0,o)];return c==null?void 0:Y(c,t.substr(o+1))}}function z(e,t,n){if(e&&t!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Z(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)z(e,t[r],n[r])}else{var a,o,c=t.indexOf(".");c!==-1?(a=t.substr(0,c),(o=t.substr(c+1))===""?n===void 0?I(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:z(c=!(c=e[a])||!U(e,a)?e[a]={}:c,o,n)):n===void 0?I(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ie(e){var t,n={};for(t in e)U(e,t)&&(n[t]=e[t]);return n}var ye=[].concat;function ct(e){return ye.apply([],e)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ct([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return b[e]}),lt=new Set(Qe.map(function(e){return b[e]})),Fe=null;function je(e){return Fe=new WeakMap,e=function t(n){if(!n||typeof n!="object")return n;var r=Fe.get(n);if(r)return r;if(I(n)){r=[],Fe.set(n,r);for(var i=0,a=n.length;i<a;++i)r.push(t(n[i]))}else if(lt.has(n.constructor))r=n;else{var o,c=B(n);for(o in r=c===Object.prototype?{}:Object.create(c),Fe.set(n,r),n)U(n,o)&&(r[o]=t(n[o]))}return r}(e),Fe=null,e}var xn={}.toString;function _t(e){return xn.call(e).slice(8,-1)}var wt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",de=typeof wt=="symbol"?function(e){var t;return e!=null&&(t=e[wt])&&t.apply(e)}:function(){return null};function me(e,t){return t=e.indexOf(t),0<=t&&e.splice(t,1),0<=t}var Oe={};function ke(e){var t,n,r,i;if(arguments.length===1){if(I(e))return e.slice();if(this===Oe&&typeof e=="string")return[e];if(i=de(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)!="number")return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var ft=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},At=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ce=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(At),Ft={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qe(e,t){this.name=e,this.message=t}function qt(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Te(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=qt(e,t)}function Le(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=qt(e,this.failures)}re(qe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),re(Te).from(qe),re(Le).from(qe);var kn=Ce.reduce(function(e,t){return e[t]=t+"Error",e},{}),_i=qe,N=Ce.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=Ft[t]||n,this.inner=null)}return re(r).from(_i),e[t]=r,e},{});N.Syntax=SyntaxError,N.Type=TypeError,N.Range=RangeError;var vr=At.reduce(function(e,t){return e[t+"Error"]=N[t],e},{}),Tt=Ce.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=N[t]),e},{});function ae(){}function xt(e){return e}function wi(e,t){return e==null||e===xt?t:function(n){return t(e(n))}}function Xe(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function xi(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Xe(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Xe(i,this.onerror):i),a!==void 0?a:n}}function ki(e,t){return e===ae?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Xe(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Xe(r,this.onerror):r)}}function Ai(e,t){return e===ae?t:function(n){var r=e.apply(this,arguments);T(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Xe(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Xe(a,this.onerror):a),r===void 0?n===void 0?void 0:n:T(r,n)}}function Si(e,t){return e===ae?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function An(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}Tt.ModifyError=Te,Tt.DexieError=qe,Tt.BulkError=Le;var Ee=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yr(e){Ee=e}var kt={},mr=100,Qe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,B(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,B(t),e]}(),At=Qe[0],Ce=Qe[1],Qe=Qe[2],Ce=Ce&&Ce.then,Ze=At&&At.constructor,Sn=!!Qe,St=function(e,t){Ot.push([e,t]),Lt&&(queueMicrotask(Ci),Lt=!1)},On=!0,Lt=!0,Ye=[],Nt=[],Cn=xt,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ae,pgp:!1,env:{},finalize:ae},q=Ne,Ot=[],Je=0,Ut=[];function M(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=q;if(typeof e!="function"){if(e!==kt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&En(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(a){if(r._state===null){if(a===r)throw new TypeError("A promise cannot be resolved with itself.");var o=r._lib&&dt();a&&typeof a.then=="function"?n(r,function(c,h){a instanceof M?a._then(c,h):a.then(c,h)}):(r._state=!0,r._value=a,br(r)),o&&ht()}},En.bind(null,r))}catch(a){En(r,a)}}(this,e)}var Pn={get:function(){var e=q,t=Vt;function n(r,i){var a=this,o=!e.global&&(e!==q||t!==Vt),c=o&&!He(),h=new M(function(v,g){Dn(a,new gr(wr(r,e,o,c),wr(i,e,o,c),v,g,e))});return this._consoleTask&&(h._consoleTask=this._consoleTask),h}return n.prototype=kt,n},set:function(e){L(this,"then",e&&e.prototype===kt?Pn:{get:function(){return e},set:Pn.set})}};function gr(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function En(e,t){var n,r;Nt.push(t),e._state===null&&(n=e._lib&&dt(),t=Cn(t),e._state=!1,e._value=t,r=e,Ye.some(function(i){return i._value===r._value})||Ye.push(r),br(e),n&&ht())}function br(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Dn(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Je===0&&(++Je,St(function(){--Je==0&&Rn()},[]))}function Dn(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Je,St(Oi,[n,e,t])}else e._listeners.push(t)}function Oi(e,t,n){try{var r,i=t._value;!t._state&&Nt.length&&(Nt=[]),r=Ee&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||Nt.indexOf(i)!==-1||function(a){for(var o=Ye.length;o;)if(Ye[--o]._value===a._value)return Ye.splice(o,1)}(t),n.resolve(r)}catch(a){n.reject(a)}finally{--Je==0&&Rn(),--n.psd.ref||n.psd.finalize()}}function Ci(){$e(Ne,function(){dt()&&ht()})}function dt(){var e=On;return Lt=On=!1,e}function ht(){var e,t,n;do for(;0<Ot.length;)for(e=Ot,Ot=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(0<Ot.length);Lt=On=!0}function Rn(){var e=Ye;Ye=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ut.slice(0),n=t.length;n;)t[--n]()}function Ht(e){return new M(kt,!1,e)}function ue(e,t){var n=q;return function(){var r=dt(),i=q;try{return ze(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{ze(i,!1),r&&ht()}}}$(M.prototype,{then:Pn,_then:function(e,t){Dn(this,new gr(null,null,e,t,q))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=e,n=arguments[1];return typeof t=="function"?this.then(null,function(r){return(r instanceof t?n:Ht)(r)}):this.then(null,function(r){return(r&&r.name===t?n:Ht)(r)})},finally:function(e){return this.then(function(t){return M.resolve(e()).then(function(){return t})},function(t){return M.resolve(e()).then(function(){return Ht(t)})})},timeout:function(e,t){var n=this;return e<1/0?new M(function(r,i){var a=setTimeout(function(){return i(new N.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(M.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=_r(),$(M,{all:function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return M.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){return e instanceof M?e:e&&typeof e.then=="function"?new M(function(t,n){e.then(t,n)}):new M(kt,!0,e)},reject:Ht,race:function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t,n){e.map(function(r){return M.resolve(r).then(t,n)})})},PSD:{get:function(){return q},set:function(e){return q=e}},totalEchoes:{get:function(){return Vt}},newPSD:Ue,usePSD:$e,scheduler:{get:function(){return St},set:function(e){St=e}},rejectionMapper:{get:function(){return Cn},set:function(e){Cn=e}},follow:function(e,t){return new M(function(n,r){return Ue(function(i,a){var o=q;o.unhandleds=[],o.onunhandled=a,o.finalize=Xe(function(){var c,h=this;c=function(){h.unhandleds.length===0?i():a(h.unhandleds[0])},Ut.push(function v(){c(),Ut.splice(Ut.indexOf(v),1)}),++Je,St(function(){--Je==0&&Rn()},[])},o.finalize),e()},t,n,r)})}}),Ze&&(Ze.allSettled&&L(M,"allSettled",function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return M.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Ze.any&&typeof AggregateError<"u"&&L(M,"any",function(){var e=ke.apply(null,arguments).map(Wt);return new M(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return M.resolve(a).then(function(c){return t(c)},function(c){i[o]=c,--r||n(new AggregateError(i))})})})}),Ze.withResolvers&&(M.withResolvers=Ze.withResolvers));var he={awaits:0,echoes:0,id:0},Pi=0,zt=[],Gt=0,Vt=0,Ei=0;function Ue(e,t,n,r){var i=q,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++Ei,Ne.env,a.env=Sn?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},t&&T(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=$e(a,e,n,r),a.ref===0&&a.finalize(),r}function pt(){return he.id||(he.id=++Pi),++he.awaits,he.echoes+=mr,he.id}function He(){return!!he.awaits&&(--he.awaits==0&&(he.id=0),he.echoes=he.awaits*mr,!0)}function Wt(e){return he.echoes&&e&&e.constructor===Ze?(pt(),e.then(function(t){return He(),t},function(t){return He(),le(t)})):e}function Di(){var e=zt[zt.length-1];zt.pop(),ze(e,!1)}function ze(e,t){var n,r=q;(t?!he.echoes||Gt++&&e===q:!Gt||--Gt&&e===q)||queueMicrotask(t?(function(i){++Vt,he.echoes&&--he.echoes!=0||(he.echoes=he.awaits=he.id=0),zt.push(q),ze(i,!0)}).bind(null,e):Di),e!==q&&(q=e,r===Ne&&(Ne.env=_r()),Sn&&(n=Ne.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(b,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function _r(){var e=b.Promise;return Sn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(b,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function $e(e,t,n,r,i){var a=q;try{return ze(e,!0),t(n,r,i)}finally{ze(a,!1)}}function wr(e,t,n,r){return typeof e!="function"?e:function(){var i=q;n&&pt(),ze(t,!0);try{return e.apply(this,arguments)}finally{ze(i,!1),r&&queueMicrotask(He)}}}function jn(e){Promise===Ze&&he.echoes===0?Gt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Ce).indexOf("[native code]")===-1&&(pt=He=ae);var le=M.reject,et="￿",Ke="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",xr="String expected.",vt=[],Xt="__dbnames",Kn="readonly",Mn="readwrite";function tt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var kr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Qt(e){return typeof e!="string"||/\./.test(e)?function(t){return t}:function(t){return t[e]===void 0&&e in t&&delete(t=je(t))[e],t}}function Ar(){throw N.Type()}function J(e,t){try{var n=Sr(e),r=Sr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,a){for(var o=i.length,c=a.length,h=o<c?o:c,v=0;v<h;++v)if(i[v]!==a[v])return i[v]<a[v]?-1:1;return o===c?0:o<c?-1:1}(Or(e),Or(t));case"Array":return function(i,a){for(var o=i.length,c=a.length,h=o<c?o:c,v=0;v<h;++v){var g=J(i[v],a[v]);if(g!==0)return g}return o===c?0:o<c?-1:1}(e,t)}}catch{}return NaN}function Sr(e){var t=typeof e;return t!="object"?t:ArrayBuffer.isView(e)?"binary":(e=_t(e),e==="ArrayBuffer"?"binary":e)}function Or(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Cr=(se.prototype._trans=function(e,t,n){var r=this._tx||q.trans,i=this.name,a=Ee&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function o(v,g,l){if(!l.schema[i])throw new N.NotFound("Table "+i+" not part of transaction");return t(l.idbtrans,l)}var c=dt();try{var h=r&&r.db._novip===this.db._novip?r===q.trans?r._promise(e,o,n):Ue(function(){return r._promise(e,o,n)},{trans:r,transless:q.transless||q}):function v(g,l,w,p){if(g.idbdb&&(g._state.openComplete||q.letThrough||g._vip)){var m=g._createTransaction(l,w,g._dbSchema);try{m.create(),g._state.PR1398_maxLoop=3}catch(_){return _.name===kn.InvalidState&&g.isOpen()&&0<--g._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),g.close({disableAutoOpen:!1}),g.open().then(function(){return v(g,l,w,p)})):le(_)}return m._promise(l,function(_,y){return Ue(function(){return q.trans=m,p(_,y,m)})}).then(function(_){if(l==="readwrite")try{m.idbtrans.commit()}catch{}return l==="readonly"?_:m._completion.then(function(){return _})})}if(g._state.openComplete)return le(new N.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return le(new N.DatabaseClosed);g.open().catch(ae)}return g._state.dbReadyPromise.then(function(){return v(g,l,w,p)})}(this.db,e,[this.name],o);return a&&(h._consoleTask=a,h=h.catch(function(v){return console.trace(v),le(v)})),h}finally{c&&ht()}},se.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?le(new N.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},se.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(I(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=C(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(c){if(c.compound&&t.every(function(v){return 0<=c.keyPath.indexOf(v)})){for(var h=0;h<t.length;++h)if(t.indexOf(c.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(c,h){return c.keyPath.length-h.keyPath.length})[0];if(n&&this.db._maxKey!==et){var a=n.keyPath.slice(0,t.length);return this.where(a).equals(a.map(function(h){return e[h]}))}!n&&Ee&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function i(c,h){return J(c,h)===0}var o=t.reduce(function(l,h){var v=l[0],g=l[1],l=r[h],w=e[h];return[v||l,v||!l?tt(g,l&&l.multi?function(p){return p=Y(p,h),I(p)&&p.some(function(m){return i(w,m)})}:function(p){return i(w,Y(p,h))}):g]},[null,null]),a=o[0],o=o[1];return a?this.where(a.name).equals(e[a.keyPath]).filter(o):n?this.filter(o):this.where(t).equals("")},se.prototype.filter=function(e){return this.toCollection().and(e)},se.prototype.count=function(e){return this.toCollection().count(e)},se.prototype.offset=function(e){return this.toCollection().offset(e)},se.prototype.limit=function(e){return this.toCollection().limit(e)},se.prototype.each=function(e){return this.toCollection().each(e)},se.prototype.toArray=function(e){return this.toCollection().toArray(e)},se.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},se.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,I(e)?"[".concat(e.join("+"),"]"):e))},se.prototype.reverse=function(){return this.toCollection().reverse()},se.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return t!==null&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ar&&(function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function g(){this.constructor=h}u(h,v),h.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var a=new Set,o=e.prototype;o;o=B(o))Object.getOwnPropertyNames(o).forEach(function(h){return a.add(h)});function c(h){if(!h)return h;var v,g=Object.create(e.prototype);for(v in h)if(!a.has(v))try{g[v]=h[v]}catch{}return g}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),e},se.prototype.defineClass=function(){return this.mapToClass(function(e){T(this,e)})},se.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=Qt(a)(e)),this._trans("readwrite",function(c){return n.core.mutate({trans:c,type:"add",keys:t!=null?[t]:null,values:[o]})}).then(function(c){return c.numFailures?M.reject(c.failures[0]):c.lastResult}).then(function(c){if(a)try{z(e,a,c)}catch{}return c})},se.prototype.update=function(e,t){return typeof e!="object"||I(e)?this.where(":id").equals(e).modify(t):(e=Y(e,this.schema.primKey.keyPath),e===void 0?le(new N.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t))},se.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=Qt(a)(e)),this._trans("readwrite",function(c){return n.core.mutate({trans:c,type:"put",values:[o],keys:t!=null?[t]:null})}).then(function(c){return c.numFailures?M.reject(c.failures[0]):c.lastResult}).then(function(c){if(a)try{z(e,a,c)}catch{}return c})},se.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?M.reject(n.failures[0]):void 0})},se.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:kr})}).then(function(t){return t.numFailures?M.reject(t.failures[0]):void 0})},se.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},se.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(o){var v=r.schema.primKey,c=v.auto,v=v.keyPath;if(v&&i)throw new N.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,v=v&&c?e.map(Qt(v)):e;return r.core.mutate({trans:o,type:"add",keys:i,values:v,wantResults:a}).then(function(m){var l=m.numFailures,w=m.results,p=m.lastResult,m=m.failures;if(l===0)return a?w:p;throw new Le("".concat(r.name,".bulkAdd(): ").concat(l," of ").concat(h," operations failed"),m)})})},se.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(o){var v=r.schema.primKey,c=v.auto,v=v.keyPath;if(v&&i)throw new N.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");var h=e.length,v=v&&c?e.map(Qt(v)):e;return r.core.mutate({trans:o,type:"put",keys:i,values:v,wantResults:a}).then(function(m){var l=m.numFailures,w=m.results,p=m.lastResult,m=m.failures;if(l===0)return a?w:p;throw new Le("".concat(r.name,".bulkPut(): ").concat(l," of ").concat(h," operations failed"),m)})})},se.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(o){return o.key}),i=e.map(function(o){return o.changes}),a=[];return this._trans("readwrite",function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then(function(c){var h=[],v=[];e.forEach(function(l,w){var p=l.key,m=l.changes,_=c[w];if(_){for(var y=0,k=Object.keys(m);y<k.length;y++){var A=k[y],S=m[A];if(A===t.schema.primKey.keyPath){if(J(S,p)!==0)throw new N.Constraint("Cannot update primary key in bulkUpdate()")}else z(_,A,S)}a.push(w),h.push(p),v.push(_)}});var g=h.length;return n.mutate({trans:o,type:"put",keys:h,values:v,updates:{keys:r,changeSpecs:i}}).then(function(l){var w=l.numFailures,p=l.failures;if(w===0)return g;for(var m=0,_=Object.keys(p);m<_.length;m++){var y,k=_[m],A=a[Number(k)];A!=null&&(y=p[k],delete p[k],p[A]=y)}throw new Le("".concat(t.name,".bulkUpdate(): ").concat(w," of ").concat(g," operations failed"),p)})})})},se.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(o){var i=o.numFailures,a=o.lastResult,o=o.failures;if(i===0)return a;throw new Le("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),o)})},se);function se(){}function Ct(e){function t(o,c){if(c){for(var h=arguments.length,v=new Array(h-1);--h;)v[h-1]=arguments[h];return n[o].subscribe.apply(null,v),e}if(typeof o=="string")return n[o]}var n={};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return t;function a(o,c,h){if(typeof o!="object"){var v;c=c||Si;var g={subscribers:[],fire:h=h||ae,subscribe:function(l){g.subscribers.indexOf(l)===-1&&(g.subscribers.push(l),g.fire=c(g.fire,l))},unsubscribe:function(l){g.subscribers=g.subscribers.filter(function(w){return w!==l}),g.fire=g.subscribers.reduce(c,h)}};return n[o]=t[o]=g}C(v=o).forEach(function(l){var w=v[l];if(I(w))a(l,v[l][0],v[l][1]);else{if(w!=="asap")throw new N.InvalidArgument("Invalid event config");var p=a(l,xt,function(){for(var m=arguments.length,_=new Array(m);m--;)_[m]=arguments[m];p.subscribers.forEach(function(y){ve(function(){y.apply(null,_)})})})}})}}function Pt(e,t){return re(t).from({prototype:e}),t}function yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Bn(e,t){e.filter=tt(e.filter,t)}function In(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return tt(r(),t())}:t,e.justLimit=n&&!r}function Zt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new N.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Pr(e,t,n){var r=Zt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){var i=e.replayFilter?tt(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(c,h,v){var g,l;i&&!i(h,v,function(w){return h.stop(w)},function(w){return h.fail(w)})||((l=""+(g=h.primaryKey))=="[object ArrayBuffer]"&&(l=""+new Uint8Array(g)),U(a,l)||(a[l]=!0,t(c,h,v)))};return Promise.all([e.or._iterate(o,n),Er(Pr(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Er(Pr(e,r,n),tt(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Er(e,t,n,r){var i=ue(r?function(a,o,c){return n(r(a),o,c)}:n);return e.then(function(a){if(a)return a.start(function(){var o=function(){return a.continue()};t&&!t(a,function(c){return o=c},function(c){a.stop(c),o=ae},function(c){a.fail(c),o=ae})||i(a.value,a,function(c){return o=c}),o()})})}var Et=(Dr.prototype.execute=function(e){var t=this["@@propmod"];if(t.add!==void 0){var n=t.add;if(I(n))return x(x([],I(e)?e:[],!0),n).sort();if(typeof n=="number")return(Number(e)||0)+n;if(typeof n=="bigint")try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(t.remove!==void 0){var r=t.remove;if(I(r))return I(e)?e.filter(function(i){return!r.includes(i)}).sort():[];if(typeof r=="number")return Number(e)-r;if(typeof r=="bigint")try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return n=(n=t.replacePrefix)===null||n===void 0?void 0:n[0],n&&typeof e=="string"&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Dr);function Dr(e){this["@@propmod"]=e}var Ri=(ee.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,le.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ee.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,le.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ee.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=tt(t.algorithm,e)},ee.prototype._iterate=function(e,t){return Yt(this._ctx,e,t,this._ctx.table.core)},ee.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&T(n,e),t._ctx=n,t},ee.prototype.raw=function(){return this._ctx.valueMapper=null,this},ee.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Yt(t,e,n,t.table.core)})},ee.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(yt(r,!0))return i.count({trans:n,query:{index:Zt(r,i.schema),range:r.range}}).then(function(o){return Math.min(o,r.limit)});var a=0;return Yt(r,function(){return++a,!1},n,i).then(function(){return a})}).then(e)},ee.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(h,v){return v?a(h[n[v]],v-1):h[r]}var o=this._ctx.dir==="next"?1:-1;function c(h,v){return J(a(h,i),a(v,i))*o}return this.toArray(function(h){return h.sort(c)}).then(t)},ee.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if(r.dir==="next"&&yt(r,!0)&&0<r.limit){var i=r.valueMapper,a=Zt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(c){return c=c.result,i?c.map(i):c})}var o=[];return Yt(r,function(c){return o.push(c)},n,r.table.core).then(function(){return o})},e)},ee.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,yt(t)?In(t,function(){var n=e;return function(r,i){return n===0||(n===1?--n:i(function(){r.advance(n),n=0}),!1)}}):In(t,function(){var n=e;return function(){return--n<0}})),this},ee.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),In(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},ee.prototype.until=function(e,t){return Bn(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},ee.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ee.prototype.last=function(e){return this.reverse().first(e)},ee.prototype.filter=function(e){var t;return Bn(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=tt(t.isMatch,e),this},ee.prototype.and=function(e){return this.filter(e)},ee.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ee.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ee.prototype.desc=function(){return this.reverse()},ee.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ee.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ee.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ee.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},ee.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&yt(t,!0)&&0<t.limit)return this._read(function(r){var i=Zt(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},ee.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ee.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ee.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ee.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var t={};return Bn(this._ctx,function(i){var r=i.primaryKey.toString(),i=U(t,r);return t[r]=!0,!i}),this},ee.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,a,o;o=typeof e=="function"?e:(i=C(e),a=i.length,function(y){for(var k=!1,A=0;A<a;++A){var S=i[A],O=e[S],P=Y(y,S);O instanceof Et?(z(y,S,O.execute(P)),k=!0):P!==O&&(z(y,S,O),k=!0)}return k});var c=n.table.core,l=c.schema.primaryKey,h=l.outbound,v=l.extractKey,g=200,l=t.db._options.modifyChunkSize;l&&(g=typeof l=="object"?l[c.name]||l["*"]||200:l);function w(y,S){var A=S.failures,S=S.numFailures;m+=y-S;for(var O=0,P=C(A);O<P.length;O++){var j=P[O];p.push(A[j])}}var p=[],m=0,_=[];return t.clone().primaryKeys().then(function(y){function k(S){var O=Math.min(g,y.length-S);return c.getMany({trans:r,keys:y.slice(S,S+O),cache:"immutable"}).then(function(P){for(var j=[],E=[],D=h?[]:null,K=[],R=0;R<O;++R){var F=P[R],V={value:je(F),primKey:y[S+R]};o.call(V,V.value,V)!==!1&&(V.value==null?K.push(y[S+R]):h||J(v(F),v(V.value))===0?(E.push(V.value),h&&D.push(y[S+R])):(K.push(y[S+R]),j.push(V.value)))}return Promise.resolve(0<j.length&&c.mutate({trans:r,type:"add",values:j}).then(function(W){for(var X in W.failures)K.splice(parseInt(X),1);w(j.length,W)})).then(function(){return(0<E.length||A&&typeof e=="object")&&c.mutate({trans:r,type:"put",keys:D,values:E,criteria:A,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<S}).then(function(W){return w(E.length,W)})}).then(function(){return(0<K.length||A&&e===Fn)&&c.mutate({trans:r,type:"delete",keys:K,criteria:A,isAdditionalChunk:0<S}).then(function(W){return w(K.length,W)})}).then(function(){return y.length>S+O&&k(S+g)})})}var A=yt(n)&&n.limit===1/0&&(typeof e!="function"||e===Fn)&&{index:n.index,range:n.range};return k(0).then(function(){if(0<p.length)throw new Te("Error modifying one or more objects",p,m,_);return y.length})})})},ee.prototype.delete=function(){var e=this._ctx,t=e.range;return yt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then(function(a){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(o){var c=o.failures;if(o.lastResult,o.results,o=o.numFailures,o)throw new Te("Could not delete some values",Object.keys(c).map(function(h){return c[h]}),a-o);return a-o})})}):this.modify(Fn)},ee);function ee(){}var Fn=function(e,t){return t.value=null};function ji(e,t){return e<t?-1:e===t?0:1}function Ki(e,t){return t<e?-1:e===t?0:1}function Ae(e,t,n){return e=e instanceof jr?new e.Collection(e):e,e._ctx.error=new(n||TypeError)(t),e}function mt(e){return new e.Collection(e,function(){return Rr("")}).limit(0)}function Jt(e,t,n,r){var i,a,o,c,h,v,g,l=n.length;if(!n.every(function(m){return typeof m=="string"}))return Ae(e,xr);function w(m){i=m==="next"?function(y){return y.toUpperCase()}:function(y){return y.toLowerCase()},a=m==="next"?function(y){return y.toLowerCase()}:function(y){return y.toUpperCase()},o=m==="next"?ji:Ki;var _=n.map(function(y){return{lower:a(y),upper:i(y)}}).sort(function(y,k){return o(y.lower,k.lower)});c=_.map(function(y){return y.upper}),h=_.map(function(y){return y.lower}),g=(v=m)==="next"?"":r}w("next"),e=new e.Collection(e,function(){return Ge(c[0],h[l-1]+r)}),e._ondirectionchange=function(m){w(m)};var p=0;return e._addAlgorithm(function(m,_,y){var k=m.key;if(typeof k!="string")return!1;var A=a(k);if(t(A,h,p))return!0;for(var S=null,O=p;O<l;++O){var P=function(j,E,D,K,R,F){for(var V=Math.min(j.length,K.length),W=-1,X=0;X<V;++X){var Se=E[X];if(Se!==K[X])return R(j[X],D[X])<0?j.substr(0,X)+D[X]+D.substr(X+1):R(j[X],K[X])<0?j.substr(0,X)+K[X]+D.substr(X+1):0<=W?j.substr(0,W)+E[W]+D.substr(W+1):null;R(j[X],Se)<0&&(W=X)}return V<K.length&&F==="next"?j+D.substr(j.length):V<j.length&&F==="prev"?j.substr(0,D.length):W<0?null:j.substr(0,W)+K[W]+D.substr(W+1)}(k,A,c[O],h[O],o,v);P===null&&S===null?p=O+1:(S===null||0<o(S,P))&&(S=P)}return _(S!==null?function(){m.continue(S+g)}:y),!1}),e}function Ge(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Rr(e){return{type:1,lower:e,upper:e}}var jr=(Object.defineProperty(pe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),pe.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return 0<this._cmp(e,t)||this._cmp(e,t)===0&&(n||r)&&(!n||!r)?mt(this):new this.Collection(this,function(){return Ge(e,t,!n,!r)})}catch{return Ae(this,Ke)}},pe.prototype.equals=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Rr(e)})},pe.prototype.above=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(e,void 0,!0)})},pe.prototype.aboveOrEqual=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(e,void 0,!1)})},pe.prototype.below=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(void 0,e,!1,!0)})},pe.prototype.belowOrEqual=function(e){return e==null?Ae(this,Ke):new this.Collection(this,function(){return Ge(void 0,e)})},pe.prototype.startsWith=function(e){return typeof e!="string"?Ae(this,xr):this.between(e,e+et,!0,!0)},pe.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Jt(this,function(t,n){return t.indexOf(n[0])===0},[e],et)},pe.prototype.equalsIgnoreCase=function(e){return Jt(this,function(t,n){return t===n[0]},[e],"")},pe.prototype.anyOfIgnoreCase=function(){var e=ke.apply(Oe,arguments);return e.length===0?mt(this):Jt(this,function(t,n){return n.indexOf(t)!==-1},e,"")},pe.prototype.startsWithAnyOfIgnoreCase=function(){var e=ke.apply(Oe,arguments);return e.length===0?mt(this):Jt(this,function(t,n){return n.some(function(r){return t.indexOf(r)===0})},e,et)},pe.prototype.anyOf=function(){var e=this,t=ke.apply(Oe,arguments),n=this._cmp;try{t.sort(n)}catch{return Ae(this,Ke)}if(t.length===0)return mt(this);var r=new this.Collection(this,function(){return Ge(t[0],t[t.length-1])});r._ondirectionchange=function(a){n=a==="next"?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm(function(a,o,c){for(var h=a.key;0<n(h,t[i]);)if(++i===t.length)return o(c),!1;return n(h,t[i])===0||(o(function(){a.continue(t[i])}),!1)}),r},pe.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},pe.prototype.noneOf=function(){var e=ke.apply(Oe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Ae(this,Ke)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},pe.prototype.inAnyRange=function(k,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,o=this._min,c=this._max;if(k.length===0)return mt(this);if(!k.every(function(A){return A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0}))return Ae(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",N.InvalidArgument);var h=!t||t.includeLowers!==!1,v=t&&t.includeUppers===!0,g,l=i;function w(A,S){return l(A[0],S[0])}try{(g=k.reduce(function(A,S){for(var O=0,P=A.length;O<P;++O){var j=A[O];if(r(S[0],j[1])<0&&0<r(S[1],j[0])){j[0]=o(j[0],S[0]),j[1]=c(j[1],S[1]);break}}return O===P&&A.push(S),A},[])).sort(w)}catch{return Ae(this,Ke)}var p=0,m=v?function(A){return 0<i(A,g[p][1])}:function(A){return 0<=i(A,g[p][1])},_=h?function(A){return 0<a(A,g[p][0])}:function(A){return 0<=a(A,g[p][0])},y=m,k=new this.Collection(this,function(){return Ge(g[0][0],g[g.length-1][1],!h,!v)});return k._ondirectionchange=function(A){l=A==="next"?(y=m,i):(y=_,a),g.sort(w)},k._addAlgorithm(function(A,S,O){for(var P,j=A.key;y(j);)if(++p===g.length)return S(O),!1;return!m(P=j)&&!_(P)||(n._cmp(j,g[p][1])===0||n._cmp(j,g[p][0])===0||S(function(){l===i?A.continue(g[p][0]):A.continue(g[p][1])}),!1)}),k},pe.prototype.startsWithAnyOf=function(){var e=ke.apply(Oe,arguments);return e.every(function(t){return typeof t=="string"})?e.length===0?mt(this):this.inAnyRange(e.map(function(t){return[t,t+et]})):Ae(this,"startsWithAnyOf() only works with strings")},pe);function pe(){}function De(e){return ue(function(t){return Dt(t),e(t.target.error),!1})}function Dt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Rt="storagemutated",qn="x-storagemutated-1",Ve=Ct(null,Rt),Mi=(Re.prototype._lock=function(){return Z(!q.global),++this._reculock,this._reculock!==1||q.global||(q.lockOwnerFor=this),this},Re.prototype._unlock=function(){if(Z(!q.global),--this._reculock==0)for(q.global||(q.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{$e(e[1],e[0])}catch{}}return this},Re.prototype._locked=function(){return this._reculock&&q.lockOwnerFor!==this},Re.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Z(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new N.DatabaseClosed(r);case"MissingAPIError":throw new N.MissingAPI(r.message,r);default:throw new N.OpenFailed(r)}if(!this.active)throw new N.TransactionInactive;return Z(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ue(function(i){Dt(i),t._reject(e.error)}),e.onabort=ue(function(i){Dt(i),t.active&&t._reject(new N.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=ue(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ve.storagemutated.fire(e.mutatedParts)}),this},Re.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return le(new N.ReadOnly("Transaction is readonly"));if(!this.active)return le(new N.TransactionInactive);if(this._locked())return new M(function(a,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,o)},q])});if(n)return Ue(function(){var a=new M(function(o,c){r._lock();var h=t(o,c,r);h&&h.then&&h.then(o,c)});return a.finally(function(){return r._unlock()}),a._lib=!0,a});var i=new M(function(a,o){var c=t(a,o,r);c&&c.then&&c.then(a,o)});return i._lib=!0,i},Re.prototype._root=function(){return this.parent?this.parent._root():this},Re.prototype.waitFor=function(e){var t,n=this._root(),r=M.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=a)}());var i=n._waitingFor;return new M(function(a,o){r.then(function(c){return n._waitingQueue.push(ue(a.bind(null,c)))},function(c){return n._waitingQueue.push(ue(o.bind(null,c)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Re.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new N.Abort))},Re.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(U(t,e))return t[e];var n=this.schema[e];if(!n)throw new N.NotFound("Table "+e+" not part of transaction");return n=new this.db.Table(e,n,this),n.core=this.db.core.table(e),t[e]=n},Re);function Re(){}function Tn(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Kr(t)}}function Kr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ln(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,a,o){return o=r(a,o),o&&(i[o[0]]=o[1]),i},{}))};var r}var jt=function(e){try{return e.only([[]]),jt=function(){return[[]]},[[]]}catch{return jt=function(){return et},et}};function Nn(e){return e==null?function(){}:typeof e=="string"?(t=e).split(".").length===1?function(n){return n[t]}:function(n){return Y(n,t)}:function(n){return Y(n,e)};var t}function Mr(e){return[].slice.call(e)}var Bi=0;function Kt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Ii(e,t,h){function r(y){if(y.type===3)return null;if(y.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var p=y.lower,m=y.upper,_=y.lowerOpen,y=y.upperOpen;return p===void 0?m===void 0?null:t.upperBound(m,!!y):m===void 0?t.lowerBound(p,!!_):t.bound(p,m,!!_,!!y)}function i(w){var p,m=w.name;return{name:m,schema:w,mutate:function(_){var y=_.trans,k=_.type,A=_.keys,S=_.values,O=_.range;return new Promise(function(P,j){P=ue(P);var E=y.objectStore(m),D=E.keyPath==null,K=k==="put"||k==="add";if(!K&&k!=="delete"&&k!=="deleteRange")throw new Error("Invalid operation type: "+k);var R,F=(A||S||{length:1}).length;if(A&&S&&A.length!==S.length)throw new Error("Given keys array must have same length as given values array.");if(F===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});function V(we){++Se,Dt(we)}var W=[],X=[],Se=0;if(k==="deleteRange"){if(O.type===4)return P({numFailures:Se,failures:X,results:[],lastResult:void 0});O.type===3?W.push(R=E.clear()):W.push(R=E.delete(r(O)))}else{var D=K?D?[S,A]:[S,null]:[A,null],G=D[0],be=D[1];if(K)for(var _e=0;_e<F;++_e)W.push(R=be&&be[_e]!==void 0?E[k](G[_e],be[_e]):E[k](G[_e])),R.onerror=V;else for(_e=0;_e<F;++_e)W.push(R=E[k](G[_e])),R.onerror=V}function dn(we){we=we.target.result,W.forEach(function(it,ar){return it.error!=null&&(X[ar]=it.error)}),P({numFailures:Se,failures:X,results:k==="delete"?A:W.map(function(it){return it.result}),lastResult:we})}R.onerror=function(we){V(we),dn(we)},R.onsuccess=dn})},getMany:function(_){var y=_.trans,k=_.keys;return new Promise(function(A,S){A=ue(A);for(var O,P=y.objectStore(m),j=k.length,E=new Array(j),D=0,K=0,R=function(W){W=W.target,E[W._pos]=W.result,++K===D&&A(E)},F=De(S),V=0;V<j;++V)k[V]!=null&&((O=P.get(k[V]))._pos=V,O.onsuccess=R,O.onerror=F,++D);D===0&&A(E)})},get:function(_){var y=_.trans,k=_.key;return new Promise(function(A,S){A=ue(A);var O=y.objectStore(m).get(k);O.onsuccess=function(P){return A(P.target.result)},O.onerror=De(S)})},query:(p=v,function(_){return new Promise(function(y,k){y=ue(y);var A,S,O,D=_.trans,P=_.values,j=_.limit,R=_.query,E=j===1/0?void 0:j,K=R.index,R=R.range,D=D.objectStore(m),K=K.isPrimaryKey?D:D.index(K.name),R=r(R);if(j===0)return y({result:[]});p?((E=P?K.getAll(R,E):K.getAllKeys(R,E)).onsuccess=function(F){return y({result:F.target.result})},E.onerror=De(k)):(A=0,S=!P&&"openKeyCursor"in K?K.openKeyCursor(R):K.openCursor(R),O=[],S.onsuccess=function(F){var V=S.result;return V?(O.push(P?V.value:V.primaryKey),++A===j?y({result:O}):void V.continue()):y({result:O})},S.onerror=De(k))})}),openCursor:function(_){var y=_.trans,k=_.values,A=_.query,S=_.reverse,O=_.unique;return new Promise(function(P,j){P=ue(P);var K=A.index,E=A.range,D=y.objectStore(m),D=K.isPrimaryKey?D:D.index(K.name),K=S?O?"prevunique":"prev":O?"nextunique":"next",R=!k&&"openKeyCursor"in D?D.openKeyCursor(r(E),K):D.openCursor(r(E),K);R.onerror=De(j),R.onsuccess=ue(function(F){var V,W,X,Se,G=R.result;G?(G.___id=++Bi,G.done=!1,V=G.continue.bind(G),W=(W=G.continuePrimaryKey)&&W.bind(G),X=G.advance.bind(G),Se=function(){throw new Error("Cursor not stopped")},G.trans=y,G.stop=G.continue=G.continuePrimaryKey=G.advance=function(){throw new Error("Cursor not started")},G.fail=ue(j),G.next=function(){var be=this,_e=1;return this.start(function(){return _e--?be.continue():be.stop()}).then(function(){return be})},G.start=function(be){function _e(){if(R.result)try{be()}catch(we){G.fail(we)}else G.done=!0,G.start=function(){throw new Error("Cursor behind last entry")},G.stop()}var dn=new Promise(function(we,it){we=ue(we),R.onerror=De(it),G.fail=it,G.stop=function(ar){G.stop=G.continue=G.continuePrimaryKey=G.advance=Se,we(ar)}});return R.onsuccess=ue(function(we){R.onsuccess=_e,_e()}),G.continue=V,G.continuePrimaryKey=W,G.advance=X,_e(),dn},P(G)):P(null)},j)})},count:function(_){var y=_.query,k=_.trans,A=y.index,S=y.range;return new Promise(function(O,P){var j=k.objectStore(m),E=A.isPrimaryKey?j:j.index(A.name),j=r(S),E=j?E.count(j):E.count();E.onsuccess=ue(function(D){return O(D.target.result)}),E.onerror=De(P)})}}}var a,o,c,g=(o=h,c=Mr((a=e).objectStoreNames),{schema:{name:a.name,tables:c.map(function(w){return o.objectStore(w)}).map(function(w){var p=w.keyPath,y=w.autoIncrement,m=I(p),_={},y={name:w.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:p==null,compound:m,keyPath:p,autoIncrement:y,unique:!0,extractKey:Nn(p)},indexes:Mr(w.indexNames).map(function(k){return w.index(k)}).map(function(O){var A=O.name,S=O.unique,P=O.multiEntry,O=O.keyPath,P={name:A,compound:I(O),keyPath:O,unique:S,multiEntry:P,extractKey:Nn(O)};return _[Kt(O)]=P}),getIndexByKeyPath:function(k){return _[Kt(k)]}};return _[":id"]=y.primaryKey,p!=null&&(_[Kt(p)]=y.primaryKey),y})},hasGetAll:0<c.length&&"getAll"in o.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),h=g.schema,v=g.hasGetAll,g=h.tables.map(i),l={};return g.forEach(function(w){return l[w.name]=w}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(w){if(!l[w])throw new Error("Table '".concat(w,"' not found"));return l[w]},MIN_KEY:-1/0,MAX_KEY:jt(t),schema:h}}function Fi(e,t,n,r){var i=n.IDBKeyRange;return n.indexedDB,{dbcore:(r=Ii(t,i,r),e.dbcore.reduce(function(a,o){return o=o.create,s(s({},a),o(a))},r))}}function $t(e,r){var n=r.db,r=Fi(e._middlewares,n,e._deps,r);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(o){return o.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function en(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(o){var c=function h(v,g){return te(v,g)||(v=B(v))&&h(v,g)}(o,i);(!c||"value"in c&&c.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?L(o,i,{get:function(){return this.table(i)},set:function(h){oe(this,i,{value:h,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,a))})})}function Un(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function qi(e,t){return e._cfg.version-t._cfg.version}function Ti(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Ln("$meta",Ir("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),c=q.transless||q;Ue(function(){return q.trans=a,q.transless=c,t!==0?($t(e,n),v=t,((h=a).storeNames.includes("$meta")?h.table("$meta").get("version").then(function(g){return g??v}):M.resolve(v)).then(function(g){return w=g,p=a,m=n,_=[],g=(l=e)._versions,y=l._dbSchema=nn(0,l.idbdb,m),(g=g.filter(function(k){return k._cfg.version>=w})).length!==0?(g.forEach(function(k){_.push(function(){var A=y,S=k._cfg.dbschema;rn(l,A,m),rn(l,S,m),y=l._dbSchema=S;var O=Hn(A,S);O.add.forEach(function(K){zn(m,K[0],K[1].primKey,K[1].indexes)}),O.change.forEach(function(K){if(K.recreate)throw new N.Upgrade("Not yet support for changing primary key");var R=m.objectStore(K.name);K.add.forEach(function(F){return tn(R,F)}),K.change.forEach(function(F){R.deleteIndex(F.name),tn(R,F)}),K.del.forEach(function(F){return R.deleteIndex(F)})});var P=k._cfg.contentUpgrade;if(P&&k._cfg.version>w){$t(l,m),p._memoizedTables={};var j=ie(S);O.del.forEach(function(K){j[K]=A[K]}),Un(l,[l.Transaction.prototype]),en(l,[l.Transaction.prototype],C(j),j),p.schema=j;var E,D=ft(P);return D&&pt(),O=M.follow(function(){var K;(E=P(p))&&D&&(K=He.bind(null,null),E.then(K,K))}),E&&typeof E.then=="function"?M.resolve(E):O.then(function(){return E})}}),_.push(function(A){var S,O,P=k._cfg.dbschema;S=P,O=A,[].slice.call(O.db.objectStoreNames).forEach(function(j){return S[j]==null&&O.db.deleteObjectStore(j)}),Un(l,[l.Transaction.prototype]),en(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),p.schema=l._dbSchema}),_.push(function(A){l.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(l.idbdb.version/10)===k._cfg.version?(l.idbdb.deleteObjectStore("$meta"),delete l._dbSchema.$meta,l._storeNames=l._storeNames.filter(function(S){return S!=="$meta"})):A.objectStore("$meta").put(k._cfg.version,"version"))})}),function k(){return _.length?M.resolve(_.shift()(p.idbtrans)).then(k):M.resolve()}().then(function(){Br(y,m)})):M.resolve();var l,w,p,m,_,y}).catch(o)):(C(i).forEach(function(g){zn(n,g,i[g].primKey,i[g].indexes)}),$t(e,n),void M.follow(function(){return e.on.populate.fire(a)}).catch(o));var h,v})}function Li(e,t){Br(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=nn(0,e.idbdb,t);rn(e,e._dbSchema,t);for(var r=0,i=Hn(n,e._dbSchema).change;r<i.length;r++){var a=function(o){if(o.change.length||o.recreate)return console.warn("Unable to patch indexes of table ".concat(o.name," because it has changes on the type of index or primary key.")),{value:void 0};var c=t.objectStore(o.name);o.add.forEach(function(h){Ee&&console.debug("Dexie upgrade patch: Creating missing index ".concat(o.name,".").concat(h.src)),tn(c,h)})}(i[r]);if(typeof a=="object")return a.value}}function Hn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var o={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)o.recreate=!0,r.change.push(o);else{var c=i.idxByName,h=a.idxByName,v=void 0;for(v in c)h[v]||o.del.push(v);for(v in h){var g=c[v],l=h[v];g?g.src!==l.src&&o.change.push(l):o.add.push(l)}(0<o.del.length||0<o.add.length||0<o.change.length)&&r.change.push(o)}}else r.add.push([n,a])}return r}function zn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return tn(i,a)}),i}function Br(e,t){C(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(Ee&&console.debug("Dexie: Creating missing table",n),zn(t,n,e[n].primKey,e[n].indexes))})}function tn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function nn(e,t,n){var r={};return H(t.objectStoreNames,0).forEach(function(i){for(var a=n.objectStore(i),o=Tn(Kr(v=a.keyPath),v||"",!0,!1,!!a.autoIncrement,v&&typeof v!="string",!0),c=[],h=0;h<a.indexNames.length;++h){var g=a.index(a.indexNames[h]),v=g.keyPath,g=Tn(g.name,v,!!g.unique,!!g.multiEntry,!1,v&&typeof v!="string",!1);c.push(g)}r[i]=Ln(i,o,c)}),r}function rn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var c=0;c<o.indexNames.length;++c){var h=o.indexNames[c],v=o.index(h).keyPath,g=typeof v=="string"?v:"["+H(v).join("+")+"]";!t[a]||(v=t[a].idxByName[g])&&(v.name=h,delete t[a].idxByName[g],t[a].idxByName[h]=v)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&b.WorkerGlobalScope&&b instanceof b.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ir(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Tn(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),I(i),n===0)})}var Ni=(an.prototype._parseStoresSpec=function(e,t){C(e).forEach(function(n){if(e[n]!==null){var r=Ir(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new N.Schema("Primary key cannot be multi-valued");r.forEach(function(a){if(a.auto)throw new N.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new N.Schema("Index must have a name and cannot be an empty string")}),t[n]=Ln(n,i,r)}})},an.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?T(this._cfg.storesSource,n):n;var n=t._versions,r={},i={};return n.forEach(function(a){T(r,a._cfg.storesSource),i=a._cfg.dbschema={},a._parseStoresSpec(r,i)}),t._dbSchema=i,Un(t,[t._allTables,t,t.Transaction.prototype]),en(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],C(i),i),t._storeNames=C(i),this},an.prototype.upgrade=function(e){return this._cfg.contentUpgrade=An(this._cfg.contentUpgrade||ae,e),this},an);function an(){}function Gn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Me(Xt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Vn(e){return e&&typeof e.databases=="function"}function Wn(e){return Ue(function(){return q.letThrough=!0,e()})}function Xn(e){return!("from"in e)}var ge=function(e,t){if(!this){var n=new ge;return e&&"d"in e&&T(n,e),n}T(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Mt(e,t,n){var r=J(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(Xn(e))return T(e,{from:t,to:n,d:1});var i=e.l,r=e.r;if(J(n,e.from)<0)return i?Mt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},qr(e);if(0<J(t,e.to))return r?Mt(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},qr(e);J(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<J(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Bt(e,i),r&&n&&Bt(e,r)}}function Bt(e,t){Xn(t)||function n(r,h){var a=h.from,o=h.to,c=h.l,h=h.r;Mt(r,a,o),c&&n(r,c),h&&n(r,h)}(e,t)}function Fr(e,t){var n=on(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=on(e),o=a.next(i.from),c=o.value;!r.done&&!o.done;){if(J(c.from,i.to)<=0&&0<=J(c.to,i.from))return!0;J(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(o=a.next(i.from)).value}return!1}function on(e){var t=Xn(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&J(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||J(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function qr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t=i=="r"?"l":"r",n=s({},e),r=e[i],e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Tr(n)),e.d=Tr(e)}function Tr(n){var t=n.r,n=n.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function sn(e,t){return C(t).forEach(function(n){e[n]?Bt(e[n],t[n]):e[n]=function r(i){var a,o,c={};for(a in i)U(i,a)&&(o=i[a],c[a]=!o||typeof o!="object"||lt.has(o.constructor)?o:r(o));return c}(t[n])}),e}function Qn(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Fr(t[n],e[n])})}$(ge.prototype,((Ce={add:function(e){return Bt(this,e),this},addKey:function(e){return Mt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Mt(t,n,n)}),this},hasKey:function(e){var t=on(this).next(e).value;return t&&J(t.from,e)<=0&&0<=J(t.to,e)}})[wt]=function(){return on(this)},Ce));var nt={},Zn={},Yn=!1;function un(e){sn(Zn,e),Yn||(Yn=!0,setTimeout(function(){Yn=!1,Jn(Zn,!(Zn={}))},0))}function Jn(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(nt);r<i.length;r++)Lr(o=i[r],e,n,t);else for(var a in e){var o,c=/^idb\:\/\/(.*)\/(.*)\//.exec(a);c&&(a=c[1],c=c[2],(o=nt["idb://".concat(a,"/").concat(c)])&&Lr(o,e,n,t))}n.forEach(function(h){return h()})}function Lr(e,t,n,r){for(var i=[],a=0,o=Object.entries(e.queries.query);a<o.length;a++){for(var c=o[a],h=c[0],v=[],g=0,l=c[1];g<l.length;g++){var w=l[g];Qn(t,w.obsSet)?w.subscribers.forEach(function(y){return n.add(y)}):r&&v.push(w)}r&&i.push([h,v])}if(r)for(var p=0,m=i;p<m.length;p++){var _=m[p],h=_[0],v=_[1];e.queries.query[h]=v}}function Ui(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?le(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function o(){if(t.openCanceller!==r)throw new N.DatabaseClosed("db.open() was cancelled")}function c(){return new M(function(w,p){if(o(),!n)throw new N.MissingAPI;var m=e.name,_=t.autoSchema||!i?n.open(m):n.open(m,i);if(!_)throw new N.MissingAPI;_.onerror=De(p),_.onblocked=ue(e._fireOnBlocked),_.onupgradeneeded=ue(function(y){var k;g=_.transaction,t.autoSchema&&!e._options.allowEmptyDB?(_.onerror=Dt,g.abort(),_.result.close(),(k=n.deleteDatabase(m)).onsuccess=k.onerror=ue(function(){p(new N.NoSuchDatabase("Database ".concat(m," doesnt exist")))})):(g.onerror=De(p),y=y.oldVersion>Math.pow(2,62)?0:y.oldVersion,l=y<1,e.idbdb=_.result,a&&Li(e,g),Ti(e,y/10,g,p))},p),_.onsuccess=ue(function(){g=null;var y,k,A,S,O,P=e.idbdb=_.result,j=H(P.objectStoreNames);if(0<j.length)try{var E=P.transaction((S=j).length===1?S[0]:S,"readonly");if(t.autoSchema)k=P,A=E,(y=e).verno=k.version/10,A=y._dbSchema=nn(0,k,A),y._storeNames=H(k.objectStoreNames,0),en(y,[y._allTables],C(A),A);else if(rn(e,e._dbSchema,E),((O=Hn(nn(0,(O=e).idbdb,E),O._dbSchema)).add.length||O.change.some(function(D){return D.add.length||D.change.length}))&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),i=P.version+1,a=!0,w(c());$t(e,E)}catch{}vt.push(e),P.onversionchange=ue(function(D){t.vcFired=!0,e.on("versionchange").fire(D)}),P.onclose=ue(function(D){e.on("close").fire(D)}),l&&(O=e._deps,E=m,P=O.indexedDB,O=O.IDBKeyRange,Vn(P)||E===Xt||Gn(P,O).put({name:E}).catch(ae)),w()},p)}).catch(function(w){switch(w==null?void 0:w.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c();break;case"VersionError":if(0<i)return i=0,c()}return M.reject(w)})}var h,v=t.dbReadyResolve,g=null,l=!1;return M.race([r,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(w){function p(){return indexedDB.databases().finally(w)}h=setInterval(p,100),p()}).finally(function(){return clearInterval(h)}):Promise.resolve()).then(c)]).then(function(){return o(),t.onReadyBeingFired=[],M.resolve(Wn(function(){return e.on.ready.fire(e.vip)})).then(function w(){if(0<t.onReadyBeingFired.length){var p=t.onReadyBeingFired.reduce(An,ae);return t.onReadyBeingFired=[],M.resolve(Wn(function(){return p(e.vip)})).then(w)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(w){t.dbOpenError=w;try{g&&g.abort()}catch{}return r===t.openCanceller&&e._close(),le(w)}).finally(function(){t.openComplete=!0,v()}).then(function(){var w;return l&&(w={},e.tables.forEach(function(p){p.schema.indexes.forEach(function(m){m.name&&(w["idb://".concat(e.name,"/").concat(p.name,"/").concat(m.name)]=new ge(-1/0,[[[]]]))}),w["idb://".concat(e.name,"/").concat(p.name,"/")]=w["idb://".concat(e.name,"/").concat(p.name,"/:dels")]=new ge(-1/0,[[[]]])}),Ve(Rt).fire(w),Jn(w,!0)),e})}function $n(e){function t(a){return e.next(a)}var n=i(t),r=i(function(a){return e.throw(a)});function i(a){return function(h){var c=a(h),h=c.value;return c.done?h:h&&typeof h.then=="function"?h.then(n,r):I(h)?Promise.all(h).then(n,r):n(h)}}return i(t)()}function cn(e,t,n){for(var r=I(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Hi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(l,w,p){var m=Kt(l),_=i[m]=i[m]||[],y=l==null?0:typeof l=="string"?1:l.length,k=0<w,k=s(s({},p),{name:k?"".concat(m,"(virtual-from:").concat(p.name,")"):p.name,lowLevelIndex:p,isVirtual:k,keyTail:w,keyLength:y,extractKey:Nn(l),unique:!k&&p.unique});return _.push(k),k.isPrimaryKey||a.push(k),1<y&&o(y===2?l[0]:l.slice(0,y-1),w+1,p),_.sort(function(A,S){return A.keyTail-S.keyTail}),k}t=o(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var c=0,h=r.indexes;c<h.length;c++){var v=h[c];o(v.keyPath,0,v)}function g(l){var w,p=l.query.index;return p.isVirtual?s(s({},l),{query:{index:p.lowLevelIndex,range:(w=l.query.range,p=p.keyTail,{type:w.type===1?2:w.type,lower:cn(w.lower,w.lowerOpen?e.MAX_KEY:e.MIN_KEY,p),lowerOpen:!0,upper:cn(w.upper,w.upperOpen?e.MIN_KEY:e.MAX_KEY,p),upperOpen:!0})}}):l}return s(s({},n),{schema:s(s({},r),{primaryKey:t,indexes:a,getIndexByKeyPath:function(l){return(l=i[Kt(l)])&&l[0]}}),count:function(l){return n.count(g(l))},query:function(l){return n.query(g(l))},openCursor:function(l){var w=l.query.index,p=w.keyTail,m=w.isVirtual,_=w.keyLength;return m?n.openCursor(g(l)).then(function(k){return k&&y(k)}):n.openCursor(l);function y(k){return Object.create(k,{continue:{value:function(A){A!=null?k.continue(cn(A,l.reverse?e.MAX_KEY:e.MIN_KEY,p)):l.unique?k.continue(k.key.slice(0,_).concat(l.reverse?e.MIN_KEY:e.MAX_KEY,p)):k.continue()}},continuePrimaryKey:{value:function(A,S){k.continuePrimaryKey(cn(A,e.MAX_KEY,p),S)}},primaryKey:{get:function(){return k.primaryKey}},key:{get:function(){var A=k.key;return _===1?A[0]:A.slice(0,_)}},value:{get:function(){return k.value}}})}}})}})}};function er(e,t,n,r){return n=n||{},r=r||"",C(e).forEach(function(i){var a,o,c;U(t,i)?(a=e[i],o=t[i],typeof a=="object"&&typeof o=="object"&&a&&o?(c=_t(a))!==_t(o)?n[r+i]=t[i]:c==="Object"?er(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i]):a!==o&&(n[r+i]=t[i])):n[r+i]=void 0}),C(t).forEach(function(i){U(e,i)||(n[r+i]=t[i])}),n}function tr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var zi={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return s(s({},n),{mutate:function(i){var a=q.trans,o=a.table(t).hook,c=o.deleting,h=o.creating,v=o.updating;switch(i.type){case"add":if(h.fire===ae)break;return a._promise("readwrite",function(){return g(i)},!0);case"put":if(h.fire===ae&&v.fire===ae)break;return a._promise("readwrite",function(){return g(i)},!0);case"delete":if(c.fire===ae)break;return a._promise("readwrite",function(){return g(i)},!0);case"deleteRange":if(c.fire===ae)break;return a._promise("readwrite",function(){return function l(w,p,m){return n.query({trans:w,values:!1,query:{index:r,range:p},limit:m}).then(function(_){var y=_.result;return g({type:"delete",keys:y,trans:w}).then(function(k){return 0<k.numFailures?Promise.reject(k.failures[0]):y.length<m?{failures:[],numFailures:0,lastResult:void 0}:l(w,s(s({},p),{lower:y[y.length-1],lowerOpen:!0}),m)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function g(l){var w,p,m,_=q.trans,y=l.keys||tr(r,l);if(!y)throw new Error("Keys missing");return(l=l.type==="add"||l.type==="put"?s(s({},l),{keys:y}):s({},l)).type!=="delete"&&(l.values=x([],l.values)),l.keys&&(l.keys=x([],l.keys)),w=n,m=y,((p=l).type==="add"?Promise.resolve([]):w.getMany({trans:p.trans,keys:m,cache:"immutable"})).then(function(k){var A=y.map(function(S,O){var P,j,E,D=k[O],K={onerror:null,onsuccess:null};return l.type==="delete"?c.fire.call(K,S,D,_):l.type==="add"||D===void 0?(P=h.fire.call(K,S,l.values[O],_),S==null&&P!=null&&(l.keys[O]=S=P,r.outbound||z(l.values[O],r.keyPath,S))):(P=er(D,l.values[O]),(j=v.fire.call(K,P,S,D,_))&&(E=l.values[O],Object.keys(j).forEach(function(R){U(E,R)?E[R]=j[R]:z(E,R,j[R])}))),K});return n.mutate(l).then(function(S){for(var O=S.failures,P=S.results,j=S.numFailures,S=S.lastResult,E=0;E<y.length;++E){var D=(P||y)[E],K=A[E];D==null?K.onerror&&K.onerror(O[E]):K.onsuccess&&K.onsuccess(l.type==="put"&&k[E]?l.values[E]:D)}return{failures:O,results:P,numFailures:j,lastResult:S}}).catch(function(S){return A.forEach(function(O){return O.onerror&&O.onerror(S)}),Promise.reject(S)})})}}})}})}};function Nr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)J(t.keys[i],e[a])===0&&(r.push(n?je(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var Gi={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return s(s({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Nr(r.keys,r.trans._cache,r.cache==="clone");return i?M.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?je(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Ur(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Hr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Vi={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new ge(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(r,i,a){if(q.subscr&&i!=="readonly")throw new N.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(q.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,l=a.indexes,c=o.extractKey,h=o.outbound,v=o.autoIncrement&&l.filter(function(p){return p.compound&&p.keyPath.includes(o.keyPath)}),g=s(s({},i),{mutate:function(p){function m(R){return R="idb://".concat(t,"/").concat(r,"/").concat(R),S[R]||(S[R]=new ge)}var _,y,k,A=p.trans,S=p.mutatedParts||(p.mutatedParts={}),O=m(""),P=m(":dels"),j=p.type,K=p.type==="deleteRange"?[p.range]:p.type==="delete"?[p.keys]:p.values.length<50?[tr(o,p).filter(function(R){return R}),p.values]:[],E=K[0],D=K[1],K=p.trans._cache;return I(E)?(O.addKeys(E),(K=j==="delete"||E.length===D.length?Nr(E,K):null)||P.addKeys(E),(K||D)&&(_=m,y=K,k=D,a.indexes.forEach(function(R){var F=_(R.name||"");function V(X){return X!=null?R.extractKey(X):null}function W(X){return R.multiEntry&&I(X)?X.forEach(function(Se){return F.addKey(Se)}):F.addKey(X)}(y||k).forEach(function(X,be){var G=y&&V(y[be]),be=k&&V(k[be]);J(G,be)!==0&&(G!=null&&W(G),be!=null&&W(be))})}))):E?(D={from:(D=E.lower)!==null&&D!==void 0?D:e.MIN_KEY,to:(D=E.upper)!==null&&D!==void 0?D:e.MAX_KEY},P.add(D),O.add(D)):(O.add(n),P.add(n),a.indexes.forEach(function(R){return m(R.name).add(n)})),i.mutate(p).then(function(R){return!E||p.type!=="add"&&p.type!=="put"||(O.addKeys(R.results),v&&v.forEach(function(F){for(var V=p.values.map(function(G){return F.extractKey(G)}),W=F.keyPath.findIndex(function(G){return G===o.keyPath}),X=0,Se=R.results.length;X<Se;++X)V[X][W]=R.results[X];m(F.name).addKeys(V)})),A.mutatedParts=sn(A.mutatedParts||{},S),R})}}),l=function(m){var _=m.query,m=_.index,_=_.range;return[m,new ge((m=_.lower)!==null&&m!==void 0?m:e.MIN_KEY,(_=_.upper)!==null&&_!==void 0?_:e.MAX_KEY)]},w={get:function(p){return[o,new ge(p.key)]},getMany:function(p){return[o,new ge().addKeys(p.keys)]},count:l,query:l,openCursor:l};return C(w).forEach(function(p){g[p]=function(m){var _=q.subscr,y=!!_,k=Ur(q,i)&&Hr(p,m)?m.obsSet={}:_;if(y){var A=function(D){return D="idb://".concat(t,"/").concat(r,"/").concat(D),k[D]||(k[D]=new ge)},S=A(""),O=A(":dels"),_=w[p](m),y=_[0],_=_[1];if((p==="query"&&y.isPrimaryKey&&!m.values?O:A(y.name||"")).add(_),!y.isPrimaryKey){if(p!=="count"){var P=p==="query"&&h&&m.values&&i.query(s(s({},m),{values:!1}));return i[p].apply(this,arguments).then(function(D){if(p==="query"){if(h&&m.values)return P.then(function(V){return V=V.result,S.addKeys(V),D});var K=m.values?D.result.map(c):D.result;(m.values?S:O).addKeys(K)}else if(p==="openCursor"){var R=D,F=m.values;return R&&Object.create(R,{key:{get:function(){return O.addKey(R.primaryKey),R.key}},primaryKey:{get:function(){var V=R.primaryKey;return O.addKey(V),V}},value:{get:function(){return F&&S.addKey(R.primaryKey),R.value}}})}return D})}O.add(n)}}return i[p].apply(this,arguments)}}),g}})}};function zr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;return n.numFailures===r?null:(t=s({},t),I(t.keys)&&(t.keys=t.keys.filter(function(i,a){return!(a in n.failures)})),"values"in t&&I(t.values)&&(t.values=t.values.filter(function(i,a){return!(a in n.failures)})),t)}function nr(e,t){return n=e,((r=t).lower===void 0||(r.lowerOpen?0<J(n,r.lower):0<=J(n,r.lower)))&&(e=e,(t=t).upper===void 0||(t.upperOpen?J(e,t.upper)<0:J(e,t.upper)<=0));var n,r}function Gr(e,t,w,r,i,a){if(!w||w.length===0)return e;var o=t.query.index,c=o.multiEntry,h=t.query.range,v=r.schema.primaryKey.extractKey,g=o.extractKey,l=(o.lowLevelIndex||o).extractKey,w=w.reduce(function(p,m){var _=p,y=[];if(m.type==="add"||m.type==="put")for(var k=new ge,A=m.values.length-1;0<=A;--A){var S,O=m.values[A],P=v(O);k.hasKey(P)||(S=g(O),(c&&I(S)?S.some(function(R){return nr(R,h)}):nr(S,h))&&(k.addKey(P),y.push(O)))}switch(m.type){case"add":var j=new ge().addKeys(t.values?p.map(function(F){return v(F)}):p),_=p.concat(t.values?y.filter(function(F){return F=v(F),!j.hasKey(F)&&(j.addKey(F),!0)}):y.map(function(F){return v(F)}).filter(function(F){return!j.hasKey(F)&&(j.addKey(F),!0)}));break;case"put":var E=new ge().addKeys(m.values.map(function(F){return v(F)}));_=p.filter(function(F){return!E.hasKey(t.values?v(F):F)}).concat(t.values?y:y.map(function(F){return v(F)}));break;case"delete":var D=new ge().addKeys(m.keys);_=p.filter(function(F){return!D.hasKey(t.values?v(F):F)});break;case"deleteRange":var K=m.range;_=p.filter(function(F){return!nr(v(F),K)})}return _},e);return w===e?e:(w.sort(function(p,m){return J(l(p),l(m))||J(v(p),v(m))}),t.limit&&t.limit<1/0&&(w.length>t.limit?w.length=t.limit:e.length===t.limit&&w.length<t.limit&&(i.dirty=!0)),a?Object.freeze(w):w)}function Vr(e,t){return J(e.lower,t.lower)===0&&J(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Wi(e,t){return function(n,r,i,a){if(n===void 0)return r!==void 0?-1:0;if(r===void 0)return 1;if((r=J(n,r))===0){if(i&&a)return 0;if(i)return 1;if(a)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,a){if(n===void 0)return r!==void 0?1:0;if(r===void 0)return-1;if((r=J(n,r))===0){if(i&&a)return 0;if(i)return-1;if(a)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Xi(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,a;e.subscribers.delete(n),e.subscribers.size===0&&(i=e,a=t,setTimeout(function(){i.subscribers.size===0&&me(a,i)},3e3))})}var Qi={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return s(s({},e),{transaction:function(n,r,i){var a,o,c=e.transaction(n,r,i);return r==="readwrite"&&(o=(a=new AbortController).signal,i=function(h){return function(){if(a.abort(),r==="readwrite"){for(var v=new Set,g=0,l=n;g<l.length;g++){var w=l[g],p=nt["idb://".concat(t,"/").concat(w)];if(p){var m=e.table(w),_=p.optimisticOps.filter(function(F){return F.trans===c});if(c._explicit&&h&&c.mutatedParts)for(var y=0,k=Object.values(p.queries.query);y<k.length;y++)for(var A=0,S=(j=k[y]).slice();A<S.length;A++)Qn((E=S[A]).obsSet,c.mutatedParts)&&(me(j,E),E.subscribers.forEach(function(F){return v.add(F)}));else if(0<_.length){p.optimisticOps=p.optimisticOps.filter(function(F){return F.trans!==c});for(var O=0,P=Object.values(p.queries.query);O<P.length;O++)for(var j,E,D,K=0,R=(j=P[O]).slice();K<R.length;K++)(E=R[K]).res!=null&&c.mutatedParts&&(h&&!E.dirty?(D=Object.isFrozen(E.res),D=Gr(E.res,E.req,_,m,E,D),E.dirty?(me(j,E),E.subscribers.forEach(function(F){return v.add(F)})):D!==E.res&&(E.res=D,E.promise=M.resolve({result:D}))):(E.dirty&&me(j,E),E.subscribers.forEach(function(F){return v.add(F)})))}}}v.forEach(function(F){return F()})}}},c.addEventListener("abort",i(!1),{signal:o}),c.addEventListener("error",i(!1),{signal:o}),c.addEventListener("complete",i(!0),{signal:o})),c},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return s(s({},r),{mutate:function(a){var o=q.trans;if(i.outbound||o.db._options.cache==="disabled"||o.explicit||o.idbtrans.mode!=="readwrite")return r.mutate(a);var c=nt["idb://".concat(t,"/").concat(n)];return c?(o=r.mutate(a),a.type!=="add"&&a.type!=="put"||!(50<=a.values.length||tr(i,a).some(function(h){return h==null}))?(c.optimisticOps.push(a),a.mutatedParts&&un(a.mutatedParts),o.then(function(h){0<h.numFailures&&(me(c.optimisticOps,a),(h=zr(0,a,h))&&c.optimisticOps.push(h),a.mutatedParts&&un(a.mutatedParts))}),o.catch(function(){me(c.optimisticOps,a),a.mutatedParts&&un(a.mutatedParts)})):o.then(function(h){var v=zr(0,s(s({},a),{values:a.values.map(function(g,l){var w;return h.failures[l]?g:(g=(w=i.keyPath)!==null&&w!==void 0&&w.includes(".")?je(g):s({},g),z(g,i.keyPath,h.results[l]),g)})}),h);c.optimisticOps.push(v),queueMicrotask(function(){return a.mutatedParts&&un(a.mutatedParts)})}),o):r.mutate(a)},query:function(a){if(!Ur(q,r)||!Hr("query",a))return r.query(a);var o=((v=q.trans)===null||v===void 0?void 0:v.db._options.cache)==="immutable",l=q,c=l.requery,h=l.signal,v=function(m,_,y,k){var A=nt["idb://".concat(m,"/").concat(_)];if(!A)return[];if(!(_=A.queries[y]))return[null,!1,A,null];var S=_[(k.query?k.query.index.name:null)||""];if(!S)return[null,!1,A,null];switch(y){case"query":var O=S.find(function(P){return P.req.limit===k.limit&&P.req.values===k.values&&Vr(P.req.query.range,k.query.range)});return O?[O,!0,A,S]:[S.find(function(P){return("limit"in P.req?P.req.limit:1/0)>=k.limit&&(!k.values||P.req.values)&&Wi(P.req.query.range,k.query.range)}),!1,A,S];case"count":return O=S.find(function(P){return Vr(P.req.query.range,k.query.range)}),[O,!!O,A,S]}}(t,n,"query",a),g=v[0],l=v[1],w=v[2],p=v[3];return g&&l?g.obsSet=a.obsSet:(l=r.query(a).then(function(m){var _=m.result;if(g&&(g.res=_),o){for(var y=0,k=_.length;y<k;++y)Object.freeze(_[y]);Object.freeze(_)}else m.result=je(_);return m}).catch(function(m){return p&&g&&me(p,g),Promise.reject(m)}),g={obsSet:a.obsSet,promise:l,subscribers:new Set,type:"query",req:a,dirty:!1},p?p.push(g):(p=[g],(w=w||(nt["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[a.query.index.name||""]=p)),Xi(g,p,c,h),g.promise.then(function(m){return{result:Gr(m.result,a,w==null?void 0:w.optimisticOps,r,g,o)}})}})}})}};function ln(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var Me=(fe.prototype.version=function(e){if(isNaN(e)||e<.1)throw new N.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new N.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(qi),n.stores({}),this._state.autoSchema=!1,n)},fe.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||q.letThrough||this._vip)?e():new M(function(n,r){if(t._state.openComplete)return r(new N.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new N.DatabaseClosed);t.open().catch(ae)}t._state.dbReadyPromise.then(n,r)}).then(e)},fe.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),e=this._middlewares[t]||(this._middlewares[t]=[]),e.push({stack:t,create:n,level:r??10,name:i}),e.sort(function(a,o){return a.level-o.level}),this},fe.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},fe.prototype.open=function(){var e=this;return $e(Ne,function(){return Ui(e)})},fe.prototype._close=function(){var e=this._state,t=vt.indexOf(this);if(0<=t&&vt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new M(function(n){e.dbReadyResolve=n}),e.openCanceller=new M(function(n,r){e.cancelOpen=r}))},fe.prototype.close=function(n){var t=(n===void 0?{disableAutoOpen:!0}:n).disableAutoOpen,n=this._state;t?(n.isBeingOpened&&n.cancelOpen(new N.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new N.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},fe.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=0<arguments.length&&typeof arguments[0]!="object",r=this._state;return new M(function(i,a){function o(){t.close(e);var c=t._deps.indexedDB.deleteDatabase(t.name);c.onsuccess=ue(function(){var h,v,g;h=t._deps,v=t.name,g=h.indexedDB,h=h.IDBKeyRange,Vn(g)||v===Xt||Gn(g,h).delete(v).catch(ae),i()}),c.onerror=De(a),c.onblocked=t._fireOnBlocked}if(n)throw new N.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},fe.prototype.backendDB=function(){return this.idbdb},fe.prototype.isOpen=function(){return this.idbdb!==null},fe.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},fe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},fe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(fe.prototype,"tables",{get:function(){var e=this;return C(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),fe.prototype.transaction=function(){var e=(function(t,n,r){var i=arguments.length;if(i<2)throw new N.InvalidArgument("Too few arguments");for(var a=new Array(i-1);--i;)a[i-1]=arguments[i];return r=a.pop(),[t,ct(a),r]}).apply(this,arguments);return this._transaction.apply(this,e)},fe.prototype._transaction=function(e,t,n){var r=this,i=q.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);var a,o,c=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(o=t.map(function(v){if(v=v instanceof r.Table?v.name:v,typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),e=="r"||e===Kn)a=Kn;else{if(e!="rw"&&e!=Mn)throw new N.InvalidArgument("Invalid transaction mode: "+e);a=Mn}if(i){if(i.mode===Kn&&a===Mn){if(!c)throw new N.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach(function(v){if(i&&i.storeNames.indexOf(v)===-1){if(!c)throw new N.SubTransaction("Table "+v+" not included in parent transaction.");i=null}}),c&&i&&!i.active&&(i=null)}}catch(v){return i?i._promise(null,function(g,l){l(v)}):le(v)}var h=(function v(g,l,w,p,m){return M.resolve().then(function(){var _=q.transless||q,y=g._createTransaction(l,w,g._dbSchema,p);if(y.explicit=!0,_={trans:y,transless:_},p)y.idbtrans=p.idbtrans;else try{y.create(),y.idbtrans._explicit=!0,g._state.PR1398_maxLoop=3}catch(S){return S.name===kn.InvalidState&&g.isOpen()&&0<--g._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),g.close({disableAutoOpen:!1}),g.open().then(function(){return v(g,l,w,null,m)})):le(S)}var k,A=ft(m);return A&&pt(),_=M.follow(function(){var S;(k=m.call(y,y))&&(A?(S=He.bind(null,null),k.then(S,S)):typeof k.next=="function"&&typeof k.throw=="function"&&(k=$n(k)))},_),(k&&typeof k.then=="function"?M.resolve(k).then(function(S){return y.active?S:le(new N.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_.then(function(){return k})).then(function(S){return p&&y._resolve(),y._completion.then(function(){return S})}).catch(function(S){return y._reject(S),le(S)})})}).bind(null,this,a,o,i,n);return i?i._promise(a,h,"lock"):q.trans?$e(q.transless,function(){return r._whenReady(h)}):this._whenReady(h)},fe.prototype.table=function(e){if(!U(this._allTables,e))throw new N.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},fe);function fe(e,t){var n=this;this._middlewares={},this.verno=0;var r=fe.dependencies;this._options=t=s({addons:fe.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,a,o,c,h,v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};v.dbReadyPromise=new M(function(l){v.dbReadyResolve=l}),v.openCanceller=new M(function(l,w){v.cancelOpen=w}),this._state=v,this.name=e,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[An,ae]}),this.on.ready.subscribe=ne(this.on.ready.subscribe,function(l){return function(w,p){fe.vip(function(){var m,_=n._state;_.openComplete?(_.dbOpenError||M.resolve().then(w),p&&l(w)):_.onReadyBeingFired?(_.onReadyBeingFired.push(w),p&&l(w)):(l(w),m=n,p||l(function y(){m.on.ready.unsubscribe(w),m.on.ready.unsubscribe(y)}))})}}),this.Collection=(i=this,Pt(Ri.prototype,function(k,y){this.db=i;var p=kr,m=null;if(y)try{p=y()}catch(A){m=A}var _=k._ctx,y=_.table,k=y.hook.reading.fire;this._ctx={table:y,index:_.index,isPrimKey:!_.index||y.schema.primKey.keyPath&&_.index===y.schema.primKey.name,range:p,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:_.or,valueMapper:k!==xt?k:null}})),this.Table=(a=this,Pt(Cr.prototype,function(l,w,p){this.db=a,this._tx=p,this.name=l,this.schema=w,this.hook=a._allTables[l]?a._allTables[l].hook:Ct(null,{creating:[xi,ae],reading:[wi,xt],updating:[Ai,ae],deleting:[ki,ae]})})),this.Transaction=(o=this,Pt(Mi.prototype,function(l,w,p,m,_){var y=this;this.db=o,this.mode=l,this.storeNames=w,this.schema=p,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(k,A){y._resolve=k,y._reject=A}),this._completion.then(function(){y.active=!1,y.on.complete.fire()},function(k){var A=y.active;return y.active=!1,y.on.error.fire(k),y.parent?y.parent._reject(k):A&&y.idbtrans&&y.idbtrans.abort(),le(k)})})),this.Version=(c=this,Pt(Ni.prototype,function(l){this.db=c,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(h=this,Pt(jr.prototype,function(l,w,p){if(this.db=h,this._ctx={table:l,index:w===":id"?null:w,or:p},this._cmp=this._ascending=J,this._descending=function(m,_){return J(_,m)},this._max=function(m,_){return 0<J(m,_)?m:_},this._min=function(m,_){return J(m,_)<0?m:_},this._IDBKeyRange=h._deps.IDBKeyRange,!this._IDBKeyRange)throw new N.MissingAPI})),this.on("versionchange",function(l){0<l.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(l){!l.newVersion||l.newVersion<l.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(l.oldVersion/10))}),this._maxKey=jt(t.IDBKeyRange),this._createTransaction=function(l,w,p,m){return new n.Transaction(l,w,p,n._options.chromeTransactionDurability,m)},this._fireOnBlocked=function(l){n.on("blocked").fire(l),vt.filter(function(w){return w.name===n.name&&w!==n&&!w._state.vcFired}).map(function(w){return w.on("versionchange").fire(l)})},this.use(Gi),this.use(Qi),this.use(Vi),this.use(Hi),this.use(zi);var g=new Proxy(this,{get:function(l,w,p){if(w==="_vip")return!0;if(w==="table")return function(_){return ln(n.table(_),g)};var m=Reflect.get(l,w,p);return m instanceof Cr?ln(m,g):w==="tables"?m.map(function(_){return ln(_,g)}):w==="_createTransaction"?function(){return ln(m.apply(this,arguments),g)}:m}});this.vip=g,r.forEach(function(l){return l(n)})}var fn,Ce=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Zi=(rr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:n})},rr.prototype[Ce]=function(){return this},rr);function rr(e){this._subscribe=e}try{fn={indexedDB:b.indexedDB||b.mozIndexedDB||b.webkitIndexedDB||b.msIndexedDB,IDBKeyRange:b.IDBKeyRange||b.webkitIDBKeyRange}}catch{fn={indexedDB:null,IDBKeyRange:null}}function Wr(e){var t,n=!1,r=new Zi(function(i){var a=ft(e),o,c=!1,h={},v={},g={get closed(){return c},unsubscribe:function(){c||(c=!0,o&&o.abort(),l&&Ve.storagemutated.unsubscribe(p))}};i.start&&i.start(g);var l=!1,w=function(){return jn(m)},p=function(_){sn(h,_),Qn(v,h)&&w()},m=function(){var _,y,k;!c&&fn.indexedDB&&(h={},_={},o&&o.abort(),o=new AbortController,k=function(A){var S=dt();try{a&&pt();var O=Ue(e,A);return O=a?O.finally(He):O}finally{S&&ht()}}(y={subscr:_,signal:o.signal,requery:w,querier:e,trans:null}),Promise.resolve(k).then(function(A){n=!0,t=A,c||y.signal.aborted||(h={},function(S){for(var O in S)if(U(S,O))return;return 1}(v=_)||l||(Ve(Rt,p),l=!0),jn(function(){return!c&&i.next&&i.next(A)}))},function(A){n=!1,["DatabaseClosedError","AbortError"].includes(A==null?void 0:A.name)||c||jn(function(){c||i.error&&i.error(A)})}))};return setTimeout(w,0),g});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var rt=Me;function ir(e){var t=We;try{We=!0,Ve.storagemutated.fire(e),Jn(e,!0)}finally{We=t}}$(rt,s(s({},Tt),{delete:function(e){return new rt(e,{addons:[]}).delete()},exists:function(e){return new rt(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return t=rt.dependencies,n=t.indexedDB,t=t.IDBKeyRange,(Vn(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Xt})}):Gn(n,t).toCollection().primaryKeys()).then(e)}catch{return le(new N.MissingAPI)}var t,n},defineClass:function(){return function(e){T(this,e)}},ignoreTransaction:function(e){return q.trans?$e(q.transless,e):e()},vip:Wn,async:function(e){return function(){try{var t=$n(e.apply(this,arguments));return t&&typeof t.then=="function"?t:M.resolve(t)}catch(n){return le(n)}}},spawn:function(e,t,n){try{var r=$n(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:M.resolve(r)}catch(i){return le(i)}},currentTransaction:{get:function(){return q.trans||null}},waitFor:function(e,t){return t=M.resolve(typeof e=="function"?rt.ignoreTransaction(e):e).timeout(t||6e4),q.trans?q.trans.waitFor(t):t},Promise:M,debug:{get:function(){return Ee},set:function(e){yr(e)}},derive:re,extend:T,props:$,override:ne,Events:Ct,on:Ve,liveQuery:Wr,extendObservabilitySet:sn,getByKeyPath:Y,setByKeyPath:z,delByKeyPath:function(e,t){typeof t=="string"?z(e,t,void 0):"length"in t&&[].map.call(t,function(n){z(e,n,void 0)})},shallowClone:ie,deepClone:je,getObjectDiff:er,cmp:J,asap:ve,minKey:-1/0,addons:[],connections:vt,errnames:kn,dependencies:fn,cache:nt,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),rt.maxKey=jt(rt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ve(Rt,function(e){We||(e=new CustomEvent(qn,{detail:e}),We=!0,dispatchEvent(e),We=!1)}),addEventListener(qn,function(e){e=e.detail,We||ir(e)}));var gt,We=!1,Xr=function(){};return typeof BroadcastChannel<"u"&&((Xr=function(){(gt=new BroadcastChannel(qn)).onmessage=function(e){return e.data&&ir(e.data)}})(),typeof gt.unref=="function"&&gt.unref(),Ve(Rt,function(e){We||gt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Me.disableBfCache&&e.persisted){Ee&&console.debug("Dexie: handling persisted pagehide"),gt!=null&&gt.close();for(var t=0,n=vt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Me.disableBfCache&&e.persisted&&(Ee&&console.debug("Dexie: handling persisted pageshow"),Xr(),ir({all:new ge(-1/0,[[]])}))})),M.rejectionMapper=function(e,t){return!e||e instanceof qe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!vr[e.name]?e:(t=new vr[e.name](t||e.message,e),"stack"in e&&L(t,"stack",{get:function(){return this.inner.stack}}),t)},yr(Ee),s(Me,Object.freeze({__proto__:null,Dexie:Me,liveQuery:Wr,Entity:Ar,cmp:J,PropModification:Et,replacePrefix:function(e,t){return new Et({replacePrefix:[e,t]})},add:function(e){return new Et({add:e})},remove:function(e){return new Et({remove:e})},default:Me,RangeSet:ge,mergeRanges:Bt,rangesOverlap:Fr}),{default:Me}),Me})})(bi);var eo=bi.exports;const pr=$a(eo),si=Symbol.for("Dexie"),_n=globalThis[si]||(globalThis[si]=pr);if(pr.semVer!==_n.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pr.semVer} and ${_n.semVer}`);const{liveQuery:po,mergeRanges:vo,rangesOverlap:yo,RangeSet:mo,cmp:go,Entity:bo,PropModification:_o,replacePrefix:wo,add:xo,remove:ko}=_n;function Ao(){const d=ut("snackbar"),f=ut("qrButtonClick"),u=ut("uploadButtonClick"),s=ut("downloadButtonClick"),x=ut("title");return{snackbar:d,qrButtonClick:f,uploadButtonClick:u,downloadButtonClick:s,title:x}}const to="1yI5jxYxfCLxibPrqLVBAe9kpX4e9nWNGTMGqtU00GUAfqsocqLnH78uL8ouiEhX";async function So(d,f=!1){d.startsWith("/")||(d="/"+d);const u=`https://www.thebluealliance.com/api/v3${d}`,s={"X-TBA-Auth-Key":to};if(!f){const I=await wn.eTagResponses.where("url").equals(d).first();I&&(s["If-None-Match"]=I.etag)}console.debug(`Requesting TBA @ ${u}`);const x=await fetch(u,{headers:s});if(x.status===304)return console.debug("Not Modified; not attempting to read data"),!1;const b=x.headers.get("ETag"),C=x.json();return b&&await wn.eTagResponses.put({etag:b,url:d}),C}const Oo=Sa("navigator"in globalThis&&"onLine"in navigator?navigator.onLine:!1,d=>{"addEventListener"in globalThis?(addEventListener("online",f=>{console.log("Online event",f),d(!0)}),addEventListener("offline",f=>{console.log("Offline event",f),d(!1)})):console.warn("Was unable to add an event listener for deviceOnline. If you see this warning while building/deploying sveltekit or in the nodejs console, everything should be ok, but if you see this in the browser console then the app will not be able to be reactive to the device going online/offline.")});function Co(d){if(!d)return"";switch(d.comp_level){case"qm":return`Qualifying Match ${String(d.match_number).padStart(2,"0")}`;case"qf":return`Quarterfinal ${d.set_number} Match ${d.match_number}`;case"sf":return`Semifinal ${d.set_number} Match ${d.match_number}`;case"f":return`Final ${d.set_number} Match ${d.match_number}`;default:return""}}const wn=new _n("AEMDashboard");wn.version(9).stores({csv2024:"[eventkey+role+matchNum], [eventkey+teamNum]",csv2025:"[eventkey+role+matchNum], [eventkey+teamNum], eventkey",events:"key, year",matches:"key, event_key, [event_key+match_number]",eTagResponses:"&url",current_event:"key",authenticated:"++"});"window"in globalThis&&(window.db=wn);export{ho as B,ja as M,Za as R,Ha as S,Ra as _,It as a,hn as b,Ta as c,wn as d,La as e,sr as f,Ao as g,ur as h,uo as i,co as j,Na as k,dr as l,fo as m,lo as n,So as o,Ba as p,po as q,ao as r,fr as s,qa as t,Be as u,Ea as v,oo as w,so as x,Co as y,Oo as z};
