import{V as Ii,X as Di,a1 as Bi,e as Rn,as as Ti,h as De,a3 as Sn,W as yi,aM as kr,aw as Ko,ax as Uo,$ as Cn,_ as mi,R as No,a2 as Lo,a0 as Ho,a4 as zo,u as Yo,i as Go,B as Vo,aN as Wo,E as Xo,aO as Qo,aP as Jo,aQ as Zo,l as Yt,aR as $o,p as Mi,f as mt,a as ji,c as ea,r as ta,t as xr,g as pt,v as yt,y as na,m as vi,s as gi}from"./oK9KA-Q3.js";import{f as ra,i as ia,g as oa,j as aa,d as ua,k as sa,n as ca,p as la,q as fa,o as da,c as St,a as ze,v as ha,t as qi}from"./fWNZ1HDm.js";import{a as ke,d as Sr,b as On,r as Ki,p as bi,c as pa,s as ya}from"./BHoOlQn2.js";function Or(o,t,...r){var a=o,c=Rn,f;Ii(()=>{c!==(c=t())&&(f&&(Ti(f),f=null),f=Bi(()=>c(a,...r)))},Di),De&&(a=Sn)}function wi(o,t,r,a,c,f){let d=De;De&&yi();var k,R,C=null;De&&Sn.nodeType===1&&(C=Sn,yi());var M=De?Sn:o,F;Ii(()=>{const G=t()||null;var W=G==="svg"?kr:null;G!==k&&(F&&(G===null?Lo(F,()=>{F=null,R=null}):G===R?Ho(F):Ti(F)),G&&G!==R&&(F=Bi(()=>{if(C=De?C:W?document.createElementNS(W,G):document.createElement(G),ra(C,C),a){De&&ia(G)&&C.append(document.createComment(""));var N=De?Ko(C):C.appendChild(Uo());De&&(N===null?Cn(!1):mi(N)),a(C,N)}No.nodes_end=C,M.before(C)})),k=G,k&&(R=k))},Di),d&&(Cn(!0),mi(M))}function Ar(o,t,r){zo(()=>{var a=Yo(()=>t(o,r==null?void 0:r())||{});if(r&&(a!=null&&a.update)){var c=!1,f={};Go(()=>{var d=r();Vo(d),c&&Wo(f,d)&&(f=d,a.update(d))}),c=!0}if(a!=null&&a.destroy)return()=>a.destroy()})}function Ui(o){var t,r,a="";if(typeof o=="string"||typeof o=="number")a+=o;else if(typeof o=="object")if(Array.isArray(o)){var c=o.length;for(t=0;t<c;t++)o[t]&&(r=Ui(o[t]))&&(a&&(a+=" "),a+=r)}else for(r in o)o[r]&&(a&&(a+=" "),a+=r);return a}function ma(){for(var o,t,r=0,a="",c=arguments.length;r<c;r++)(o=arguments[r])&&(t=Ui(o))&&(a&&(a+=" "),a+=t);return a}function va(o){return typeof o=="object"?ma(o):o??""}function qu(o){if(De){var t=!1,r=()=>{if(!t){if(t=!0,o.hasAttribute("value")){var a=o.value;Rr(o,"value",null),o.value=a}if(o.hasAttribute("checked")){var c=o.checked;Rr(o,"checked",null),o.checked=c}}};o.__on_r=r,Zo(r),fa()}}function ga(o,t){t?o.hasAttribute("selected")||o.setAttribute("selected",""):o.removeAttribute("selected")}function Rr(o,t,r,a){var c=o.__attributes??(o.__attributes={});De&&(c[t]=o.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&o.nodeName==="LINK")||c[t]!==(c[t]=r)&&(t==="style"&&"__styles"in o&&(o.__styles={}),t==="loading"&&(o[Qo]=r),r==null?o.removeAttribute(t):typeof r!="string"&&Ni(o).includes(t)?o[t]=r:o.setAttribute(t,r))}function Er(o,t,r,a,c=!1,f=!1,d=!1){let k=De&&f;k&&Cn(!1);var R=t||{},C=o.tagName==="OPTION";for(var M in t)M in r||(r[M]=null);r.class&&(r.class=va(r.class));var F=Ni(o),G=o.__attributes??(o.__attributes={});for(const Y in r){let ne=r[Y];if(C&&Y==="value"&&ne==null){o.value=o.__value="",R[Y]=ne;continue}var W=R[Y];if(ne!==W){R[Y]=ne;var N=Y[0]+Y[1];if(N!=="$$"){if(N==="on"){const $={},he="$$"+Y;let Q=Y.slice(2);var X=la(Q);if(oa(Q)&&(Q=Q.slice(0,-7),$.capture=!0),!X&&W){if(ne!=null)continue;o.removeEventListener(Q,R[he],$),R[he]=null}if(ne!=null)if(X)o[`__${Q}`]=ne,ua([Q]);else{let V=function(ie){R[Y].call(this,ie)};R[he]=aa(Q,o,V,$)}else X&&(o[`__${Q}`]=void 0)}else if(Y==="style"&&ne!=null)o.style.cssText=ne+"";else if(Y==="autofocus")sa(o,!!ne);else if(!f&&(Y==="__value"||Y==="value"&&ne!=null))o.value=o.__value=ne;else if(Y==="selected"&&C)ga(o,ne);else{var oe=Y;c||(oe=ca(oe));var se=oe==="defaultValue"||oe==="defaultChecked";if(ne==null&&!f&&!se)if(G[Y]=null,oe==="value"||oe==="checked"){let $=o;const he=t===void 0;if(oe==="value"){let Q=$.defaultValue;$.removeAttribute(oe),$.defaultValue=Q,$.value=$.__value=he?Q:null}else{let Q=$.defaultChecked;$.removeAttribute(oe),$.defaultChecked=Q,$.checked=he?Q:!1}}else o.removeAttribute(Y);else se||F.includes(oe)&&(f||typeof ne!="string")?o[oe]=ne:typeof ne!="function"&&Rr(o,oe,ne)}Y==="style"&&"__styles"in o&&(o.__styles={})}}}return k&&Cn(!0),R}var _i=new Map;function Ni(o){var t=_i.get(o.nodeName);if(t)return t;_i.set(o.nodeName,t=[]);for(var r,a=o,c=Element.prototype;c!==a;){r=Jo(a);for(var f in r)r[f].set&&t.push(f);a=Xo(a)}return t}var xi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ba(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Li={exports:{}};(function(o,t){(function(r,a){o.exports=a()})(xi,function(){var r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,u){i.__proto__=u}||function(i,u){for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&(i[s]=u[s])})(e,n)},a=function(){return(a=Object.assign||function(e){for(var n,i=1,u=arguments.length;i<u;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)};function c(e,n,i){for(var u,s=0,l=n.length;s<l;s++)!u&&s in n||((u=u||Array.prototype.slice.call(n,0,s))[s]=n[s]);return e.concat(u||Array.prototype.slice.call(n))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:xi,d=Object.keys,k=Array.isArray;function R(e,n){return typeof n!="object"||d(n).forEach(function(i){e[i]=n[i]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var C=Object.getPrototypeOf,M={}.hasOwnProperty;function F(e,n){return M.call(e,n)}function G(e,n){typeof n=="function"&&(n=n(C(e))),(typeof Reflect>"u"?d:Reflect.ownKeys)(n).forEach(function(i){N(e,i,n[i])})}var W=Object.defineProperty;function N(e,n,i,u){W(e,n,R(i&&F(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},u))}function X(e){return{from:function(n){return e.prototype=Object.create(n.prototype),N(e.prototype,"constructor",e),{extend:G.bind(null,e.prototype)}}}}var oe=Object.getOwnPropertyDescriptor,se=[].slice;function Y(e,n,i){return se.call(e,n,i)}function ne(e,n){return n(e)}function $(e){if(!e)throw new Error("Assertion Failed")}function he(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function Q(e,n){if(typeof n=="string"&&F(e,n))return e[n];if(!n)return e;if(typeof n!="string"){for(var i=[],u=0,s=n.length;u<s;++u){var l=Q(e,n[u]);i.push(l)}return i}var h=n.indexOf(".");if(h!==-1){var p=e[n.substr(0,h)];return p==null?void 0:Q(p,n.substr(h+1))}}function V(e,n,i){if(e&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof n!="string"&&"length"in n){$(typeof i!="string"&&"length"in i);for(var u=0,s=n.length;u<s;++u)V(e,n[u],i[u])}else{var l,h,p=n.indexOf(".");p!==-1?(l=n.substr(0,p),(h=n.substr(p+1))===""?i===void 0?k(e)&&!isNaN(parseInt(l))?e.splice(l,1):delete e[l]:e[l]=i:V(p=!(p=e[l])||!F(e,l)?e[l]={}:p,h,i)):i===void 0?k(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=i}}function ie(e){var n,i={};for(n in e)F(e,n)&&(i[n]=e[n]);return i}var pe=[].concat;function Ge(e){return pe.apply([],e)}var it="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ge([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return f[e]}),Be=new Set(it.map(function(e){return f[e]})),Te=null;function be(e){return Te=new WeakMap,e=function n(i){if(!i||typeof i!="object")return i;var u=Te.get(i);if(u)return u;if(k(i)){u=[],Te.set(i,u);for(var s=0,l=i.length;s<l;++s)u.push(n(i[s]))}else if(Be.has(i.constructor))u=i;else{var h,p=C(i);for(h in u=p===Object.prototype?{}:Object.create(p),Te.set(i,u),i)F(i,h)&&(u[h]=n(i[h]))}return u}(e),Te=null,e}var qn={}.toString;function Ct(e){return qn.call(e).slice(8,-1)}var Ft=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ye=typeof Ft=="symbol"?function(e){var n;return e!=null&&(n=e[Ft])&&n.apply(e)}:function(){return null};function we(e,n){return n=e.indexOf(n),0<=n&&e.splice(n,1),0<=n}var Fe={};function Oe(e){var n,i,u,s;if(arguments.length===1){if(k(e))return e.slice();if(this===Fe&&typeof e=="string")return[e];if(s=ye(e)){for(i=[];!(u=s.next()).done;)i.push(u.value);return i}if(e==null)return[e];if(typeof(n=e.length)!="number")return[e];for(i=new Array(n);n--;)i[n]=e[n];return i}for(n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];return i}var gt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Dt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Dt),Vt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ve(e,n){this.name=e,this.message=n}function Wt(e,n){return e+". Errors: "+Object.keys(n).map(function(i){return n[i].toString()}).filter(function(i,u,s){return s.indexOf(i)===u}).join(`
`)}function We(e,n,i,u){this.failures=n,this.failedKeys=u,this.successCount=i,this.message=Wt(e,n)}function Xe(e,n){this.name="BulkError",this.failures=Object.keys(n).map(function(i){return n[i]}),this.failuresByPos=n,this.message=Wt(e,this.failures)}X(Ve).from(Error).extend({toString:function(){return this.name+": "+this.message}}),X(We).from(Ve),X(Xe).from(Ve);var Kn=Pe.reduce(function(e,n){return e[n]=n+"Error",e},{}),uo=Ve,z=Pe.reduce(function(e,n){var i=n+"Error";function u(s,l){this.name=i,s?typeof s=="string"?(this.message="".concat(s).concat(l?`
 `+l:""),this.inner=l||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=Vt[n]||i,this.inner=null)}return X(u).from(uo),e[n]=u,e},{});z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError;var Tr=Dt.reduce(function(e,n){return e[n+"Error"]=z[n],e},{}),Xt=Pe.reduce(function(e,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(e[n+"Error"]=z[n]),e},{});function ue(){}function Pt(e){return e}function so(e,n){return e==null||e===Pt?n:function(i){return n(e(i))}}function rt(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function co(e,n){return e===ue?n:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var u=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var l=n.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?rt(u,this.onsuccess):u),s&&(this.onerror=this.onerror?rt(s,this.onerror):s),l!==void 0?l:i}}function lo(e,n){return e===ue?n:function(){e.apply(this,arguments);var i=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?rt(i,this.onsuccess):i),u&&(this.onerror=this.onerror?rt(u,this.onerror):u)}}function fo(e,n){return e===ue?n:function(i){var u=e.apply(this,arguments);R(i,u);var s=this.onsuccess,l=this.onerror;return this.onsuccess=null,this.onerror=null,i=n.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?rt(s,this.onsuccess):s),l&&(this.onerror=this.onerror?rt(l,this.onerror):l),u===void 0?i===void 0?void 0:i:R(u,i)}}function ho(e,n){return e===ue?n:function(){return n.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Un(e,n){return e===ue?n:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var u=this,s=arguments.length,l=new Array(s);s--;)l[s]=arguments[s];return i.then(function(){return n.apply(u,l)})}return n.apply(this,arguments)}}Xt.ModifyError=We,Xt.DexieError=Ve,Xt.BulkError=Xe;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Mr(e){Me=e}var It={},jr=100,it=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,C(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,C(n),e]}(),Dt=it[0],Pe=it[1],it=it[2],Pe=Pe&&Pe.then,ot=Dt&&Dt.constructor,Nn=!!it,Bt=function(e,n){Tt.push([e,n]),Qt&&(queueMicrotask(yo),Qt=!1)},Ln=!0,Qt=!0,at=[],Jt=[],Hn=Pt,Qe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ue,pgp:!1,env:{},finalize:ue},H=Qe,Tt=[],ut=0,Zt=[];function U(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=H;if(typeof e!="function"){if(e!==It)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Yn(this,this._value))}this._state=null,this._value=null,++n.ref,function i(u,s){try{s(function(l){if(u._state===null){if(l===u)throw new TypeError("A promise cannot be resolved with itself.");var h=u._lib&&bt();l&&typeof l.then=="function"?i(u,function(p,m){l instanceof U?l._then(p,m):l.then(p,m)}):(u._state=!0,u._value=l,Kr(u)),h&&wt()}},Yn.bind(null,u))}catch(l){Yn(u,l)}}(this,e)}var zn={get:function(){var e=H,n=nn;function i(u,s){var l=this,h=!e.global&&(e!==H||n!==nn),p=h&&!Ze(),m=new U(function(g,_){Gn(l,new qr(Nr(u,e,h,p),Nr(s,e,h,p),g,_,e))});return this._consoleTask&&(m._consoleTask=this._consoleTask),m}return i.prototype=It,i},set:function(e){N(this,"then",e&&e.prototype===It?zn:{get:function(){return e},set:zn.set})}};function qr(e,n,i,u,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.resolve=i,this.reject=u,this.psd=s}function Yn(e,n){var i,u;Jt.push(n),e._state===null&&(i=e._lib&&bt(),n=Hn(n),e._state=!1,e._value=n,u=e,at.some(function(s){return s._value===u._value})||at.push(u),Kr(e),i&&wt())}function Kr(e){var n=e._listeners;e._listeners=[];for(var i=0,u=n.length;i<u;++i)Gn(e,n[i]);var s=e._PSD;--s.ref||s.finalize(),ut===0&&(++ut,Bt(function(){--ut==0&&Vn()},[]))}function Gn(e,n){if(e._state!==null){var i=e._state?n.onFulfilled:n.onRejected;if(i===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++ut,Bt(po,[i,e,n])}else e._listeners.push(n)}function po(e,n,i){try{var u,s=n._value;!n._state&&Jt.length&&(Jt=[]),u=Me&&n._consoleTask?n._consoleTask.run(function(){return e(s)}):e(s),n._state||Jt.indexOf(s)!==-1||function(l){for(var h=at.length;h;)if(at[--h]._value===l._value)return at.splice(h,1)}(n),i.resolve(u)}catch(l){i.reject(l)}finally{--ut==0&&Vn(),--i.psd.ref||i.psd.finalize()}}function yo(){st(Qe,function(){bt()&&wt()})}function bt(){var e=Ln;return Qt=Ln=!1,e}function wt(){var e,n,i;do for(;0<Tt.length;)for(e=Tt,Tt=[],i=e.length,n=0;n<i;++n){var u=e[n];u[0].apply(null,u[1])}while(0<Tt.length);Qt=Ln=!0}function Vn(){var e=at;at=[],e.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var n=Zt.slice(0),i=n.length;i;)n[--i]()}function $t(e){return new U(It,!1,e)}function le(e,n){var i=H;return function(){var u=bt(),s=H;try{return $e(i,!0),e.apply(this,arguments)}catch(l){n&&n(l)}finally{$e(s,!1),u&&wt()}}}G(U.prototype,{then:zn,_then:function(e,n){Gn(this,new qr(null,null,e,n,H))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,i=arguments[1];return typeof n=="function"?this.then(null,function(u){return(u instanceof n?i:$t)(u)}):this.then(null,function(u){return(u&&u.name===n?i:$t)(u)})},finally:function(e){return this.then(function(n){return U.resolve(e()).then(function(){return n})},function(n){return U.resolve(e()).then(function(){return $t(n)})})},timeout:function(e,n){var i=this;return e<1/0?new U(function(u,s){var l=setTimeout(function(){return s(new z.Timeout(n))},e);i.then(u,s).finally(clearTimeout.bind(null,l))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Qe.env=Ur(),G(U,{all:function(){var e=Oe.apply(null,arguments).map(rn);return new U(function(n,i){e.length===0&&n([]);var u=e.length;e.forEach(function(s,l){return U.resolve(s).then(function(h){e[l]=h,--u||n(e)},i)})})},resolve:function(e){return e instanceof U?e:e&&typeof e.then=="function"?new U(function(n,i){e.then(n,i)}):new U(It,!0,e)},reject:$t,race:function(){var e=Oe.apply(null,arguments).map(rn);return new U(function(n,i){e.map(function(u){return U.resolve(u).then(n,i)})})},PSD:{get:function(){return H},set:function(e){return H=e}},totalEchoes:{get:function(){return nn}},newPSD:Je,usePSD:st,scheduler:{get:function(){return Bt},set:function(e){Bt=e}},rejectionMapper:{get:function(){return Hn},set:function(e){Hn=e}},follow:function(e,n){return new U(function(i,u){return Je(function(s,l){var h=H;h.unhandleds=[],h.onunhandled=l,h.finalize=rt(function(){var p,m=this;p=function(){m.unhandleds.length===0?s():l(m.unhandleds[0])},Zt.push(function g(){p(),Zt.splice(Zt.indexOf(g),1)}),++ut,Bt(function(){--ut==0&&Vn()},[])},h.finalize),e()},n,i,u)})}}),ot&&(ot.allSettled&&N(U,"allSettled",function(){var e=Oe.apply(null,arguments).map(rn);return new U(function(n){e.length===0&&n([]);var i=e.length,u=new Array(i);e.forEach(function(s,l){return U.resolve(s).then(function(h){return u[l]={status:"fulfilled",value:h}},function(h){return u[l]={status:"rejected",reason:h}}).then(function(){return--i||n(u)})})})}),ot.any&&typeof AggregateError<"u"&&N(U,"any",function(){var e=Oe.apply(null,arguments).map(rn);return new U(function(n,i){e.length===0&&i(new AggregateError([]));var u=e.length,s=new Array(u);e.forEach(function(l,h){return U.resolve(l).then(function(p){return n(p)},function(p){s[h]=p,--u||i(new AggregateError(s))})})})}),ot.withResolvers&&(U.withResolvers=ot.withResolvers));var me={awaits:0,echoes:0,id:0},mo=0,en=[],tn=0,nn=0,vo=0;function Je(e,n,i,u){var s=H,l=Object.create(s);return l.parent=s,l.ref=0,l.global=!1,l.id=++vo,Qe.env,l.env=Nn?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},n&&R(l,n),++s.ref,l.finalize=function(){--this.parent.ref||this.parent.finalize()},u=st(l,e,i,u),l.ref===0&&l.finalize(),u}function _t(){return me.id||(me.id=++mo),++me.awaits,me.echoes+=jr,me.id}function Ze(){return!!me.awaits&&(--me.awaits==0&&(me.id=0),me.echoes=me.awaits*jr,!0)}function rn(e){return me.echoes&&e&&e.constructor===ot?(_t(),e.then(function(n){return Ze(),n},function(n){return Ze(),fe(n)})):e}function go(){var e=en[en.length-1];en.pop(),$e(e,!1)}function $e(e,n){var i,u=H;(n?!me.echoes||tn++&&e===H:!tn||--tn&&e===H)||queueMicrotask(n?(function(s){++nn,me.echoes&&--me.echoes!=0||(me.echoes=me.awaits=me.id=0),en.push(H),$e(s,!0)}).bind(null,e):go),e!==H&&(H=e,u===Qe&&(Qe.env=Ur()),Nn&&(i=Qe.env.Promise,n=e.env,(u.global||e.global)&&(Object.defineProperty(f,"Promise",n.PromiseProp),i.all=n.all,i.race=n.race,i.resolve=n.resolve,i.reject=n.reject,n.allSettled&&(i.allSettled=n.allSettled),n.any&&(i.any=n.any))))}function Ur(){var e=f.Promise;return Nn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function st(e,n,i,u,s){var l=H;try{return $e(e,!0),n(i,u,s)}finally{$e(l,!1)}}function Nr(e,n,i,u){return typeof e!="function"?e:function(){var s=H;i&&_t(),$e(n,!0);try{return e.apply(this,arguments)}finally{$e(s,!1),u&&queueMicrotask(Ze)}}}function Wn(e){Promise===ot&&me.echoes===0?tn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pe).indexOf("[native code]")===-1&&(_t=Ze=ue);var fe=U.reject,ct="ï¿¿",Ne="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Lr="String expected.",xt=[],on="__dbnames",Xn="readonly",Qn="readwrite";function lt(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Hr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function an(e){return typeof e!="string"||/\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&&e in n&&delete(n=be(n))[e],n}}function zr(){throw z.Type()}function re(e,n){try{var i=Yr(e),u=Yr(n);if(i!==u)return i==="Array"?1:u==="Array"?-1:i==="binary"?1:u==="binary"?-1:i==="string"?1:u==="string"?-1:i==="Date"?1:u!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return n<e?1:e<n?-1:0;case"binary":return function(s,l){for(var h=s.length,p=l.length,m=h<p?h:p,g=0;g<m;++g)if(s[g]!==l[g])return s[g]<l[g]?-1:1;return h===p?0:h<p?-1:1}(Gr(e),Gr(n));case"Array":return function(s,l){for(var h=s.length,p=l.length,m=h<p?h:p,g=0;g<m;++g){var _=re(s[g],l[g]);if(_!==0)return _}return h===p?0:h<p?-1:1}(e,n)}}catch{}return NaN}function Yr(e){var n=typeof e;return n!="object"?n:ArrayBuffer.isView(e)?"binary":(e=Ct(e),e==="ArrayBuffer"?"binary":e)}function Gr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Vr=(ce.prototype._trans=function(e,n,i){var u=this._tx||H.trans,s=this.name,l=Me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function h(g,_,y){if(!y.schema[s])throw new z.NotFound("Table "+s+" not part of transaction");return n(y.idbtrans,y)}var p=bt();try{var m=u&&u.db._novip===this.db._novip?u===H.trans?u._promise(e,h,i):Je(function(){return u._promise(e,h,i)},{trans:u,transless:H.transless||H}):function g(_,y,A,v){if(_.idbdb&&(_._state.openComplete||H.letThrough||_._vip)){var w=_._createTransaction(y,A,_._dbSchema);try{w.create(),_._state.PR1398_maxLoop=3}catch(x){return x.name===Kn.InvalidState&&_.isOpen()&&0<--_._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_.close({disableAutoOpen:!1}),_.open().then(function(){return g(_,y,A,v)})):fe(x)}return w._promise(y,function(x,b){return Je(function(){return H.trans=w,v(x,b,w)})}).then(function(x){if(y==="readwrite")try{w.idbtrans.commit()}catch{}return y==="readonly"?x:w._completion.then(function(){return x})})}if(_._state.openComplete)return fe(new z.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return fe(new z.DatabaseClosed);_.open().catch(ue)}return _._state.dbReadyPromise.then(function(){return g(_,y,A,v)})}(this.db,e,[this.name],h);return l&&(m._consoleTask=l,m=m.catch(function(g){return console.trace(g),fe(g)})),m}finally{p&&wt()}},ce.prototype.get=function(e,n){var i=this;return e&&e.constructor===Object?this.where(e).first(n):e==null?fe(new z.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return i.core.get({trans:u,key:e}).then(function(s){return i.hook.reading.fire(s)})}).then(n)},ce.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(k(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=d(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(p){if(p.compound&&n.every(function(g){return 0<=p.keyPath.indexOf(g)})){for(var m=0;m<n.length;++m)if(n.indexOf(p.keyPath[m])===-1)return!1;return!0}return!1}).sort(function(p,m){return p.keyPath.length-m.keyPath.length})[0];if(i&&this.db._maxKey!==ct){var l=i.keyPath.slice(0,n.length);return this.where(l).equals(l.map(function(m){return e[m]}))}!i&&Me&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var u=this.schema.idxByName;function s(p,m){return re(p,m)===0}var h=n.reduce(function(y,m){var g=y[0],_=y[1],y=u[m],A=e[m];return[g||y,g||!y?lt(_,y&&y.multi?function(v){return v=Q(v,m),k(v)&&v.some(function(w){return s(A,w)})}:function(v){return s(A,Q(v,m))}):_]},[null,null]),l=h[0],h=h[1];return l?this.where(l.name).equals(e[l.keyPath]).filter(h):i?this.filter(h):this.where(n).equals("")},ce.prototype.filter=function(e){return this.toCollection().and(e)},ce.prototype.count=function(e){return this.toCollection().count(e)},ce.prototype.offset=function(e){return this.toCollection().offset(e)},ce.prototype.limit=function(e){return this.toCollection().limit(e)},ce.prototype.each=function(e){return this.toCollection().each(e)},ce.prototype.toArray=function(e){return this.toCollection().toArray(e)},ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ce.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,k(e)?"[".concat(e.join("+"),"]"):e))},ce.prototype.reverse=function(){return this.toCollection().reverse()},ce.prototype.mapToClass=function(e){var n,i=this.db,u=this.name;function s(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof zr&&(function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function _(){this.constructor=m}r(m,g),m.prototype=g===null?Object.create(g):(_.prototype=g.prototype,new _)}(s,n=e),Object.defineProperty(s.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),s.prototype.table=function(){return u},e=s);for(var l=new Set,h=e.prototype;h;h=C(h))Object.getOwnPropertyNames(h).forEach(function(m){return l.add(m)});function p(m){if(!m)return m;var g,_=Object.create(e.prototype);for(g in m)if(!l.has(g))try{_[g]=m[g]}catch{}return _}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},ce.prototype.defineClass=function(){return this.mapToClass(function(e){R(this,e)})},ce.prototype.add=function(e,n){var i=this,u=this.schema.primKey,s=u.auto,l=u.keyPath,h=e;return l&&s&&(h=an(l)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:n!=null?[n]:null,values:[h]})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(l)try{V(e,l,p)}catch{}return p})},ce.prototype.update=function(e,n){return typeof e!="object"||k(e)?this.where(":id").equals(e).modify(n):(e=Q(e,this.schema.primKey.keyPath),e===void 0?fe(new z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n))},ce.prototype.put=function(e,n){var i=this,u=this.schema.primKey,s=u.auto,l=u.keyPath,h=e;return l&&s&&(h=an(l)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[h],keys:n!=null?[n]:null})}).then(function(p){return p.numFailures?U.reject(p.failures[0]):p.lastResult}).then(function(p){if(l)try{V(e,l,p)}catch{}return p})},ce.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?U.reject(i.failures[0]):void 0})},ce.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Hr})}).then(function(n){return n.numFailures?U.reject(n.failures[0]):void 0})},ce.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(i){return n.core.getMany({keys:e,trans:i}).then(function(u){return u.map(function(s){return n.hook.reading.fire(s)})})})},ce.prototype.bulkAdd=function(e,n,i){var u=this,s=Array.isArray(n)?n:void 0,l=(i=i||(s?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",function(h){var g=u.schema.primKey,p=g.auto,g=g.keyPath;if(g&&s)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,g=g&&p?e.map(an(g)):e;return u.core.mutate({trans:h,type:"add",keys:s,values:g,wantResults:l}).then(function(w){var y=w.numFailures,A=w.results,v=w.lastResult,w=w.failures;if(y===0)return l?A:v;throw new Xe("".concat(u.name,".bulkAdd(): ").concat(y," of ").concat(m," operations failed"),w)})})},ce.prototype.bulkPut=function(e,n,i){var u=this,s=Array.isArray(n)?n:void 0,l=(i=i||(s?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",function(h){var g=u.schema.primKey,p=g.auto,g=g.keyPath;if(g&&s)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,g=g&&p?e.map(an(g)):e;return u.core.mutate({trans:h,type:"put",keys:s,values:g,wantResults:l}).then(function(w){var y=w.numFailures,A=w.results,v=w.lastResult,w=w.failures;if(y===0)return l?A:v;throw new Xe("".concat(u.name,".bulkPut(): ").concat(y," of ").concat(m," operations failed"),w)})})},ce.prototype.bulkUpdate=function(e){var n=this,i=this.core,u=e.map(function(h){return h.key}),s=e.map(function(h){return h.changes}),l=[];return this._trans("readwrite",function(h){return i.getMany({trans:h,keys:u,cache:"clone"}).then(function(p){var m=[],g=[];e.forEach(function(y,A){var v=y.key,w=y.changes,x=p[A];if(x){for(var b=0,E=Object.keys(w);b<E.length;b++){var S=E[b],O=w[S];if(S===n.schema.primKey.keyPath){if(re(O,v)!==0)throw new z.Constraint("Cannot update primary key in bulkUpdate()")}else V(x,S,O)}l.push(A),m.push(v),g.push(x)}});var _=m.length;return i.mutate({trans:h,type:"put",keys:m,values:g,updates:{keys:u,changeSpecs:s}}).then(function(y){var A=y.numFailures,v=y.failures;if(A===0)return _;for(var w=0,x=Object.keys(v);w<x.length;w++){var b,E=x[w],S=l[Number(E)];S!=null&&(b=v[E],delete v[E],v[S]=b)}throw new Xe("".concat(n.name,".bulkUpdate(): ").concat(A," of ").concat(_," operations failed"),v)})})})},ce.prototype.bulkDelete=function(e){var n=this,i=e.length;return this._trans("readwrite",function(u){return n.core.mutate({trans:u,type:"delete",keys:e})}).then(function(h){var s=h.numFailures,l=h.lastResult,h=h.failures;if(s===0)return l;throw new Xe("".concat(n.name,".bulkDelete(): ").concat(s," of ").concat(i," operations failed"),h)})},ce);function ce(){}function Mt(e){function n(h,p){if(p){for(var m=arguments.length,g=new Array(m-1);--m;)g[m-1]=arguments[m];return i[h].subscribe.apply(null,g),e}if(typeof h=="string")return i[h]}var i={};n.addEventType=l;for(var u=1,s=arguments.length;u<s;++u)l(arguments[u]);return n;function l(h,p,m){if(typeof h!="object"){var g;p=p||ho;var _={subscribers:[],fire:m=m||ue,subscribe:function(y){_.subscribers.indexOf(y)===-1&&(_.subscribers.push(y),_.fire=p(_.fire,y))},unsubscribe:function(y){_.subscribers=_.subscribers.filter(function(A){return A!==y}),_.fire=_.subscribers.reduce(p,m)}};return i[h]=n[h]=_}d(g=h).forEach(function(y){var A=g[y];if(k(A))l(y,g[y][0],g[y][1]);else{if(A!=="asap")throw new z.InvalidArgument("Invalid event config");var v=l(y,Pt,function(){for(var w=arguments.length,x=new Array(w);w--;)x[w]=arguments[w];v.subscribers.forEach(function(b){he(function(){b.apply(null,x)})})})}})}}function jt(e,n){return X(n).from({prototype:e}),n}function At(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function Jn(e,n){e.filter=lt(e.filter,n)}function Zn(e,n,i){var u=e.replayFilter;e.replayFilter=u?function(){return lt(u(),n())}:n,e.justLimit=i&&!u}function un(e,n){if(e.isPrimKey)return n.primaryKey;var i=n.getIndexByKeyPath(e.index);if(!i)throw new z.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return i}function Wr(e,n,i){var u=un(e,n.schema);return n.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:u,range:e.range}})}function sn(e,n,i,u){var s=e.replayFilter?lt(e.filter,e.replayFilter()):e.filter;if(e.or){var l={},h=function(p,m,g){var _,y;s&&!s(m,g,function(A){return m.stop(A)},function(A){return m.fail(A)})||((y=""+(_=m.primaryKey))=="[object ArrayBuffer]"&&(y=""+new Uint8Array(_)),F(l,y)||(l[y]=!0,n(p,m,g)))};return Promise.all([e.or._iterate(h,i),Xr(Wr(e,u,i),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return Xr(Wr(e,u,i),lt(e.algorithm,s),n,!e.keysOnly&&e.valueMapper)}function Xr(e,n,i,u){var s=le(u?function(l,h,p){return i(u(l),h,p)}:i);return e.then(function(l){if(l)return l.start(function(){var h=function(){return l.continue()};n&&!n(l,function(p){return h=p},function(p){l.stop(p),h=ue},function(p){l.fail(p),h=ue})||s(l.value,l,function(p){return h=p}),h()})})}var qt=(Qr.prototype.execute=function(e){var n=this["@@propmod"];if(n.add!==void 0){var i=n.add;if(k(i))return c(c([],k(e)?e:[],!0),i).sort();if(typeof i=="number")return(Number(e)||0)+i;if(typeof i=="bigint")try{return BigInt(e)+i}catch{return BigInt(0)+i}throw new TypeError("Invalid term ".concat(i))}if(n.remove!==void 0){var u=n.remove;if(k(u))return k(e)?e.filter(function(s){return!u.includes(s)}).sort():[];if(typeof u=="number")return Number(e)-u;if(typeof u=="bigint")try{return BigInt(e)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return i=(i=n.replacePrefix)===null||i===void 0?void 0:i[0],i&&typeof e=="string"&&e.startsWith(i)?n.replacePrefix[1]+e.substring(i.length):e},Qr);function Qr(e){this["@@propmod"]=e}var bo=(ae.prototype._read=function(e,n){var i=this._ctx;return i.error?i.table._trans(null,fe.bind(null,i.error)):i.table._trans("readonly",e).then(n)},ae.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,fe.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},ae.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=lt(n.algorithm,e)},ae.prototype._iterate=function(e,n){return sn(this._ctx,e,n,this._ctx.table.core)},ae.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&R(i,e),n._ctx=i,n},ae.prototype.raw=function(){return this._ctx.valueMapper=null,this},ae.prototype.each=function(e){var n=this._ctx;return this._read(function(i){return sn(n,e,i,n.table.core)})},ae.prototype.count=function(e){var n=this;return this._read(function(i){var u=n._ctx,s=u.table.core;if(At(u,!0))return s.count({trans:i,query:{index:un(u,s.schema),range:u.range}}).then(function(h){return Math.min(h,u.limit)});var l=0;return sn(u,function(){return++l,!1},i,s).then(function(){return l})}).then(e)},ae.prototype.sortBy=function(e,n){var i=e.split(".").reverse(),u=i[0],s=i.length-1;function l(m,g){return g?l(m[i[g]],g-1):m[u]}var h=this._ctx.dir==="next"?1:-1;function p(m,g){return re(l(m,s),l(g,s))*h}return this.toArray(function(m){return m.sort(p)}).then(n)},ae.prototype.toArray=function(e){var n=this;return this._read(function(i){var u=n._ctx;if(u.dir==="next"&&At(u,!0)&&0<u.limit){var s=u.valueMapper,l=un(u,u.table.core.schema);return u.table.core.query({trans:i,limit:u.limit,values:!0,query:{index:l,range:u.range}}).then(function(p){return p=p.result,s?p.map(s):p})}var h=[];return sn(u,function(p){return h.push(p)},i,u.table.core).then(function(){return h})},e)},ae.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,At(n)?Zn(n,function(){var i=e;return function(u,s){return i===0||(i===1?--i:s(function(){u.advance(i),i=0}),!1)}}):Zn(n,function(){var i=e;return function(){return--i<0}})),this},ae.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Zn(this._ctx,function(){var n=e;return function(i,u,s){return--n<=0&&u(s),0<=n}},!0),this},ae.prototype.until=function(e,n){return Jn(this._ctx,function(i,u,s){return!e(i.value)||(u(s),n)}),this},ae.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},ae.prototype.last=function(e){return this.reverse().first(e)},ae.prototype.filter=function(e){var n;return Jn(this._ctx,function(i){return e(i.value)}),(n=this._ctx).isMatch=lt(n.isMatch,e),this},ae.prototype.and=function(e){return this.filter(e)},ae.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ae.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ae.prototype.desc=function(){return this.reverse()},ae.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,u){e(u.key,u)})},ae.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ae.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,u){e(u.primaryKey,u)})},ae.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(u,s){i.push(s.key)}).then(function(){return i}).then(e)},ae.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&At(n,!0)&&0<n.limit)return this._read(function(u){var s=un(n,n.table.core.schema);return n.table.core.query({trans:u,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(u){return u.result}).then(e);n.keysOnly=!n.isMatch;var i=[];return this.each(function(u,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)},ae.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ae.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},ae.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ae.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return Jn(this._ctx,function(s){var u=s.primaryKey.toString(),s=F(n,u);return n[u]=!0,!s}),this},ae.prototype.modify=function(e){var n=this,i=this._ctx;return this._write(function(u){var s,l,h;h=typeof e=="function"?e:(s=d(e),l=s.length,function(b){for(var E=!1,S=0;S<l;++S){var O=s[S],P=e[O],D=Q(b,O);P instanceof qt?(V(b,O,P.execute(D)),E=!0):D!==P&&(V(b,O,P),E=!0)}return E});var p=i.table.core,y=p.schema.primaryKey,m=y.outbound,g=y.extractKey,_=200,y=n.db._options.modifyChunkSize;y&&(_=typeof y=="object"?y[p.name]||y["*"]||200:y);function A(b,O){var S=O.failures,O=O.numFailures;w+=b-O;for(var P=0,D=d(S);P<D.length;P++){var q=D[P];v.push(S[q])}}var v=[],w=0,x=[];return n.clone().primaryKeys().then(function(b){function E(O){var P=Math.min(_,b.length-O);return p.getMany({trans:u,keys:b.slice(O,O+P),cache:"immutable"}).then(function(D){for(var q=[],B=[],T=m?[]:null,K=[],j=0;j<P;++j){var L=D[j],Z={value:be(L),primKey:b[O+j]};h.call(Z,Z.value,Z)!==!1&&(Z.value==null?K.push(b[O+j]):m||re(g(L),g(Z.value))===0?(B.push(Z.value),m&&T.push(b[O+j])):(K.push(b[O+j]),q.push(Z.value)))}return Promise.resolve(0<q.length&&p.mutate({trans:u,type:"add",values:q}).then(function(ee){for(var te in ee.failures)K.splice(parseInt(te),1);A(q.length,ee)})).then(function(){return(0<B.length||S&&typeof e=="object")&&p.mutate({trans:u,type:"put",keys:T,values:B,criteria:S,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<O}).then(function(ee){return A(B.length,ee)})}).then(function(){return(0<K.length||S&&e===$n)&&p.mutate({trans:u,type:"delete",keys:K,criteria:S,isAdditionalChunk:0<O}).then(function(ee){return A(K.length,ee)})}).then(function(){return b.length>O+P&&E(O+_)})})}var S=At(i)&&i.limit===1/0&&(typeof e!="function"||e===$n)&&{index:i.index,range:i.range};return E(0).then(function(){if(0<v.length)throw new We("Error modifying one or more objects",v,w,x);return b.length})})})},ae.prototype.delete=function(){var e=this._ctx,n=e.range;return At(e)&&(e.isPrimKey||n.type===3)?this._write(function(i){var u=e.table.core.schema.primaryKey,s=n;return e.table.core.count({trans:i,query:{index:u,range:s}}).then(function(l){return e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(function(h){var p=h.failures;if(h.lastResult,h.results,h=h.numFailures,h)throw new We("Could not delete some values",Object.keys(p).map(function(m){return p[m]}),l-h);return l-h})})}):this.modify($n)},ae);function ae(){}var $n=function(e,n){return n.value=null};function wo(e,n){return e<n?-1:e===n?0:1}function _o(e,n){return n<e?-1:e===n?0:1}function Re(e,n,i){return e=e instanceof Zr?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(n),e}function Et(e){return new e.Collection(e,function(){return Jr("")}).limit(0)}function cn(e,n,i,u){var s,l,h,p,m,g,_,y=i.length;if(!i.every(function(w){return typeof w=="string"}))return Re(e,Lr);function A(w){s=w==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},l=w==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},h=w==="next"?wo:_o;var x=i.map(function(b){return{lower:l(b),upper:s(b)}}).sort(function(b,E){return h(b.lower,E.lower)});p=x.map(function(b){return b.upper}),m=x.map(function(b){return b.lower}),_=(g=w)==="next"?"":u}A("next"),e=new e.Collection(e,function(){return et(p[0],m[y-1]+u)}),e._ondirectionchange=function(w){A(w)};var v=0;return e._addAlgorithm(function(w,x,b){var E=w.key;if(typeof E!="string")return!1;var S=l(E);if(n(S,m,v))return!0;for(var O=null,P=v;P<y;++P){var D=function(q,B,T,K,j,L){for(var Z=Math.min(q.length,K.length),ee=-1,te=0;te<Z;++te){var Ce=B[te];if(Ce!==K[te])return j(q[te],T[te])<0?q.substr(0,te)+T[te]+T.substr(te+1):j(q[te],K[te])<0?q.substr(0,te)+K[te]+T.substr(te+1):0<=ee?q.substr(0,ee)+B[ee]+T.substr(ee+1):null;j(q[te],Ce)<0&&(ee=te)}return Z<K.length&&L==="next"?q+T.substr(q.length):Z<q.length&&L==="prev"?q.substr(0,T.length):ee<0?null:q.substr(0,ee)+K[ee]+T.substr(ee+1)}(E,S,p[P],m[P],h,g);D===null&&O===null?v=P+1:(O===null||0<h(O,D))&&(O=D)}return x(O!==null?function(){w.continue(O+_)}:b),!1}),e}function et(e,n,i,u){return{type:2,lower:e,upper:n,lowerOpen:i,upperOpen:u}}function Jr(e){return{type:1,lower:e,upper:e}}var Zr=(Object.defineProperty(ve.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ve.prototype.between=function(e,n,i,u){i=i!==!1,u=u===!0;try{return 0<this._cmp(e,n)||this._cmp(e,n)===0&&(i||u)&&(!i||!u)?Et(this):new this.Collection(this,function(){return et(e,n,!i,!u)})}catch{return Re(this,Ne)}},ve.prototype.equals=function(e){return e==null?Re(this,Ne):new this.Collection(this,function(){return Jr(e)})},ve.prototype.above=function(e){return e==null?Re(this,Ne):new this.Collection(this,function(){return et(e,void 0,!0)})},ve.prototype.aboveOrEqual=function(e){return e==null?Re(this,Ne):new this.Collection(this,function(){return et(e,void 0,!1)})},ve.prototype.below=function(e){return e==null?Re(this,Ne):new this.Collection(this,function(){return et(void 0,e,!1,!0)})},ve.prototype.belowOrEqual=function(e){return e==null?Re(this,Ne):new this.Collection(this,function(){return et(void 0,e)})},ve.prototype.startsWith=function(e){return typeof e!="string"?Re(this,Lr):this.between(e,e+ct,!0,!0)},ve.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):cn(this,function(n,i){return n.indexOf(i[0])===0},[e],ct)},ve.prototype.equalsIgnoreCase=function(e){return cn(this,function(n,i){return n===i[0]},[e],"")},ve.prototype.anyOfIgnoreCase=function(){var e=Oe.apply(Fe,arguments);return e.length===0?Et(this):cn(this,function(n,i){return i.indexOf(n)!==-1},e,"")},ve.prototype.startsWithAnyOfIgnoreCase=function(){var e=Oe.apply(Fe,arguments);return e.length===0?Et(this):cn(this,function(n,i){return i.some(function(u){return n.indexOf(u)===0})},e,ct)},ve.prototype.anyOf=function(){var e=this,n=Oe.apply(Fe,arguments),i=this._cmp;try{n.sort(i)}catch{return Re(this,Ne)}if(n.length===0)return Et(this);var u=new this.Collection(this,function(){return et(n[0],n[n.length-1])});u._ondirectionchange=function(l){i=l==="next"?e._ascending:e._descending,n.sort(i)};var s=0;return u._addAlgorithm(function(l,h,p){for(var m=l.key;0<i(m,n[s]);)if(++s===n.length)return h(p),!1;return i(m,n[s])===0||(h(function(){l.continue(n[s])}),!1)}),u},ve.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ve.prototype.noneOf=function(){var e=Oe.apply(Fe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Re(this,Ne)}var n=e.reduce(function(i,u){return i?i.concat([[i[i.length-1][1],u]]):[[-1/0,u]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},ve.prototype.inAnyRange=function(E,n){var i=this,u=this._cmp,s=this._ascending,l=this._descending,h=this._min,p=this._max;if(E.length===0)return Et(this);if(!E.every(function(S){return S[0]!==void 0&&S[1]!==void 0&&s(S[0],S[1])<=0}))return Re(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);var m=!n||n.includeLowers!==!1,g=n&&n.includeUppers===!0,_,y=s;function A(S,O){return y(S[0],O[0])}try{(_=E.reduce(function(S,O){for(var P=0,D=S.length;P<D;++P){var q=S[P];if(u(O[0],q[1])<0&&0<u(O[1],q[0])){q[0]=h(q[0],O[0]),q[1]=p(q[1],O[1]);break}}return P===D&&S.push(O),S},[])).sort(A)}catch{return Re(this,Ne)}var v=0,w=g?function(S){return 0<s(S,_[v][1])}:function(S){return 0<=s(S,_[v][1])},x=m?function(S){return 0<l(S,_[v][0])}:function(S){return 0<=l(S,_[v][0])},b=w,E=new this.Collection(this,function(){return et(_[0][0],_[_.length-1][1],!m,!g)});return E._ondirectionchange=function(S){y=S==="next"?(b=w,s):(b=x,l),_.sort(A)},E._addAlgorithm(function(S,O,P){for(var D,q=S.key;b(q);)if(++v===_.length)return O(P),!1;return!w(D=q)&&!x(D)||(i._cmp(q,_[v][1])===0||i._cmp(q,_[v][0])===0||O(function(){y===s?S.continue(_[v][0]):S.continue(_[v][1])}),!1)}),E},ve.prototype.startsWithAnyOf=function(){var e=Oe.apply(Fe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?Et(this):this.inAnyRange(e.map(function(n){return[n,n+ct]})):Re(this,"startsWithAnyOf() only works with strings")},ve);function ve(){}function je(e){return le(function(n){return Kt(n),e(n.target.error),!1})}function Kt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ut="storagemutated",er="x-storagemutated-1",tt=Mt(null,Ut),xo=(qe.prototype._lock=function(){return $(!H.global),++this._reculock,this._reculock!==1||H.global||(H.lockOwnerFor=this),this},qe.prototype._unlock=function(){if($(!H.global),--this._reculock==0)for(H.global||(H.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{st(e[1],e[0])}catch{}}return this},qe.prototype._locked=function(){return this._reculock&&H.lockOwnerFor!==this},qe.prototype.create=function(e){var n=this;if(!this.mode)return this;var i=this.db.idbdb,u=this.db._state.dbOpenError;if($(!this.idbtrans),!e&&!i)switch(u&&u.name){case"DatabaseClosedError":throw new z.DatabaseClosed(u);case"MissingAPIError":throw new z.MissingAPI(u.message,u);default:throw new z.OpenFailed(u)}if(!this.active)throw new z.TransactionInactive;return $(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=le(function(s){Kt(s),n._reject(e.error)}),e.onabort=le(function(s){Kt(s),n.active&&n._reject(new z.Abort(e.error)),n.active=!1,n.on("abort").fire(s)}),e.oncomplete=le(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&tt.storagemutated.fire(e.mutatedParts)}),this},qe.prototype._promise=function(e,n,i){var u=this;if(e==="readwrite"&&this.mode!=="readwrite")return fe(new z.ReadOnly("Transaction is readonly"));if(!this.active)return fe(new z.TransactionInactive);if(this._locked())return new U(function(l,h){u._blockedFuncs.push([function(){u._promise(e,n,i).then(l,h)},H])});if(i)return Je(function(){var l=new U(function(h,p){u._lock();var m=n(h,p,u);m&&m.then&&m.then(h,p)});return l.finally(function(){return u._unlock()}),l._lib=!0,l});var s=new U(function(l,h){var p=n(l,h,u);p&&p.then&&p.then(l,h)});return s._lib=!0,s},qe.prototype._root=function(){return this.parent?this.parent._root():this},qe.prototype.waitFor=function(e){var n,i=this._root(),u=U.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return u}):(i._waitingFor=u,i._waitingQueue=[],n=i.idbtrans.objectStore(i.storeNames[0]),function l(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(n.get(-1/0).onsuccess=l)}());var s=i._waitingFor;return new U(function(l,h){u.then(function(p){return i._waitingQueue.push(le(l.bind(null,p)))},function(p){return i._waitingQueue.push(le(h.bind(null,p)))}).finally(function(){i._waitingFor===s&&(i._waitingFor=null)})})},qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))},qe.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(F(n,e))return n[e];var i=this.schema[e];if(!i)throw new z.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),n[e]=i},qe);function qe(){}function tr(e,n,i,u,s,l,h){return{name:e,keyPath:n,unique:i,multi:u,auto:s,compound:l,src:(i&&!h?"&":"")+(u?"*":"")+(s?"++":"")+$r(n)}}function $r(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function nr(e,n,i){return{name:e,primKey:n,indexes:i,mappedClass:null,idxByName:(u=function(s){return[s.name,s]},i.reduce(function(s,l,h){return h=u(l,h),h&&(s[h[0]]=h[1]),s},{}))};var u}var Nt=function(e){try{return e.only([[]]),Nt=function(){return[[]]},[[]]}catch{return Nt=function(){return ct},ct}};function rr(e){return e==null?function(){}:typeof e=="string"?(n=e).split(".").length===1?function(i){return i[n]}:function(i){return Q(i,n)}:function(i){return Q(i,e)};var n}function ei(e){return[].slice.call(e)}var Ao=0;function Lt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function Eo(e,n,m){function u(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=b.lower,w=b.upper,x=b.lowerOpen,b=b.upperOpen;return v===void 0?w===void 0?null:n.upperBound(w,!!b):w===void 0?n.lowerBound(v,!!x):n.bound(v,w,!!x,!!b)}function s(A){var v,w=A.name;return{name:w,schema:A,mutate:function(x){var b=x.trans,E=x.type,S=x.keys,O=x.values,P=x.range;return new Promise(function(D,q){D=le(D);var B=b.objectStore(w),T=B.keyPath==null,K=E==="put"||E==="add";if(!K&&E!=="delete"&&E!=="deleteRange")throw new Error("Invalid operation type: "+E);var j,L=(S||O||{length:1}).length;if(S&&O&&S.length!==O.length)throw new Error("Given keys array must have same length as given values array.");if(L===0)return D({numFailures:0,failures:{},results:[],lastResult:void 0});function Z(Ee){++Ce,Kt(Ee)}var ee=[],te=[],Ce=0;if(E==="deleteRange"){if(P.type===4)return D({numFailures:Ce,failures:te,results:[],lastResult:void 0});P.type===3?ee.push(j=B.clear()):ee.push(j=B.delete(u(P)))}else{var T=K?T?[O,S]:[O,null]:[S,null],J=T[0],xe=T[1];if(K)for(var Ae=0;Ae<L;++Ae)ee.push(j=xe&&xe[Ae]!==void 0?B[E](J[Ae],xe[Ae]):B[E](J[Ae])),j.onerror=Z;else for(Ae=0;Ae<L;++Ae)ee.push(j=B[E](J[Ae])),j.onerror=Z}function xn(Ee){Ee=Ee.target.result,ee.forEach(function(ht,_r){return ht.error!=null&&(te[_r]=ht.error)}),D({numFailures:Ce,failures:te,results:E==="delete"?S:ee.map(function(ht){return ht.result}),lastResult:Ee})}j.onerror=function(Ee){Z(Ee),xn(Ee)},j.onsuccess=xn})},getMany:function(x){var b=x.trans,E=x.keys;return new Promise(function(S,O){S=le(S);for(var P,D=b.objectStore(w),q=E.length,B=new Array(q),T=0,K=0,j=function(ee){ee=ee.target,B[ee._pos]=ee.result,++K===T&&S(B)},L=je(O),Z=0;Z<q;++Z)E[Z]!=null&&((P=D.get(E[Z]))._pos=Z,P.onsuccess=j,P.onerror=L,++T);T===0&&S(B)})},get:function(x){var b=x.trans,E=x.key;return new Promise(function(S,O){S=le(S);var P=b.objectStore(w).get(E);P.onsuccess=function(D){return S(D.target.result)},P.onerror=je(O)})},query:(v=g,function(x){return new Promise(function(b,E){b=le(b);var S,O,P,T=x.trans,D=x.values,q=x.limit,j=x.query,B=q===1/0?void 0:q,K=j.index,j=j.range,T=T.objectStore(w),K=K.isPrimaryKey?T:T.index(K.name),j=u(j);if(q===0)return b({result:[]});v?((B=D?K.getAll(j,B):K.getAllKeys(j,B)).onsuccess=function(L){return b({result:L.target.result})},B.onerror=je(E)):(S=0,O=!D&&"openKeyCursor"in K?K.openKeyCursor(j):K.openCursor(j),P=[],O.onsuccess=function(L){var Z=O.result;return Z?(P.push(D?Z.value:Z.primaryKey),++S===q?b({result:P}):void Z.continue()):b({result:P})},O.onerror=je(E))})}),openCursor:function(x){var b=x.trans,E=x.values,S=x.query,O=x.reverse,P=x.unique;return new Promise(function(D,q){D=le(D);var K=S.index,B=S.range,T=b.objectStore(w),T=K.isPrimaryKey?T:T.index(K.name),K=O?P?"prevunique":"prev":P?"nextunique":"next",j=!E&&"openKeyCursor"in T?T.openKeyCursor(u(B),K):T.openCursor(u(B),K);j.onerror=je(q),j.onsuccess=le(function(L){var Z,ee,te,Ce,J=j.result;J?(J.___id=++Ao,J.done=!1,Z=J.continue.bind(J),ee=(ee=J.continuePrimaryKey)&&ee.bind(J),te=J.advance.bind(J),Ce=function(){throw new Error("Cursor not stopped")},J.trans=b,J.stop=J.continue=J.continuePrimaryKey=J.advance=function(){throw new Error("Cursor not started")},J.fail=le(q),J.next=function(){var xe=this,Ae=1;return this.start(function(){return Ae--?xe.continue():xe.stop()}).then(function(){return xe})},J.start=function(xe){function Ae(){if(j.result)try{xe()}catch(Ee){J.fail(Ee)}else J.done=!0,J.start=function(){throw new Error("Cursor behind last entry")},J.stop()}var xn=new Promise(function(Ee,ht){Ee=le(Ee),j.onerror=je(ht),J.fail=ht,J.stop=function(_r){J.stop=J.continue=J.continuePrimaryKey=J.advance=Ce,Ee(_r)}});return j.onsuccess=le(function(Ee){j.onsuccess=Ae,Ae()}),J.continue=Z,J.continuePrimaryKey=ee,J.advance=te,Ae(),xn},D(J)):D(null)},q)})},count:function(x){var b=x.query,E=x.trans,S=b.index,O=b.range;return new Promise(function(P,D){var q=E.objectStore(w),B=S.isPrimaryKey?q:q.index(S.name),q=u(O),B=q?B.count(q):B.count();B.onsuccess=le(function(T){return P(T.target.result)}),B.onerror=je(D)})}}}var l,h,p,_=(h=m,p=ei((l=e).objectStoreNames),{schema:{name:l.name,tables:p.map(function(A){return h.objectStore(A)}).map(function(A){var v=A.keyPath,b=A.autoIncrement,w=k(v),x={},b={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v==null,compound:w,keyPath:v,autoIncrement:b,unique:!0,extractKey:rr(v)},indexes:ei(A.indexNames).map(function(E){return A.index(E)}).map(function(P){var S=P.name,O=P.unique,D=P.multiEntry,P=P.keyPath,D={name:S,compound:k(P),keyPath:P,unique:O,multiEntry:D,extractKey:rr(P)};return x[Lt(P)]=D}),getIndexByKeyPath:function(E){return x[Lt(E)]}};return x[":id"]=b.primaryKey,v!=null&&(x[Lt(v)]=b.primaryKey),b})},hasGetAll:0<p.length&&"getAll"in h.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),m=_.schema,g=_.hasGetAll,_=m.tables.map(s),y={};return _.forEach(function(A){return y[A.name]=A}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(A){if(!y[A])throw new Error("Table '".concat(A,"' not found"));return y[A]},MIN_KEY:-1/0,MAX_KEY:Nt(n),schema:m}}function ko(e,n,i,u){var s=i.IDBKeyRange;return i.indexedDB,{dbcore:(u=Eo(n,s,u),e.dbcore.reduce(function(l,h){return h=h.create,a(a({},l),h(l))},u))}}function ln(e,u){var i=u.db,u=ko(e._middlewares,i,e._deps,u);e.core=u.dbcore,e.tables.forEach(function(s){var l=s.name;e.core.schema.tables.some(function(h){return h.name===l})&&(s.core=e.core.table(l),e[l]instanceof e.Table&&(e[l].core=s.core))})}function fn(e,n,i,u){i.forEach(function(s){var l=u[s];n.forEach(function(h){var p=function m(g,_){return oe(g,_)||(g=C(g))&&m(g,_)}(h,s);(!p||"value"in p&&p.value===void 0)&&(h===e.Transaction.prototype||h instanceof e.Transaction?N(h,s,{get:function(){return this.table(s)},set:function(m){W(this,s,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):h[s]=new e.Table(s,l))})})}function ir(e,n){n.forEach(function(i){for(var u in i)i[u]instanceof e.Table&&delete i[u]})}function So(e,n){return e._cfg.version-n._cfg.version}function Oo(e,n,i,u){var s=e._dbSchema;i.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=nr("$meta",ni("")[0],[]),e._storeNames.push("$meta"));var l=e._createTransaction("readwrite",e._storeNames,s);l.create(i),l._completion.catch(u);var h=l._reject.bind(l),p=H.transless||H;Je(function(){return H.trans=l,H.transless=p,n!==0?(ln(e,i),g=n,((m=l).storeNames.includes("$meta")?m.table("$meta").get("version").then(function(_){return _??g}):U.resolve(g)).then(function(_){return A=_,v=l,w=i,x=[],_=(y=e)._versions,b=y._dbSchema=hn(0,y.idbdb,w),(_=_.filter(function(E){return E._cfg.version>=A})).length!==0?(_.forEach(function(E){x.push(function(){var S=b,O=E._cfg.dbschema;pn(y,S,w),pn(y,O,w),b=y._dbSchema=O;var P=or(S,O);P.add.forEach(function(K){ar(w,K[0],K[1].primKey,K[1].indexes)}),P.change.forEach(function(K){if(K.recreate)throw new z.Upgrade("Not yet support for changing primary key");var j=w.objectStore(K.name);K.add.forEach(function(L){return dn(j,L)}),K.change.forEach(function(L){j.deleteIndex(L.name),dn(j,L)}),K.del.forEach(function(L){return j.deleteIndex(L)})});var D=E._cfg.contentUpgrade;if(D&&E._cfg.version>A){ln(y,w),v._memoizedTables={};var q=ie(O);P.del.forEach(function(K){q[K]=S[K]}),ir(y,[y.Transaction.prototype]),fn(y,[y.Transaction.prototype],d(q),q),v.schema=q;var B,T=gt(D);return T&&_t(),P=U.follow(function(){var K;(B=D(v))&&T&&(K=Ze.bind(null,null),B.then(K,K))}),B&&typeof B.then=="function"?U.resolve(B):P.then(function(){return B})}}),x.push(function(S){var O,P,D=E._cfg.dbschema;O=D,P=S,[].slice.call(P.db.objectStoreNames).forEach(function(q){return O[q]==null&&P.db.deleteObjectStore(q)}),ir(y,[y.Transaction.prototype]),fn(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),v.schema=y._dbSchema}),x.push(function(S){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===E._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(O){return O!=="$meta"})):S.objectStore("$meta").put(E._cfg.version,"version"))})}),function E(){return x.length?U.resolve(x.shift()(v.idbtrans)).then(E):U.resolve()}().then(function(){ti(b,w)})):U.resolve();var y,A,v,w,x,b}).catch(h)):(d(s).forEach(function(_){ar(i,_,s[_].primKey,s[_].indexes)}),ln(e,i),void U.follow(function(){return e.on.populate.fire(l)}).catch(h));var m,g})}function Ro(e,n){ti(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var i=hn(0,e.idbdb,n);pn(e,e._dbSchema,n);for(var u=0,s=or(i,e._dbSchema).change;u<s.length;u++){var l=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=n.objectStore(h.name);h.add.forEach(function(m){Me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(m.src)),dn(p,m)})}(s[u]);if(typeof l=="object")return l.value}}function or(e,n){var i,u={del:[],add:[],change:[]};for(i in e)n[i]||u.del.push(i);for(i in n){var s=e[i],l=n[i];if(s){var h={name:i,def:l,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(l.primKey.keyPath||"")||s.primKey.auto!==l.primKey.auto)h.recreate=!0,u.change.push(h);else{var p=s.idxByName,m=l.idxByName,g=void 0;for(g in p)m[g]||h.del.push(g);for(g in m){var _=p[g],y=m[g];_?_.src!==y.src&&h.change.push(y):h.add.push(y)}(0<h.del.length||0<h.add.length||0<h.change.length)&&u.change.push(h)}}else u.add.push([i,l])}return u}function ar(e,n,i,u){var s=e.db.createObjectStore(n,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return u.forEach(function(l){return dn(s,l)}),s}function ti(e,n){d(e).forEach(function(i){n.db.objectStoreNames.contains(i)||(Me&&console.debug("Dexie: Creating missing table",i),ar(n,i,e[i].primKey,e[i].indexes))})}function dn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function hn(e,n,i){var u={};return Y(n.objectStoreNames,0).forEach(function(s){for(var l=i.objectStore(s),h=tr($r(g=l.keyPath),g||"",!0,!1,!!l.autoIncrement,g&&typeof g!="string",!0),p=[],m=0;m<l.indexNames.length;++m){var _=l.index(l.indexNames[m]),g=_.keyPath,_=tr(_.name,g,!!_.unique,!!_.multiEntry,!1,g&&typeof g!="string",!1);p.push(_)}u[s]=nr(s,h,p)}),u}function pn(e,n,i){for(var u=i.db.objectStoreNames,s=0;s<u.length;++s){var l=u[s],h=i.objectStore(l);e._hasGetAll="getAll"in h;for(var p=0;p<h.indexNames.length;++p){var m=h.indexNames[p],g=h.index(m).keyPath,_=typeof g=="string"?g:"["+Y(g).join("+")+"]";!n[l]||(g=n[l].idxByName[_])&&(g.name=m,delete n[l].idxByName[_],n[l].idxByName[m]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ni(e){return e.split(",").map(function(n,i){var u=(n=n.trim()).replace(/([&*]|\+\+)/g,""),s=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return tr(u,s||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),k(s),i===0)})}var Co=(yn.prototype._parseStoresSpec=function(e,n){d(e).forEach(function(i){if(e[i]!==null){var u=ni(e[i]),s=u.shift();if(s.unique=!0,s.multi)throw new z.Schema("Primary key cannot be multi-valued");u.forEach(function(l){if(l.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")}),n[i]=nr(i,s,u)}})},yn.prototype.stores=function(i){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?R(this._cfg.storesSource,i):i;var i=n._versions,u={},s={};return i.forEach(function(l){R(u,l._cfg.storesSource),s=l._cfg.dbschema={},l._parseStoresSpec(u,s)}),n._dbSchema=s,ir(n,[n._allTables,n,n.Transaction.prototype]),fn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],d(s),s),n._storeNames=d(s),this},yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Un(this._cfg.contentUpgrade||ue,e),this},yn);function yn(){}function ur(e,n){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Le(on,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function sr(e){return e&&typeof e.databases=="function"}function cr(e){return Je(function(){return H.letThrough=!0,e()})}function lr(e){return!("from"in e)}var _e=function(e,n){if(!this){var i=new _e;return e&&"d"in e&&R(i,e),i}R(this,arguments.length?{d:1,from:e,to:1<arguments.length?n:e}:{d:0})};function Ht(e,n,i){var u=re(n,i);if(!isNaN(u)){if(0<u)throw RangeError();if(lr(e))return R(e,{from:n,to:i,d:1});var s=e.l,u=e.r;if(re(i,e.from)<0)return s?Ht(s,n,i):e.l={from:n,to:i,d:1,l:null,r:null},ii(e);if(0<re(n,e.to))return u?Ht(u,n,i):e.r={from:n,to:i,d:1,l:null,r:null},ii(e);re(n,e.from)<0&&(e.from=n,e.l=null,e.d=u?u.d+1:1),0<re(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,s&&!e.l&&zt(e,s),u&&i&&zt(e,u)}}function zt(e,n){lr(n)||function i(u,m){var l=m.from,h=m.to,p=m.l,m=m.r;Ht(u,l,h),p&&i(u,p),m&&i(u,m)}(e,n)}function ri(e,n){var i=mn(n),u=i.next();if(u.done)return!1;for(var s=u.value,l=mn(e),h=l.next(s.from),p=h.value;!u.done&&!h.done;){if(re(p.from,s.to)<=0&&0<=re(p.to,s.from))return!0;re(s.from,p.from)<0?s=(u=i.next(p.from)).value:p=(h=l.next(s.from)).value}return!1}function mn(e){var n=lr(e)?null:{s:0,n:e};return{next:function(i){for(var u=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,u)for(;n.n.l&&re(i,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!u||re(i,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function ii(e){var n,i,u=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),s=1<u?"r":u<-1?"l":"";s&&(n=s=="r"?"l":"r",i=a({},e),u=e[s],e.from=u.from,e.to=u.to,e[s]=u[s],i[s]=u[n],(e[n]=i).d=oi(i)),e.d=oi(e)}function oi(i){var n=i.r,i=i.l;return(n?i?Math.max(n.d,i.d):n.d:i?i.d:0)+1}function vn(e,n){return d(n).forEach(function(i){e[i]?zt(e[i],n[i]):e[i]=function u(s){var l,h,p={};for(l in s)F(s,l)&&(h=s[l],p[l]=!h||typeof h!="object"||Be.has(h.constructor)?h:u(h));return p}(n[i])}),e}function fr(e,n){return e.all||n.all||Object.keys(e).some(function(i){return n[i]&&ri(n[i],e[i])})}G(_e.prototype,((Pe={add:function(e){return zt(this,e),this},addKey:function(e){return Ht(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(i){return Ht(n,i,i)}),this},hasKey:function(e){var n=mn(this).next(e).value;return n&&re(n.from,e)<=0&&0<=re(n.to,e)}})[Ft]=function(){return mn(this)},Pe));var ft={},dr={},hr=!1;function gn(e){vn(dr,e),hr||(hr=!0,setTimeout(function(){hr=!1,pr(dr,!(dr={}))},0))}function pr(e,n){n===void 0&&(n=!1);var i=new Set;if(e.all)for(var u=0,s=Object.values(ft);u<s.length;u++)ai(h=s[u],e,i,n);else for(var l in e){var h,p=/^idb\:\/\/(.*)\/(.*)\//.exec(l);p&&(l=p[1],p=p[2],(h=ft["idb://".concat(l,"/").concat(p)])&&ai(h,e,i,n))}i.forEach(function(m){return m()})}function ai(e,n,i,u){for(var s=[],l=0,h=Object.entries(e.queries.query);l<h.length;l++){for(var p=h[l],m=p[0],g=[],_=0,y=p[1];_<y.length;_++){var A=y[_];fr(n,A.obsSet)?A.subscribers.forEach(function(b){return i.add(b)}):u&&g.push(A)}u&&s.push([m,g])}if(u)for(var v=0,w=s;v<w.length;v++){var x=w[v],m=x[0],g=x[1];e.queries.query[m]=g}}function Fo(e){var n=e._state,i=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?fe(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var u=n.openCanceller,s=Math.round(10*e.verno),l=!1;function h(){if(n.openCanceller!==u)throw new z.DatabaseClosed("db.open() was cancelled")}function p(){return new U(function(A,v){if(h(),!i)throw new z.MissingAPI;var w=e.name,x=n.autoSchema||!s?i.open(w):i.open(w,s);if(!x)throw new z.MissingAPI;x.onerror=je(v),x.onblocked=le(e._fireOnBlocked),x.onupgradeneeded=le(function(b){var E;_=x.transaction,n.autoSchema&&!e._options.allowEmptyDB?(x.onerror=Kt,_.abort(),x.result.close(),(E=i.deleteDatabase(w)).onsuccess=E.onerror=le(function(){v(new z.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(_.onerror=je(v),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,y=b<1,e.idbdb=x.result,l&&Ro(e,_),Oo(e,b/10,_,v))},v),x.onsuccess=le(function(){_=null;var b,E,S,O,P,D=e.idbdb=x.result,q=Y(D.objectStoreNames);if(0<q.length)try{var B=D.transaction((O=q).length===1?O[0]:O,"readonly");if(n.autoSchema)E=D,S=B,(b=e).verno=E.version/10,S=b._dbSchema=hn(0,E,S),b._storeNames=Y(E.objectStoreNames,0),fn(b,[b._allTables],d(S),S);else if(pn(e,e._dbSchema,B),((P=or(hn(0,(P=e).idbdb,B),P._dbSchema)).add.length||P.change.some(function(T){return T.add.length||T.change.length}))&&!l)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),D.close(),s=D.version+1,l=!0,A(p());ln(e,B)}catch{}xt.push(e),D.onversionchange=le(function(T){n.vcFired=!0,e.on("versionchange").fire(T)}),D.onclose=le(function(T){e.on("close").fire(T)}),y&&(P=e._deps,B=w,D=P.indexedDB,P=P.IDBKeyRange,sr(D)||B===on||ur(D,P).put({name:B}).catch(ue)),A()},v)}).catch(function(A){switch(A==null?void 0:A.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<s)return s=0,p()}return U.reject(A)})}var m,g=n.dbReadyResolve,_=null,y=!1;return U.race([u,(typeof navigator>"u"?U.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(A){function v(){return indexedDB.databases().finally(A)}m=setInterval(v,100),v()}).finally(function(){return clearInterval(m)}):Promise.resolve()).then(p)]).then(function(){return h(),n.onReadyBeingFired=[],U.resolve(cr(function(){return e.on.ready.fire(e.vip)})).then(function A(){if(0<n.onReadyBeingFired.length){var v=n.onReadyBeingFired.reduce(Un,ue);return n.onReadyBeingFired=[],U.resolve(cr(function(){return v(e.vip)})).then(A)}})}).finally(function(){n.openCanceller===u&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(A){n.dbOpenError=A;try{_&&_.abort()}catch{}return u===n.openCanceller&&e._close(),fe(A)}).finally(function(){n.openComplete=!0,g()}).then(function(){var A;return y&&(A={},e.tables.forEach(function(v){v.schema.indexes.forEach(function(w){w.name&&(A["idb://".concat(e.name,"/").concat(v.name,"/").concat(w.name)]=new _e(-1/0,[[[]]]))}),A["idb://".concat(e.name,"/").concat(v.name,"/")]=A["idb://".concat(e.name,"/").concat(v.name,"/:dels")]=new _e(-1/0,[[[]]])}),tt(Ut).fire(A),pr(A,!0)),e})}function yr(e){function n(l){return e.next(l)}var i=s(n),u=s(function(l){return e.throw(l)});function s(l){return function(m){var p=l(m),m=p.value;return p.done?m:m&&typeof m.then=="function"?m.then(i,u):k(m)?Promise.all(m).then(i,u):i(m)}}return s(n)()}function bn(e,n,i){for(var u=k(e)?e.slice():[e],s=0;s<i;++s)u.push(n);return u}var Po={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return a(a({},e),{table:function(n){var i=e.table(n),u=i.schema,s={},l=[];function h(y,A,v){var w=Lt(y),x=s[w]=s[w]||[],b=y==null?0:typeof y=="string"?1:y.length,E=0<A,E=a(a({},v),{name:E?"".concat(w,"(virtual-from:").concat(v.name,")"):v.name,lowLevelIndex:v,isVirtual:E,keyTail:A,keyLength:b,extractKey:rr(y),unique:!E&&v.unique});return x.push(E),E.isPrimaryKey||l.push(E),1<b&&h(b===2?y[0]:y.slice(0,b-1),A+1,v),x.sort(function(S,O){return S.keyTail-O.keyTail}),E}n=h(u.primaryKey.keyPath,0,u.primaryKey),s[":id"]=[n];for(var p=0,m=u.indexes;p<m.length;p++){var g=m[p];h(g.keyPath,0,g)}function _(y){var A,v=y.query.index;return v.isVirtual?a(a({},y),{query:{index:v.lowLevelIndex,range:(A=y.query.range,v=v.keyTail,{type:A.type===1?2:A.type,lower:bn(A.lower,A.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:bn(A.upper,A.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0})}}):y}return a(a({},i),{schema:a(a({},u),{primaryKey:n,indexes:l,getIndexByKeyPath:function(y){return(y=s[Lt(y)])&&y[0]}}),count:function(y){return i.count(_(y))},query:function(y){return i.query(_(y))},openCursor:function(y){var A=y.query.index,v=A.keyTail,w=A.isVirtual,x=A.keyLength;return w?i.openCursor(_(y)).then(function(E){return E&&b(E)}):i.openCursor(y);function b(E){return Object.create(E,{continue:{value:function(S){S!=null?E.continue(bn(S,y.reverse?e.MAX_KEY:e.MIN_KEY,v)):y.unique?E.continue(E.key.slice(0,x).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,v)):E.continue()}},continuePrimaryKey:{value:function(S,O){E.continuePrimaryKey(bn(S,e.MAX_KEY,v),O)}},primaryKey:{get:function(){return E.primaryKey}},key:{get:function(){var S=E.key;return x===1?S[0]:S.slice(0,x)}},value:{get:function(){return E.value}}})}}})}})}};function mr(e,n,i,u){return i=i||{},u=u||"",d(e).forEach(function(s){var l,h,p;F(n,s)?(l=e[s],h=n[s],typeof l=="object"&&typeof h=="object"&&l&&h?(p=Ct(l))!==Ct(h)?i[u+s]=n[s]:p==="Object"?mr(l,h,i,u+s+"."):l!==h&&(i[u+s]=n[s]):l!==h&&(i[u+s]=n[s])):i[u+s]=void 0}),d(n).forEach(function(s){F(e,s)||(i[u+s]=n[s])}),i}function vr(e,n){return n.type==="delete"?n.keys:n.keys||n.values.map(e.extractKey)}var Io={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return a(a({},e),{table:function(n){var i=e.table(n),u=i.schema.primaryKey;return a(a({},i),{mutate:function(s){var l=H.trans,h=l.table(n).hook,p=h.deleting,m=h.creating,g=h.updating;switch(s.type){case"add":if(m.fire===ue)break;return l._promise("readwrite",function(){return _(s)},!0);case"put":if(m.fire===ue&&g.fire===ue)break;return l._promise("readwrite",function(){return _(s)},!0);case"delete":if(p.fire===ue)break;return l._promise("readwrite",function(){return _(s)},!0);case"deleteRange":if(p.fire===ue)break;return l._promise("readwrite",function(){return function y(A,v,w){return i.query({trans:A,values:!1,query:{index:u,range:v},limit:w}).then(function(x){var b=x.result;return _({type:"delete",keys:b,trans:A}).then(function(E){return 0<E.numFailures?Promise.reject(E.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:y(A,a(a({},v),{lower:b[b.length-1],lowerOpen:!0}),w)})})}(s.trans,s.range,1e4)},!0)}return i.mutate(s);function _(y){var A,v,w,x=H.trans,b=y.keys||vr(u,y);if(!b)throw new Error("Keys missing");return(y=y.type==="add"||y.type==="put"?a(a({},y),{keys:b}):a({},y)).type!=="delete"&&(y.values=c([],y.values)),y.keys&&(y.keys=c([],y.keys)),A=i,w=b,((v=y).type==="add"?Promise.resolve([]):A.getMany({trans:v.trans,keys:w,cache:"immutable"})).then(function(E){var S=b.map(function(O,P){var D,q,B,T=E[P],K={onerror:null,onsuccess:null};return y.type==="delete"?p.fire.call(K,O,T,x):y.type==="add"||T===void 0?(D=m.fire.call(K,O,y.values[P],x),O==null&&D!=null&&(y.keys[P]=O=D,u.outbound||V(y.values[P],u.keyPath,O))):(D=mr(T,y.values[P]),(q=g.fire.call(K,D,O,T,x))&&(B=y.values[P],Object.keys(q).forEach(function(j){F(B,j)?B[j]=q[j]:V(B,j,q[j])}))),K});return i.mutate(y).then(function(O){for(var P=O.failures,D=O.results,q=O.numFailures,O=O.lastResult,B=0;B<b.length;++B){var T=(D||b)[B],K=S[B];T==null?K.onerror&&K.onerror(P[B]):K.onsuccess&&K.onsuccess(y.type==="put"&&E[B]?y.values[B]:T)}return{failures:P,results:D,numFailures:q,lastResult:O}}).catch(function(O){return S.forEach(function(P){return P.onerror&&P.onerror(O)}),Promise.reject(O)})})}}})}})}};function ui(e,n,i){try{if(!n||n.keys.length<e.length)return null;for(var u=[],s=0,l=0;s<n.keys.length&&l<e.length;++s)re(n.keys[s],e[l])===0&&(u.push(i?be(n.values[s]):n.values[s]),++l);return u.length===e.length?u:null}catch{return null}}var Do={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var i=e.table(n);return a(a({},i),{getMany:function(u){if(!u.cache)return i.getMany(u);var s=ui(u.keys,u.trans._cache,u.cache==="clone");return s?U.resolve(s):i.getMany(u).then(function(l){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?be(l):l},l})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),i.mutate(u)}})}}}};function si(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function ci(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bo={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,i=new _e(e.MIN_KEY,e.MAX_KEY);return a(a({},e),{transaction:function(u,s,l){if(H.subscr&&s!=="readonly")throw new z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(H.querier));return e.transaction(u,s,l)},table:function(u){var s=e.table(u),l=s.schema,h=l.primaryKey,y=l.indexes,p=h.extractKey,m=h.outbound,g=h.autoIncrement&&y.filter(function(v){return v.compound&&v.keyPath.includes(h.keyPath)}),_=a(a({},s),{mutate:function(v){function w(j){return j="idb://".concat(n,"/").concat(u,"/").concat(j),O[j]||(O[j]=new _e)}var x,b,E,S=v.trans,O=v.mutatedParts||(v.mutatedParts={}),P=w(""),D=w(":dels"),q=v.type,K=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[vr(h,v).filter(function(j){return j}),v.values]:[],B=K[0],T=K[1],K=v.trans._cache;return k(B)?(P.addKeys(B),(K=q==="delete"||B.length===T.length?ui(B,K):null)||D.addKeys(B),(K||T)&&(x=w,b=K,E=T,l.indexes.forEach(function(j){var L=x(j.name||"");function Z(te){return te!=null?j.extractKey(te):null}function ee(te){return j.multiEntry&&k(te)?te.forEach(function(Ce){return L.addKey(Ce)}):L.addKey(te)}(b||E).forEach(function(te,xe){var J=b&&Z(b[xe]),xe=E&&Z(E[xe]);re(J,xe)!==0&&(J!=null&&ee(J),xe!=null&&ee(xe))})}))):B?(T={from:(T=B.lower)!==null&&T!==void 0?T:e.MIN_KEY,to:(T=B.upper)!==null&&T!==void 0?T:e.MAX_KEY},D.add(T),P.add(T)):(P.add(i),D.add(i),l.indexes.forEach(function(j){return w(j.name).add(i)})),s.mutate(v).then(function(j){return!B||v.type!=="add"&&v.type!=="put"||(P.addKeys(j.results),g&&g.forEach(function(L){for(var Z=v.values.map(function(J){return L.extractKey(J)}),ee=L.keyPath.findIndex(function(J){return J===h.keyPath}),te=0,Ce=j.results.length;te<Ce;++te)Z[te][ee]=j.results[te];w(L.name).addKeys(Z)})),S.mutatedParts=vn(S.mutatedParts||{},O),j})}}),y=function(w){var x=w.query,w=x.index,x=x.range;return[w,new _e((w=x.lower)!==null&&w!==void 0?w:e.MIN_KEY,(x=x.upper)!==null&&x!==void 0?x:e.MAX_KEY)]},A={get:function(v){return[h,new _e(v.key)]},getMany:function(v){return[h,new _e().addKeys(v.keys)]},count:y,query:y,openCursor:y};return d(A).forEach(function(v){_[v]=function(w){var x=H.subscr,b=!!x,E=si(H,s)&&ci(v,w)?w.obsSet={}:x;if(b){var S=function(T){return T="idb://".concat(n,"/").concat(u,"/").concat(T),E[T]||(E[T]=new _e)},O=S(""),P=S(":dels"),x=A[v](w),b=x[0],x=x[1];if((v==="query"&&b.isPrimaryKey&&!w.values?P:S(b.name||"")).add(x),!b.isPrimaryKey){if(v!=="count"){var D=v==="query"&&m&&w.values&&s.query(a(a({},w),{values:!1}));return s[v].apply(this,arguments).then(function(T){if(v==="query"){if(m&&w.values)return D.then(function(Z){return Z=Z.result,O.addKeys(Z),T});var K=w.values?T.result.map(p):T.result;(w.values?O:P).addKeys(K)}else if(v==="openCursor"){var j=T,L=w.values;return j&&Object.create(j,{key:{get:function(){return P.addKey(j.primaryKey),j.key}},primaryKey:{get:function(){var Z=j.primaryKey;return P.addKey(Z),Z}},value:{get:function(){return L&&O.addKey(j.primaryKey),j.value}}})}return T})}P.add(i)}}return s[v].apply(this,arguments)}}),_}})}};function li(e,n,i){if(i.numFailures===0)return n;if(n.type==="deleteRange")return null;var u=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return i.numFailures===u?null:(n=a({},n),k(n.keys)&&(n.keys=n.keys.filter(function(s,l){return!(l in i.failures)})),"values"in n&&k(n.values)&&(n.values=n.values.filter(function(s,l){return!(l in i.failures)})),n)}function gr(e,n){return i=e,((u=n).lower===void 0||(u.lowerOpen?0<re(i,u.lower):0<=re(i,u.lower)))&&(e=e,(n=n).upper===void 0||(n.upperOpen?re(e,n.upper)<0:re(e,n.upper)<=0));var i,u}function fi(e,n,A,u,s,l){if(!A||A.length===0)return e;var h=n.query.index,p=h.multiEntry,m=n.query.range,g=u.schema.primaryKey.extractKey,_=h.extractKey,y=(h.lowLevelIndex||h).extractKey,A=A.reduce(function(v,w){var x=v,b=[];if(w.type==="add"||w.type==="put")for(var E=new _e,S=w.values.length-1;0<=S;--S){var O,P=w.values[S],D=g(P);E.hasKey(D)||(O=_(P),(p&&k(O)?O.some(function(j){return gr(j,m)}):gr(O,m))&&(E.addKey(D),b.push(P)))}switch(w.type){case"add":var q=new _e().addKeys(n.values?v.map(function(L){return g(L)}):v),x=v.concat(n.values?b.filter(function(L){return L=g(L),!q.hasKey(L)&&(q.addKey(L),!0)}):b.map(function(L){return g(L)}).filter(function(L){return!q.hasKey(L)&&(q.addKey(L),!0)}));break;case"put":var B=new _e().addKeys(w.values.map(function(L){return g(L)}));x=v.filter(function(L){return!B.hasKey(n.values?g(L):L)}).concat(n.values?b:b.map(function(L){return g(L)}));break;case"delete":var T=new _e().addKeys(w.keys);x=v.filter(function(L){return!T.hasKey(n.values?g(L):L)});break;case"deleteRange":var K=w.range;x=v.filter(function(L){return!gr(g(L),K)})}return x},e);return A===e?e:(A.sort(function(v,w){return re(y(v),y(w))||re(g(v),g(w))}),n.limit&&n.limit<1/0&&(A.length>n.limit?A.length=n.limit:e.length===n.limit&&A.length<n.limit&&(s.dirty=!0)),l?Object.freeze(A):A)}function di(e,n){return re(e.lower,n.lower)===0&&re(e.upper,n.upper)===0&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function To(e,n){return function(i,u,s,l){if(i===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=re(i,u))===0){if(s&&l)return 0;if(s)return 1;if(l)return-1}return u}(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&0<=function(i,u,s,l){if(i===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=re(i,u))===0){if(s&&l)return 0;if(s)return-1;if(l)return 1}return u}(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Mo(e,n,i,u){e.subscribers.add(i),u.addEventListener("abort",function(){var s,l;e.subscribers.delete(i),e.subscribers.size===0&&(s=e,l=n,setTimeout(function(){s.subscribers.size===0&&we(l,s)},3e3))})}var jo={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return a(a({},e),{transaction:function(i,u,s){var l,h,p=e.transaction(i,u,s);return u==="readwrite"&&(h=(l=new AbortController).signal,s=function(m){return function(){if(l.abort(),u==="readwrite"){for(var g=new Set,_=0,y=i;_<y.length;_++){var A=y[_],v=ft["idb://".concat(n,"/").concat(A)];if(v){var w=e.table(A),x=v.optimisticOps.filter(function(L){return L.trans===p});if(p._explicit&&m&&p.mutatedParts)for(var b=0,E=Object.values(v.queries.query);b<E.length;b++)for(var S=0,O=(q=E[b]).slice();S<O.length;S++)fr((B=O[S]).obsSet,p.mutatedParts)&&(we(q,B),B.subscribers.forEach(function(L){return g.add(L)}));else if(0<x.length){v.optimisticOps=v.optimisticOps.filter(function(L){return L.trans!==p});for(var P=0,D=Object.values(v.queries.query);P<D.length;P++)for(var q,B,T,K=0,j=(q=D[P]).slice();K<j.length;K++)(B=j[K]).res!=null&&p.mutatedParts&&(m&&!B.dirty?(T=Object.isFrozen(B.res),T=fi(B.res,B.req,x,w,B,T),B.dirty?(we(q,B),B.subscribers.forEach(function(L){return g.add(L)})):T!==B.res&&(B.res=T,B.promise=U.resolve({result:T}))):(B.dirty&&we(q,B),B.subscribers.forEach(function(L){return g.add(L)})))}}}g.forEach(function(L){return L()})}}},p.addEventListener("abort",s(!1),{signal:h}),p.addEventListener("error",s(!1),{signal:h}),p.addEventListener("complete",s(!0),{signal:h})),p},table:function(i){var u=e.table(i),s=u.schema.primaryKey;return a(a({},u),{mutate:function(l){var h=H.trans;if(s.outbound||h.db._options.cache==="disabled"||h.explicit||h.idbtrans.mode!=="readwrite")return u.mutate(l);var p=ft["idb://".concat(n,"/").concat(i)];return p?(h=u.mutate(l),l.type!=="add"&&l.type!=="put"||!(50<=l.values.length||vr(s,l).some(function(m){return m==null}))?(p.optimisticOps.push(l),l.mutatedParts&&gn(l.mutatedParts),h.then(function(m){0<m.numFailures&&(we(p.optimisticOps,l),(m=li(0,l,m))&&p.optimisticOps.push(m),l.mutatedParts&&gn(l.mutatedParts))}),h.catch(function(){we(p.optimisticOps,l),l.mutatedParts&&gn(l.mutatedParts)})):h.then(function(m){var g=li(0,a(a({},l),{values:l.values.map(function(_,y){var A;return m.failures[y]?_:(_=(A=s.keyPath)!==null&&A!==void 0&&A.includes(".")?be(_):a({},_),V(_,s.keyPath,m.results[y]),_)})}),m);p.optimisticOps.push(g),queueMicrotask(function(){return l.mutatedParts&&gn(l.mutatedParts)})}),h):u.mutate(l)},query:function(l){if(!si(H,u)||!ci("query",l))return u.query(l);var h=((g=H.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",y=H,p=y.requery,m=y.signal,g=function(w,x,b,E){var S=ft["idb://".concat(w,"/").concat(x)];if(!S)return[];if(!(x=S.queries[b]))return[null,!1,S,null];var O=x[(E.query?E.query.index.name:null)||""];if(!O)return[null,!1,S,null];switch(b){case"query":var P=O.find(function(D){return D.req.limit===E.limit&&D.req.values===E.values&&di(D.req.query.range,E.query.range)});return P?[P,!0,S,O]:[O.find(function(D){return("limit"in D.req?D.req.limit:1/0)>=E.limit&&(!E.values||D.req.values)&&To(D.req.query.range,E.query.range)}),!1,S,O];case"count":return P=O.find(function(D){return di(D.req.query.range,E.query.range)}),[P,!!P,S,O]}}(n,i,"query",l),_=g[0],y=g[1],A=g[2],v=g[3];return _&&y?_.obsSet=l.obsSet:(y=u.query(l).then(function(w){var x=w.result;if(_&&(_.res=x),h){for(var b=0,E=x.length;b<E;++b)Object.freeze(x[b]);Object.freeze(x)}else w.result=be(x);return w}).catch(function(w){return v&&_&&we(v,_),Promise.reject(w)}),_={obsSet:l.obsSet,promise:y,subscribers:new Set,type:"query",req:l,dirty:!1},v?v.push(_):(v=[_],(A=A||(ft["idb://".concat(n,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[l.query.index.name||""]=v)),Mo(_,v,p,m),_.promise.then(function(w){return{result:fi(w.result,l,A==null?void 0:A.optimisticOps,u,_,h)}})}})}})}};function wn(e,n){return new Proxy(e,{get:function(i,u,s){return u==="db"?n:Reflect.get(i,u,s)}})}var Le=(de.prototype.version=function(e){if(isNaN(e)||e<.1)throw new z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,i=n.filter(function(u){return u._cfg.version===e})[0];return i||(i=new this.Version(e),n.push(i),n.sort(So),i.stores({}),this._state.autoSchema=!1,i)},de.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||H.letThrough||this._vip)?e():new U(function(i,u){if(n._state.openComplete)return u(new z.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void u(new z.DatabaseClosed);n.open().catch(ue)}n._state.dbReadyPromise.then(i,u)}).then(e)},de.prototype.use=function(e){var n=e.stack,i=e.create,u=e.level,s=e.name;return s&&this.unuse({stack:n,name:s}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:i,level:u??10,name:s}),e.sort(function(l,h){return l.level-h.level}),this},de.prototype.unuse=function(e){var n=e.stack,i=e.name,u=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return u?s.create!==u:!!i&&s.name!==i})),this},de.prototype.open=function(){var e=this;return st(Qe,function(){return Fo(e)})},de.prototype._close=function(){var e=this._state,n=xt.indexOf(this);if(0<=n&&xt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new U(function(i){e.dbReadyResolve=i}),e.openCanceller=new U(function(i,u){e.cancelOpen=u}))},de.prototype.close=function(i){var n=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;n?(i.isBeingOpened&&i.cancelOpen(new z.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new z.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},de.prototype.delete=function(e){var n=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new U(function(s,l){function h(){n.close(e);var p=n._deps.indexedDB.deleteDatabase(n.name);p.onsuccess=le(function(){var m,g,_;m=n._deps,g=n.name,_=m.indexedDB,m=m.IDBKeyRange,sr(_)||g===on||ur(_,m).delete(g).catch(ue),s()}),p.onerror=je(l),p.onblocked=n._fireOnBlocked}if(i)throw new z.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(h):h()})},de.prototype.backendDB=function(){return this.idbdb},de.prototype.isOpen=function(){return this.idbdb!==null},de.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},de.prototype.hasFailed=function(){return this._state.dbOpenError!==null},de.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(de.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),de.prototype.transaction=function(){var e=(function(n,i,u){var s=arguments.length;if(s<2)throw new z.InvalidArgument("Too few arguments");for(var l=new Array(s-1);--s;)l[s-1]=arguments[s];return u=l.pop(),[n,Ge(l),u]}).apply(this,arguments);return this._transaction.apply(this,e)},de.prototype._transaction=function(e,n,i){var u=this,s=H.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);var l,h,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(h=n.map(function(g){if(g=g instanceof u.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===Xn)l=Xn;else{if(e!="rw"&&e!=Qn)throw new z.InvalidArgument("Invalid transaction mode: "+e);l=Qn}if(s){if(s.mode===Xn&&l===Qn){if(!p)throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&h.forEach(function(g){if(s&&s.storeNames.indexOf(g)===-1){if(!p)throw new z.SubTransaction("Table "+g+" not included in parent transaction.");s=null}}),p&&s&&!s.active&&(s=null)}}catch(g){return s?s._promise(null,function(_,y){y(g)}):fe(g)}var m=(function g(_,y,A,v,w){return U.resolve().then(function(){var x=H.transless||H,b=_._createTransaction(y,A,_._dbSchema,v);if(b.explicit=!0,x={trans:b,transless:x},v)b.idbtrans=v.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,_._state.PR1398_maxLoop=3}catch(O){return O.name===Kn.InvalidState&&_.isOpen()&&0<--_._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),_.close({disableAutoOpen:!1}),_.open().then(function(){return g(_,y,A,null,w)})):fe(O)}var E,S=gt(w);return S&&_t(),x=U.follow(function(){var O;(E=w.call(b,b))&&(S?(O=Ze.bind(null,null),E.then(O,O)):typeof E.next=="function"&&typeof E.throw=="function"&&(E=yr(E)))},x),(E&&typeof E.then=="function"?U.resolve(E).then(function(O){return b.active?O:fe(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return E})).then(function(O){return v&&b._resolve(),b._completion.then(function(){return O})}).catch(function(O){return b._reject(O),fe(O)})})}).bind(null,this,l,h,s,i);return s?s._promise(l,m,"lock"):H.trans?st(H.transless,function(){return u._whenReady(m)}):this._whenReady(m)},de.prototype.table=function(e){if(!F(this._allTables,e))throw new z.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},de);function de(e,n){var i=this;this._middlewares={},this.verno=0;var u=de.dependencies;this._options=n=a({addons:de.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},u=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,l,h,p,m,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};g.dbReadyPromise=new U(function(y){g.dbReadyResolve=y}),g.openCanceller=new U(function(y,A){g.cancelOpen=A}),this._state=g,this.name=e,this.on=Mt(this,"populate","blocked","versionchange","close",{ready:[Un,ue]}),this.on.ready.subscribe=ne(this.on.ready.subscribe,function(y){return function(A,v){de.vip(function(){var w,x=i._state;x.openComplete?(x.dbOpenError||U.resolve().then(A),v&&y(A)):x.onReadyBeingFired?(x.onReadyBeingFired.push(A),v&&y(A)):(y(A),w=i,v||y(function b(){w.on.ready.unsubscribe(A),w.on.ready.unsubscribe(b)}))})}}),this.Collection=(s=this,jt(bo.prototype,function(E,b){this.db=s;var v=Hr,w=null;if(b)try{v=b()}catch(S){w=S}var x=E._ctx,b=x.table,E=b.hook.reading.fire;this._ctx={table:b,index:x.index,isPrimKey:!x.index||b.schema.primKey.keyPath&&x.index===b.schema.primKey.name,range:v,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:x.or,valueMapper:E!==Pt?E:null}})),this.Table=(l=this,jt(Vr.prototype,function(y,A,v){this.db=l,this._tx=v,this.name=y,this.schema=A,this.hook=l._allTables[y]?l._allTables[y].hook:Mt(null,{creating:[co,ue],reading:[so,Pt],updating:[fo,ue],deleting:[lo,ue]})})),this.Transaction=(h=this,jt(xo.prototype,function(y,A,v,w,x){var b=this;this.db=h,this.mode=y,this.storeNames=A,this.schema=v,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=Mt(this,"complete","error","abort"),this.parent=x||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(E,S){b._resolve=E,b._reject=S}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(E){var S=b.active;return b.active=!1,b.on.error.fire(E),b.parent?b.parent._reject(E):S&&b.idbtrans&&b.idbtrans.abort(),fe(E)})})),this.Version=(p=this,jt(Co.prototype,function(y){this.db=p,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(m=this,jt(Zr.prototype,function(y,A,v){if(this.db=m,this._ctx={table:y,index:A===":id"?null:A,or:v},this._cmp=this._ascending=re,this._descending=function(w,x){return re(x,w)},this._max=function(w,x){return 0<re(w,x)?w:x},this._min=function(w,x){return re(w,x)<0?w:x},this._IDBKeyRange=m._deps.IDBKeyRange,!this._IDBKeyRange)throw new z.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Nt(n.IDBKeyRange),this._createTransaction=function(y,A,v,w){return new i.Transaction(y,A,v,i._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(y){i.on("blocked").fire(y),xt.filter(function(A){return A.name===i.name&&A!==i&&!A._state.vcFired}).map(function(A){return A.on("versionchange").fire(y)})},this.use(Do),this.use(jo),this.use(Bo),this.use(Po),this.use(Io);var _=new Proxy(this,{get:function(y,A,v){if(A==="_vip")return!0;if(A==="table")return function(x){return wn(i.table(x),_)};var w=Reflect.get(y,A,v);return w instanceof Vr?wn(w,_):A==="tables"?w.map(function(x){return wn(x,_)}):A==="_createTransaction"?function(){return wn(w.apply(this,arguments),_)}:w}});this.vip=_,u.forEach(function(y){return y(i)})}var _n,Pe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",qo=(br.prototype.subscribe=function(e,n,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:i})},br.prototype[Pe]=function(){return this},br);function br(e){this._subscribe=e}try{_n={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{_n={indexedDB:null,IDBKeyRange:null}}function hi(e){var n,i=!1,u=new qo(function(s){var l=gt(e),h,p=!1,m={},g={},_={get closed(){return p},unsubscribe:function(){p||(p=!0,h&&h.abort(),y&&tt.storagemutated.unsubscribe(v))}};s.start&&s.start(_);var y=!1,A=function(){return Wn(w)},v=function(x){vn(m,x),fr(g,m)&&A()},w=function(){var x,b,E;!p&&_n.indexedDB&&(m={},x={},h&&h.abort(),h=new AbortController,E=function(S){var O=bt();try{l&&_t();var P=Je(e,S);return P=l?P.finally(Ze):P}finally{O&&wt()}}(b={subscr:x,signal:h.signal,requery:A,querier:e,trans:null}),Promise.resolve(E).then(function(S){i=!0,n=S,p||b.signal.aborted||(m={},function(O){for(var P in O)if(F(O,P))return;return 1}(g=x)||y||(tt(Ut,v),y=!0),Wn(function(){return!p&&s.next&&s.next(S)}))},function(S){i=!1,["DatabaseClosedError","AbortError"].includes(S==null?void 0:S.name)||p||Wn(function(){p||s.error&&s.error(S)})}))};return setTimeout(A,0),_});return u.hasValue=function(){return i},u.getValue=function(){return n},u}var dt=Le;function wr(e){var n=nt;try{nt=!0,tt.storagemutated.fire(e),pr(e,!0)}finally{nt=n}}G(dt,a(a({},Xt),{delete:function(e){return new dt(e,{addons:[]}).delete()},exists:function(e){return new dt(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=dt.dependencies,i=n.indexedDB,n=n.IDBKeyRange,(sr(i)?Promise.resolve(i.databases()).then(function(u){return u.map(function(s){return s.name}).filter(function(s){return s!==on})}):ur(i,n).toCollection().primaryKeys()).then(e)}catch{return fe(new z.MissingAPI)}var n,i},defineClass:function(){return function(e){R(this,e)}},ignoreTransaction:function(e){return H.trans?st(H.transless,e):e()},vip:cr,async:function(e){return function(){try{var n=yr(e.apply(this,arguments));return n&&typeof n.then=="function"?n:U.resolve(n)}catch(i){return fe(i)}}},spawn:function(e,n,i){try{var u=yr(e.apply(i,n||[]));return u&&typeof u.then=="function"?u:U.resolve(u)}catch(s){return fe(s)}},currentTransaction:{get:function(){return H.trans||null}},waitFor:function(e,n){return n=U.resolve(typeof e=="function"?dt.ignoreTransaction(e):e).timeout(n||6e4),H.trans?H.trans.waitFor(n):n},Promise:U,debug:{get:function(){return Me},set:function(e){Mr(e)}},derive:X,extend:R,props:G,override:ne,Events:Mt,on:tt,liveQuery:hi,extendObservabilitySet:vn,getByKeyPath:Q,setByKeyPath:V,delByKeyPath:function(e,n){typeof n=="string"?V(e,n,void 0):"length"in n&&[].map.call(n,function(i){V(e,i,void 0)})},shallowClone:ie,deepClone:be,getObjectDiff:mr,cmp:re,asap:he,minKey:-1/0,addons:[],connections:xt,errnames:Kn,dependencies:_n,cache:ft,semVer:"4.0.11",version:"4.0.11".split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,i){return e+n/Math.pow(10,2*i)})})),dt.maxKey=Nt(dt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(tt(Ut,function(e){nt||(e=new CustomEvent(er,{detail:e}),nt=!0,dispatchEvent(e),nt=!1)}),addEventListener(er,function(e){e=e.detail,nt||wr(e)}));var kt,nt=!1,pi=function(){};return typeof BroadcastChannel<"u"&&((pi=function(){(kt=new BroadcastChannel(er)).onmessage=function(e){return e.data&&wr(e.data)}})(),typeof kt.unref=="function"&&kt.unref(),tt(Ut,function(e){nt||kt.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Le.disableBfCache&&e.persisted){Me&&console.debug("Dexie: handling persisted pagehide"),kt!=null&&kt.close();for(var n=0,i=xt;n<i.length;n++)i[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Le.disableBfCache&&e.persisted&&(Me&&console.debug("Dexie: handling persisted pageshow"),pi(),wr({all:new _e(-1/0,[[]])}))})),U.rejectionMapper=function(e,n){return!e||e instanceof Ve||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Tr[e.name]?e:(n=new Tr[e.name](n||e.message,e),"stack"in e&&N(n,"stack",{get:function(){return this.inner.stack}}),n)},Mr(Me),a(Le,Object.freeze({__proto__:null,Dexie:Le,liveQuery:hi,Entity:zr,cmp:re,PropModification:qt,replacePrefix:function(e,n){return new qt({replacePrefix:[e,n]})},add:function(e){return new qt({add:e})},remove:function(e){return new qt({remove:e})},default:Le,RangeSet:_e,mergeRanges:zt,rangesOverlap:ri}),{default:Le}),Le})})(Li);var wa=Li.exports;const Cr=ba(wa),Ai=Symbol.for("Dexie"),Fn=globalThis[Ai]||(globalThis[Ai]=Cr);if(Cr.semVer!==Fn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Cr.semVer} and ${Fn.semVer}`);const{liveQuery:Ku,mergeRanges:Uu,rangesOverlap:Nu,RangeSet:Lu,cmp:Hu,Entity:zu,PropModification:Yu,replacePrefix:Gu,add:Vu,remove:Wu}=Fn;var Ei=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},Ke=[],Ie=[],_a=typeof Uint8Array<"u"?Uint8Array:Array,Ir=!1;function Hi(){Ir=!0;for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=o.length;t<r;++t)Ke[t]=o[t],Ie[o.charCodeAt(t)]=t;Ie[45]=62,Ie[95]=63}function xa(o){Ir||Hi();var t,r,a,c,f,d,k=o.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");f=o[k-2]==="="?2:o[k-1]==="="?1:0,d=new _a(k*3/4-f),a=f>0?k-4:k;var R=0;for(t=0,r=0;t<a;t+=4,r+=3)c=Ie[o.charCodeAt(t)]<<18|Ie[o.charCodeAt(t+1)]<<12|Ie[o.charCodeAt(t+2)]<<6|Ie[o.charCodeAt(t+3)],d[R++]=c>>16&255,d[R++]=c>>8&255,d[R++]=c&255;return f===2?(c=Ie[o.charCodeAt(t)]<<2|Ie[o.charCodeAt(t+1)]>>4,d[R++]=c&255):f===1&&(c=Ie[o.charCodeAt(t)]<<10|Ie[o.charCodeAt(t+1)]<<4|Ie[o.charCodeAt(t+2)]>>2,d[R++]=c>>8&255,d[R++]=c&255),d}function Aa(o){return Ke[o>>18&63]+Ke[o>>12&63]+Ke[o>>6&63]+Ke[o&63]}function Ea(o,t,r){for(var a,c=[],f=t;f<r;f+=3)a=(o[f]<<16)+(o[f+1]<<8)+o[f+2],c.push(Aa(a));return c.join("")}function ki(o){Ir||Hi();for(var t,r=o.length,a=r%3,c="",f=[],d=16383,k=0,R=r-a;k<R;k+=d)f.push(Ea(o,k,k+d>R?R:k+d));return a===1?(t=o[r-1],c+=Ke[t>>2],c+=Ke[t<<4&63],c+="=="):a===2&&(t=(o[r-2]<<8)+o[r-1],c+=Ke[t>>10],c+=Ke[t>>4&63],c+=Ke[t<<2&63],c+="="),f.push(c),f.join("")}function Bn(o,t,r,a,c){var f,d,k=c*8-a-1,R=(1<<k)-1,C=R>>1,M=-7,F=r?c-1:0,G=r?-1:1,W=o[t+F];for(F+=G,f=W&(1<<-M)-1,W>>=-M,M+=k;M>0;f=f*256+o[t+F],F+=G,M-=8);for(d=f&(1<<-M)-1,f>>=-M,M+=a;M>0;d=d*256+o[t+F],F+=G,M-=8);if(f===0)f=1-C;else{if(f===R)return d?NaN:(W?-1:1)*(1/0);d=d+Math.pow(2,a),f=f-C}return(W?-1:1)*d*Math.pow(2,f-a)}function zi(o,t,r,a,c,f){var d,k,R,C=f*8-c-1,M=(1<<C)-1,F=M>>1,G=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=a?0:f-1,N=a?1:-1,X=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(k=isNaN(t)?1:0,d=M):(d=Math.floor(Math.log(t)/Math.LN2),t*(R=Math.pow(2,-d))<1&&(d--,R*=2),d+F>=1?t+=G/R:t+=G*Math.pow(2,1-F),t*R>=2&&(d++,R/=2),d+F>=M?(k=0,d=M):d+F>=1?(k=(t*R-1)*Math.pow(2,c),d=d+F):(k=t*Math.pow(2,F-1)*Math.pow(2,c),d=0));c>=8;o[r+W]=k&255,W+=N,k/=256,c-=8);for(d=d<<c|k,C+=c;C>0;o[r+W]=d&255,W+=N,d/=256,C-=8);o[r+W-N]|=X*128}var ka={}.toString,Yi=Array.isArray||function(o){return ka.call(o)=="[object Array]"},Sa=50;I.TYPED_ARRAY_SUPPORT=Ei.TYPED_ARRAY_SUPPORT!==void 0?Ei.TYPED_ARRAY_SUPPORT:!0;Pn();function Pn(){return I.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ye(o,t){if(Pn()<t)throw new RangeError("Invalid typed array length");return I.TYPED_ARRAY_SUPPORT?(o=new Uint8Array(t),o.__proto__=I.prototype):(o===null&&(o=new I(t)),o.length=t),o}function I(o,t,r){if(!I.TYPED_ARRAY_SUPPORT&&!(this instanceof I))return new I(o,t,r);if(typeof o=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Dr(this,o)}return Gi(this,o,t,r)}I.poolSize=8192;I._augment=function(o){return o.__proto__=I.prototype,o};function Gi(o,t,r,a){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?Ca(o,t,r,a):typeof t=="string"?Ra(o,t,r):Fa(o,t)}I.from=function(o,t,r){return Gi(null,o,t,r)};I.TYPED_ARRAY_SUPPORT&&(I.prototype.__proto__=Uint8Array.prototype,I.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&I[Symbol.species]);function Vi(o){if(typeof o!="number")throw new TypeError('"size" argument must be a number');if(o<0)throw new RangeError('"size" argument must not be negative')}function Oa(o,t,r,a){return Vi(t),t<=0?Ye(o,t):r!==void 0?typeof a=="string"?Ye(o,t).fill(r,a):Ye(o,t).fill(r):Ye(o,t)}I.alloc=function(o,t,r){return Oa(null,o,t,r)};function Dr(o,t){if(Vi(t),o=Ye(o,t<0?0:Br(t)|0),!I.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)o[r]=0;return o}I.allocUnsafe=function(o){return Dr(null,o)};I.allocUnsafeSlow=function(o){return Dr(null,o)};function Ra(o,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!I.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var a=Wi(t,r)|0;o=Ye(o,a);var c=o.write(t,r);return c!==a&&(o=o.slice(0,c)),o}function Fr(o,t){var r=t.length<0?0:Br(t.length)|0;o=Ye(o,r);for(var a=0;a<r;a+=1)o[a]=t[a]&255;return o}function Ca(o,t,r,a){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(a||0))throw new RangeError("'length' is out of bounds");return r===void 0&&a===void 0?t=new Uint8Array(t):a===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,a),I.TYPED_ARRAY_SUPPORT?(o=t,o.__proto__=I.prototype):o=Fr(o,t),o}function Fa(o,t){if(Ue(t)){var r=Br(t.length)|0;return o=Ye(o,r),o.length===0||t.copy(o,0,0,r),o}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Xa(t.length)?Ye(o,0):Fr(o,t);if(t.type==="Buffer"&&Yi(t.data))return Fr(o,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Br(o){if(o>=Pn())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Pn().toString(16)+" bytes");return o|0}I.isBuffer=Ot;function Ue(o){return!!(o!=null&&o._isBuffer)}I.compare=function(t,r){if(!Ue(t)||!Ue(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var a=t.length,c=r.length,f=0,d=Math.min(a,c);f<d;++f)if(t[f]!==r[f]){a=t[f],c=r[f];break}return a<c?-1:c<a?1:0};I.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};I.concat=function(t,r){if(!Yi(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return I.alloc(0);var a;if(r===void 0)for(r=0,a=0;a<t.length;++a)r+=t[a].length;var c=I.allocUnsafe(r),f=0;for(a=0;a<t.length;++a){var d=t[a];if(!Ue(d))throw new TypeError('"list" argument must be an Array of Buffers');d.copy(c,f),f+=d.length}return c};function Wi(o,t){if(Ue(o))return o.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(o)||o instanceof ArrayBuffer))return o.byteLength;typeof o!="string"&&(o=""+o);var r=o.length;if(r===0)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return In(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return to(o).length;default:if(a)return In(o).length;t=(""+t).toLowerCase(),a=!0}}I.byteLength=Wi;function Pa(o,t,r){var a=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(o||(o="utf8");;)switch(o){case"hex":return Na(this,t,r);case"utf8":case"utf-8":return Ji(this,t,r);case"ascii":return Ka(this,t,r);case"latin1":case"binary":return Ua(this,t,r);case"base64":return ja(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return La(this,t,r);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),a=!0}}I.prototype._isBuffer=!0;function vt(o,t,r){var a=o[t];o[t]=o[r],o[r]=a}I.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)vt(this,r,r+1);return this};I.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)vt(this,r,r+3),vt(this,r+1,r+2);return this};I.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)vt(this,r,r+7),vt(this,r+1,r+6),vt(this,r+2,r+5),vt(this,r+3,r+4);return this};I.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?Ji(this,0,t):Pa.apply(this,arguments)};I.prototype.equals=function(t){if(!Ue(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:I.compare(this,t)===0};I.prototype.inspect=function(){var t="",r=Sa;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"};I.prototype.compare=function(t,r,a,c,f){if(!Ue(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),a===void 0&&(a=t?t.length:0),c===void 0&&(c=0),f===void 0&&(f=this.length),r<0||a>t.length||c<0||f>this.length)throw new RangeError("out of range index");if(c>=f&&r>=a)return 0;if(c>=f)return-1;if(r>=a)return 1;if(r>>>=0,a>>>=0,c>>>=0,f>>>=0,this===t)return 0;for(var d=f-c,k=a-r,R=Math.min(d,k),C=this.slice(c,f),M=t.slice(r,a),F=0;F<R;++F)if(C[F]!==M[F]){d=C[F],k=M[F];break}return d<k?-1:k<d?1:0};function Xi(o,t,r,a,c){if(o.length===0)return-1;if(typeof r=="string"?(a=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=c?0:o.length-1),r<0&&(r=o.length+r),r>=o.length){if(c)return-1;r=o.length-1}else if(r<0)if(c)r=0;else return-1;if(typeof t=="string"&&(t=I.from(t,a)),Ue(t))return t.length===0?-1:Si(o,t,r,a,c);if(typeof t=="number")return t=t&255,I.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(o,t,r):Uint8Array.prototype.lastIndexOf.call(o,t,r):Si(o,[t],r,a,c);throw new TypeError("val must be string, number or Buffer")}function Si(o,t,r,a,c){var f=1,d=o.length,k=t.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(o.length<2||t.length<2)return-1;f=2,d/=2,k/=2,r/=2}function R(W,N){return f===1?W[N]:W.readUInt16BE(N*f)}var C;if(c){var M=-1;for(C=r;C<d;C++)if(R(o,C)===R(t,M===-1?0:C-M)){if(M===-1&&(M=C),C-M+1===k)return M*f}else M!==-1&&(C-=C-M),M=-1}else for(r+k>d&&(r=d-k),C=r;C>=0;C--){for(var F=!0,G=0;G<k;G++)if(R(o,C+G)!==R(t,G)){F=!1;break}if(F)return C}return-1}I.prototype.includes=function(t,r,a){return this.indexOf(t,r,a)!==-1};I.prototype.indexOf=function(t,r,a){return Xi(this,t,r,a,!0)};I.prototype.lastIndexOf=function(t,r,a){return Xi(this,t,r,a,!1)};function Ia(o,t,r,a){r=Number(r)||0;var c=o.length-r;a?(a=Number(a),a>c&&(a=c)):a=c;var f=t.length;if(f%2!==0)throw new TypeError("Invalid hex string");a>f/2&&(a=f/2);for(var d=0;d<a;++d){var k=parseInt(t.substr(d*2,2),16);if(isNaN(k))return d;o[r+d]=k}return d}function Da(o,t,r,a){return jn(In(t,o.length-r),o,r,a)}function Qi(o,t,r,a){return jn(Va(t),o,r,a)}function Ba(o,t,r,a){return Qi(o,t,r,a)}function Ta(o,t,r,a){return jn(to(t),o,r,a)}function Ma(o,t,r,a){return jn(Wa(t,o.length-r),o,r,a)}I.prototype.write=function(t,r,a,c){if(r===void 0)c="utf8",a=this.length,r=0;else if(a===void 0&&typeof r=="string")c=r,a=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(a)?(a=a|0,c===void 0&&(c="utf8")):(c=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-r;if((a===void 0||a>f)&&(a=f),t.length>0&&(a<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");for(var d=!1;;)switch(c){case"hex":return Ia(this,t,r,a);case"utf8":case"utf-8":return Da(this,t,r,a);case"ascii":return Qi(this,t,r,a);case"latin1":case"binary":return Ba(this,t,r,a);case"base64":return Ta(this,t,r,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ma(this,t,r,a);default:if(d)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),d=!0}};I.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ja(o,t,r){return t===0&&r===o.length?ki(o):ki(o.slice(t,r))}function Ji(o,t,r){r=Math.min(o.length,r);for(var a=[],c=t;c<r;){var f=o[c],d=null,k=f>239?4:f>223?3:f>191?2:1;if(c+k<=r){var R,C,M,F;switch(k){case 1:f<128&&(d=f);break;case 2:R=o[c+1],(R&192)===128&&(F=(f&31)<<6|R&63,F>127&&(d=F));break;case 3:R=o[c+1],C=o[c+2],(R&192)===128&&(C&192)===128&&(F=(f&15)<<12|(R&63)<<6|C&63,F>2047&&(F<55296||F>57343)&&(d=F));break;case 4:R=o[c+1],C=o[c+2],M=o[c+3],(R&192)===128&&(C&192)===128&&(M&192)===128&&(F=(f&15)<<18|(R&63)<<12|(C&63)<<6|M&63,F>65535&&F<1114112&&(d=F))}}d===null?(d=65533,k=1):d>65535&&(d-=65536,a.push(d>>>10&1023|55296),d=56320|d&1023),a.push(d),c+=k}return qa(a)}var Oi=4096;function qa(o){var t=o.length;if(t<=Oi)return String.fromCharCode.apply(String,o);for(var r="",a=0;a<t;)r+=String.fromCharCode.apply(String,o.slice(a,a+=Oi));return r}function Ka(o,t,r){var a="";r=Math.min(o.length,r);for(var c=t;c<r;++c)a+=String.fromCharCode(o[c]&127);return a}function Ua(o,t,r){var a="";r=Math.min(o.length,r);for(var c=t;c<r;++c)a+=String.fromCharCode(o[c]);return a}function Na(o,t,r){var a=o.length;(!t||t<0)&&(t=0),(!r||r<0||r>a)&&(r=a);for(var c="",f=t;f<r;++f)c+=Ga(o[f]);return c}function La(o,t,r){for(var a=o.slice(t,r),c="",f=0;f<a.length;f+=2)c+=String.fromCharCode(a[f]+a[f+1]*256);return c}I.prototype.slice=function(t,r){var a=this.length;t=~~t,r=r===void 0?a:~~r,t<0?(t+=a,t<0&&(t=0)):t>a&&(t=a),r<0?(r+=a,r<0&&(r=0)):r>a&&(r=a),r<t&&(r=t);var c;if(I.TYPED_ARRAY_SUPPORT)c=this.subarray(t,r),c.__proto__=I.prototype;else{var f=r-t;c=new I(f,void 0);for(var d=0;d<f;++d)c[d]=this[d+t]}return c};function ge(o,t,r){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+t>r)throw new RangeError("Trying to access beyond buffer length")}I.prototype.readUIntLE=function(t,r,a){t=t|0,r=r|0,a||ge(t,r,this.length);for(var c=this[t],f=1,d=0;++d<r&&(f*=256);)c+=this[t+d]*f;return c};I.prototype.readUIntBE=function(t,r,a){t=t|0,r=r|0,a||ge(t,r,this.length);for(var c=this[t+--r],f=1;r>0&&(f*=256);)c+=this[t+--r]*f;return c};I.prototype.readUInt8=function(t,r){return r||ge(t,1,this.length),this[t]};I.prototype.readUInt16LE=function(t,r){return r||ge(t,2,this.length),this[t]|this[t+1]<<8};I.prototype.readUInt16BE=function(t,r){return r||ge(t,2,this.length),this[t]<<8|this[t+1]};I.prototype.readUInt32LE=function(t,r){return r||ge(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};I.prototype.readUInt32BE=function(t,r){return r||ge(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};I.prototype.readIntLE=function(t,r,a){t=t|0,r=r|0,a||ge(t,r,this.length);for(var c=this[t],f=1,d=0;++d<r&&(f*=256);)c+=this[t+d]*f;return f*=128,c>=f&&(c-=Math.pow(2,8*r)),c};I.prototype.readIntBE=function(t,r,a){t=t|0,r=r|0,a||ge(t,r,this.length);for(var c=r,f=1,d=this[t+--c];c>0&&(f*=256);)d+=this[t+--c]*f;return f*=128,d>=f&&(d-=Math.pow(2,8*r)),d};I.prototype.readInt8=function(t,r){return r||ge(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};I.prototype.readInt16LE=function(t,r){r||ge(t,2,this.length);var a=this[t]|this[t+1]<<8;return a&32768?a|4294901760:a};I.prototype.readInt16BE=function(t,r){r||ge(t,2,this.length);var a=this[t+1]|this[t]<<8;return a&32768?a|4294901760:a};I.prototype.readInt32LE=function(t,r){return r||ge(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};I.prototype.readInt32BE=function(t,r){return r||ge(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};I.prototype.readFloatLE=function(t,r){return r||ge(t,4,this.length),Bn(this,t,!0,23,4)};I.prototype.readFloatBE=function(t,r){return r||ge(t,4,this.length),Bn(this,t,!1,23,4)};I.prototype.readDoubleLE=function(t,r){return r||ge(t,8,this.length),Bn(this,t,!0,52,8)};I.prototype.readDoubleBE=function(t,r){return r||ge(t,8,this.length),Bn(this,t,!1,52,8)};function Se(o,t,r,a,c,f){if(!Ue(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>c||t<f)throw new RangeError('"value" argument is out of bounds');if(r+a>o.length)throw new RangeError("Index out of range")}I.prototype.writeUIntLE=function(t,r,a,c){if(t=+t,r=r|0,a=a|0,!c){var f=Math.pow(2,8*a)-1;Se(this,t,r,a,f,0)}var d=1,k=0;for(this[r]=t&255;++k<a&&(d*=256);)this[r+k]=t/d&255;return r+a};I.prototype.writeUIntBE=function(t,r,a,c){if(t=+t,r=r|0,a=a|0,!c){var f=Math.pow(2,8*a)-1;Se(this,t,r,a,f,0)}var d=a-1,k=1;for(this[r+d]=t&255;--d>=0&&(k*=256);)this[r+d]=t/k&255;return r+a};I.prototype.writeUInt8=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,1,255,0),I.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function Tn(o,t,r,a){t<0&&(t=65535+t+1);for(var c=0,f=Math.min(o.length-r,2);c<f;++c)o[r+c]=(t&255<<8*(a?c:1-c))>>>(a?c:1-c)*8}I.prototype.writeUInt16LE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,2,65535,0),I.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Tn(this,t,r,!0),r+2};I.prototype.writeUInt16BE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,2,65535,0),I.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Tn(this,t,r,!1),r+2};function Mn(o,t,r,a){t<0&&(t=4294967295+t+1);for(var c=0,f=Math.min(o.length-r,4);c<f;++c)o[r+c]=t>>>(a?c:3-c)*8&255}I.prototype.writeUInt32LE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,4,4294967295,0),I.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):Mn(this,t,r,!0),r+4};I.prototype.writeUInt32BE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,4,4294967295,0),I.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):Mn(this,t,r,!1),r+4};I.prototype.writeIntLE=function(t,r,a,c){if(t=+t,r=r|0,!c){var f=Math.pow(2,8*a-1);Se(this,t,r,a,f-1,-f)}var d=0,k=1,R=0;for(this[r]=t&255;++d<a&&(k*=256);)t<0&&R===0&&this[r+d-1]!==0&&(R=1),this[r+d]=(t/k>>0)-R&255;return r+a};I.prototype.writeIntBE=function(t,r,a,c){if(t=+t,r=r|0,!c){var f=Math.pow(2,8*a-1);Se(this,t,r,a,f-1,-f)}var d=a-1,k=1,R=0;for(this[r+d]=t&255;--d>=0&&(k*=256);)t<0&&R===0&&this[r+d+1]!==0&&(R=1),this[r+d]=(t/k>>0)-R&255;return r+a};I.prototype.writeInt8=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,1,127,-128),I.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1};I.prototype.writeInt16LE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,2,32767,-32768),I.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):Tn(this,t,r,!0),r+2};I.prototype.writeInt16BE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,2,32767,-32768),I.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):Tn(this,t,r,!1),r+2};I.prototype.writeInt32LE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,4,2147483647,-2147483648),I.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):Mn(this,t,r,!0),r+4};I.prototype.writeInt32BE=function(t,r,a){return t=+t,r=r|0,a||Se(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),I.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):Mn(this,t,r,!1),r+4};function Zi(o,t,r,a,c,f){if(r+a>o.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $i(o,t,r,a,c){return c||Zi(o,t,r,4),zi(o,t,r,a,23,4),r+4}I.prototype.writeFloatLE=function(t,r,a){return $i(this,t,r,!0,a)};I.prototype.writeFloatBE=function(t,r,a){return $i(this,t,r,!1,a)};function eo(o,t,r,a,c){return c||Zi(o,t,r,8),zi(o,t,r,a,52,8),r+8}I.prototype.writeDoubleLE=function(t,r,a){return eo(this,t,r,!0,a)};I.prototype.writeDoubleBE=function(t,r,a){return eo(this,t,r,!1,a)};I.prototype.copy=function(t,r,a,c){if(a||(a=0),!c&&c!==0&&(c=this.length),r>=t.length&&(r=t.length),r||(r=0),c>0&&c<a&&(c=a),c===a||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),t.length-r<c-a&&(c=t.length-r+a);var f=c-a,d;if(this===t&&a<r&&r<c)for(d=f-1;d>=0;--d)t[d+r]=this[d+a];else if(f<1e3||!I.TYPED_ARRAY_SUPPORT)for(d=0;d<f;++d)t[d+r]=this[d+a];else Uint8Array.prototype.set.call(t,this.subarray(a,a+f),r);return f};I.prototype.fill=function(t,r,a,c){if(typeof t=="string"){if(typeof r=="string"?(c=r,r=0,a=this.length):typeof a=="string"&&(c=a,a=this.length),t.length===1){var f=t.charCodeAt(0);f<256&&(t=f)}if(c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!I.isEncoding(c))throw new TypeError("Unknown encoding: "+c)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<a)throw new RangeError("Out of range index");if(a<=r)return this;r=r>>>0,a=a===void 0?this.length:a>>>0,t||(t=0);var d;if(typeof t=="number")for(d=r;d<a;++d)this[d]=t;else{var k=Ue(t)?t:In(new I(t,c).toString()),R=k.length;for(d=0;d<a-r;++d)this[d+r]=k[d%R]}return this};var Ha=/[^+\/0-9A-Za-z-_]/g;function za(o){if(o=Ya(o).replace(Ha,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function Ya(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function Ga(o){return o<16?"0"+o.toString(16):o.toString(16)}function In(o,t){t=t||1/0;for(var r,a=o.length,c=null,f=[],d=0;d<a;++d){if(r=o.charCodeAt(d),r>55295&&r<57344){if(!c){if(r>56319){(t-=3)>-1&&f.push(239,191,189);continue}else if(d+1===a){(t-=3)>-1&&f.push(239,191,189);continue}c=r;continue}if(r<56320){(t-=3)>-1&&f.push(239,191,189),c=r;continue}r=(c-55296<<10|r-56320)+65536}else c&&(t-=3)>-1&&f.push(239,191,189);if(c=null,r<128){if((t-=1)<0)break;f.push(r)}else if(r<2048){if((t-=2)<0)break;f.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;f.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;f.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return f}function Va(o){for(var t=[],r=0;r<o.length;++r)t.push(o.charCodeAt(r)&255);return t}function Wa(o,t){for(var r,a,c,f=[],d=0;d<o.length&&!((t-=2)<0);++d)r=o.charCodeAt(d),a=r>>8,c=r%256,f.push(c),f.push(a);return f}function to(o){return xa(za(o))}function jn(o,t,r,a){for(var c=0;c<a&&!(c+r>=t.length||c>=o.length);++c)t[c+r]=o[c];return c}function Xa(o){return o!==o}function Ot(o){return o!=null&&(!!o._isBuffer||no(o)||Qa(o))}function no(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function Qa(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&no(o.slice(0,0))}const Ja=46,Za=/\\(\\)?/g,$a=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),eu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tu=/^\w*$/,nu=function(o){return Object.prototype.toString.call(o)},ro=function(o){const t=typeof o;return t==="symbol"||t==="object"&&o&&nu(o)==="[object Symbol]"},ru=function(o,t){if(Array.isArray(o))return!1;const r=typeof o;return r==="number"||r==="symbol"||r==="boolean"||!o||ro(o)?!0:tu.test(o)||!eu.test(o)||t!=null&&o in Object(t)},iu=function(o){const t=[];return o.charCodeAt(0)===Ja&&t.push(""),o.replace($a,function(r,a,c,f){let d=r;c?d=f.replace(Za,"$1"):a&&(d=a.trim()),t.push(d)}),t},ou=function(o,t){return Array.isArray(o)?o:ru(o,t)?[o]:iu(o)},au=function(o){if(typeof o=="string"||ro(o))return o;const t=`${o}`;return t=="0"&&1/o==-INFINITY?"-0":t},uu=function(o,t){t=ou(t,o);let r=0;const a=t.length;for(;o!=null&&r<a;)o=o[au(t[r++])];return r&&r===a?o:void 0},su=function(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)},io=function(o){if(o==null)return[void 0,void 0];if(typeof o!="object")return[Error('Invalid option "columns": expect an array or an object')];if(Array.isArray(o)){const t=[];for(const r of o)if(typeof r=="string")t.push({key:r,header:r});else if(typeof r=="object"&&r!==null&&!Array.isArray(r)){if(!r.key)return[Error('Invalid column definition: property "key" is required')];r.header===void 0&&(r.header=r.key),t.push(r)}else return[Error("Invalid column definition: expect a string or an object")];o=t}else{const t=[];for(const r in o)t.push({key:r,header:o[r]});o=t}return[void 0,o]};class Rt extends Error{constructor(t,r,...a){Array.isArray(r)&&(r=r.join(" ")),super(r),Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,Rt),this.code=t;for(const c of a)for(const f in c){const d=c[f];this[f]=Ot(d)?d.toString():d==null?d:JSON.parse(JSON.stringify(d))}}}const cu=function(o){return o.replace(/([A-Z])/g,function(t,r){return"_"+r.toLowerCase()})},oo=function(o){const t={};for(const c in o)t[cu(c)]=o[c];if(t.bom===void 0||t.bom===null||t.bom===!1)t.bom=!1;else if(t.bom!==!0)return[new Rt("CSV_OPTION_BOOLEAN_INVALID_TYPE",["option `bom` is optional and must be a boolean value,",`got ${JSON.stringify(t.bom)}`])];if(t.delimiter===void 0||t.delimiter===null)t.delimiter=",";else if(Ot(t.delimiter))t.delimiter=t.delimiter.toString();else if(typeof t.delimiter!="string")return[new Rt("CSV_OPTION_DELIMITER_INVALID_TYPE",["option `delimiter` must be a buffer or a string,",`got ${JSON.stringify(t.delimiter)}`])];if(t.quote===void 0||t.quote===null)t.quote='"';else if(t.quote===!0)t.quote='"';else if(t.quote===!1)t.quote="";else if(Ot(t.quote))t.quote=t.quote.toString();else if(typeof t.quote!="string")return[new Rt("CSV_OPTION_QUOTE_INVALID_TYPE",["option `quote` must be a boolean, a buffer or a string,",`got ${JSON.stringify(t.quote)}`])];if((t.quoted===void 0||t.quoted===null)&&(t.quoted=!1),t.escape_formulas===void 0||t.escape_formulas===null)t.escape_formulas=!1;else if(typeof t.escape_formulas!="boolean")return[new Rt("CSV_OPTION_ESCAPE_FORMULAS_INVALID_TYPE",["option `escape_formulas` must be a boolean,",`got ${JSON.stringify(t.escape_formulas)}`])];if((t.quoted_empty===void 0||t.quoted_empty===null)&&(t.quoted_empty=void 0),t.quoted_match===void 0||t.quoted_match===null||t.quoted_match===!1?t.quoted_match=null:Array.isArray(t.quoted_match)||(t.quoted_match=[t.quoted_match]),t.quoted_match)for(const c of t.quoted_match){const f=typeof c=="string",d=c instanceof RegExp;if(!f&&!d)return[Error(`Invalid Option: quoted_match must be a string or a regex, got ${JSON.stringify(c)}`)]}if((t.quoted_string===void 0||t.quoted_string===null)&&(t.quoted_string=!1),(t.eof===void 0||t.eof===null)&&(t.eof=!0),t.escape===void 0||t.escape===null)t.escape='"';else if(Ot(t.escape))t.escape=t.escape.toString();else if(typeof t.escape!="string")return[Error(`Invalid Option: escape must be a buffer or a string, got ${JSON.stringify(t.escape)}`)];if(t.escape.length>1)return[Error(`Invalid Option: escape must be one character, got ${t.escape.length} characters`)];(t.header===void 0||t.header===null)&&(t.header=!1);const[r,a]=io(t.columns);if(r!==void 0)return[r];if(t.columns=a,(t.quoted===void 0||t.quoted===null)&&(t.quoted=!1),(t.cast===void 0||t.cast===null)&&(t.cast={}),(t.cast.bigint===void 0||t.cast.bigint===null)&&(t.cast.bigint=c=>""+c),(t.cast.boolean===void 0||t.cast.boolean===null)&&(t.cast.boolean=c=>c?"1":""),(t.cast.date===void 0||t.cast.date===null)&&(t.cast.date=c=>""+c.getTime()),(t.cast.number===void 0||t.cast.number===null)&&(t.cast.number=c=>""+c),(t.cast.object===void 0||t.cast.object===null)&&(t.cast.object=c=>JSON.stringify(c)),(t.cast.string===void 0||t.cast.string===null)&&(t.cast.string=function(c){return c}),t.on_record!==void 0&&typeof t.on_record!="function")return[Error('Invalid Option: "on_record" must be a function.')];if(t.record_delimiter===void 0||t.record_delimiter===null)t.record_delimiter=`
`;else if(Ot(t.record_delimiter))t.record_delimiter=t.record_delimiter.toString();else if(typeof t.record_delimiter!="string")return[Error(`Invalid Option: record_delimiter must be a buffer or a string, got ${JSON.stringify(t.record_delimiter)}`)];switch(t.record_delimiter){case"unix":t.record_delimiter=`
`;break;case"mac":t.record_delimiter="\r";break;case"windows":t.record_delimiter=`\r
`;break;case"ascii":t.record_delimiter="";break;case"unicode":t.record_delimiter="\u2028";break}return[void 0,t]},lu=I.from([239,187,191]),fu=function(o,t,r){return{options:o,state:t,info:r,__transform:function(a,c){if(!Array.isArray(a)&&typeof a!="object")return Error(`Invalid Record: expect an array or an object, got ${JSON.stringify(a)}`);if(this.info.records===0){if(Array.isArray(a)){if(this.options.header===!0&&this.options.columns===void 0)return Error("Undiscoverable Columns: header option requires column option or object records")}else if(this.options.columns===void 0){const[k,R]=io(Object.keys(a));if(k)return;this.options.columns=R}}if(this.info.records===0){this.bom(c);const k=this.headers(c);if(k)return k}try{this.options.on_record&&this.options.on_record(a,this.info.records)}catch(k){return k}let f,d;if(this.options.eof){if([f,d]=this.stringify(a),f)return f;if(d===void 0)return;d=d+this.options.record_delimiter}else{if([f,d]=this.stringify(a),f)return f;if(d===void 0)return;(this.options.header||this.info.records)&&(d=this.options.record_delimiter+d)}this.info.records++,c(d)},stringify:function(a,c=!1){if(typeof a!="object")return[void 0,a];const{columns:f}=this.options,d=[];if(Array.isArray(a)){f&&a.splice(f.length);for(let R=0;R<a.length;R++){const C=a[R],[M,F]=this.__cast(C,{index:R,column:R,records:this.info.records,header:c});if(M)return[M];d[R]=[F,C]}}else for(let R=0;R<f.length;R++){const C=uu(a,f[R].key),[M,F]=this.__cast(C,{index:R,column:f[R].key,records:this.info.records,header:c});if(M)return[M];d[R]=[F,C]}let k="";for(let R=0;R<d.length;R++){let C,M,[F,G]=d[R];if(typeof F=="string")C=this.options;else if(su(F)){if(C=F,F=C.value,delete C.value,typeof F!="string"&&F!==void 0&&F!==null&&M)return[Error(`Invalid Casting Value: returned value must return a string, null or undefined, got ${JSON.stringify(F)}`)];if(C={...this.options,...C},[M,C]=oo(C),M!==void 0)return[M]}else if(F==null)C=this.options;else return[Error(`Invalid Casting Value: returned value must return a string, an object, null or undefined, got ${JSON.stringify(F)}`)];const{delimiter:W,escape:N,quote:X,quoted:oe,quoted_empty:se,quoted_string:Y,quoted_match:ne,record_delimiter:$,escape_formulas:he}=C;if(F===""&&G===""){let Q=ne&&ne.filter(ie=>typeof ie=="string"?F.indexOf(ie)!==-1:ie.test(F));Q=Q&&Q.length>0,(Q||se===!0||Y===!0&&se!==!1)===!0&&(F=X+F+X),k+=F}else if(F){if(typeof F!="string")return[Error(`Formatter must return a string, null or undefined, got ${JSON.stringify(F)}`)];const Q=W.length&&F.indexOf(W)>=0,V=X!==""&&F.indexOf(X)>=0,ie=F.indexOf(N)>=0&&N!==X,pe=F.indexOf($)>=0,Ge=Y&&typeof G=="string";let Be=ne&&ne.filter(be=>typeof be=="string"?F.indexOf(be)!==-1:be.test(F));if(Be=Be&&Be.length>0,he)switch(F[0]){case"=":case"+":case"-":case"@":case"	":case"\r":case"ï¼":case"ï¼":case"ï¼":case"ï¼ ":F=`'${F}`;break}const Te=V===!0||Q||pe||oe||Ge||Be;if(Te===!0&&ie===!0){const be=N==="\\"?new RegExp(N+N,"g"):new RegExp(N,"g");F=F.replace(be,N+N)}if(V===!0){const be=new RegExp(X,"g");F=F.replace(be,N+X)}Te===!0&&(F=X+F+X),k+=F}else(se===!0||G===""&&Y===!0&&se!==!1)&&(k+=X+X);R!==d.length-1&&(k+=W)}return[void 0,k]},bom:function(a){this.options.bom===!0&&a(lu)},headers:function(a){if(this.options.header===!1||this.options.columns===void 0)return;let c,f=this.options.columns.map(d=>d.header);if(this.options.eof?([c,f]=this.stringify(f,!0),f+=this.options.record_delimiter):[c,f]=this.stringify(f),c)return c;a(f)},__cast:function(a,c){const f=typeof a;try{return f==="string"?[void 0,this.options.cast.string(a,c)]:f==="bigint"?[void 0,this.options.cast.bigint(a,c)]:f==="number"?[void 0,this.options.cast.number(a,c)]:f==="boolean"?[void 0,this.options.cast.boolean(a,c)]:a instanceof Date?[void 0,this.options.cast.date(a,c)]:f==="object"&&a!==null?[void 0,this.options.cast.object(a,c)]:[void 0,a,a]}catch(d){return[d]}}}},Xu=function(o,t={}){const r=[],[a,c]=oo(t);if(a!==void 0)throw a;const k=fu(c,{stop:!1},{records:0});for(const R of o){const C=k.__transform(R,function(M){r.push(M)});if(C!==void 0)throw C}if(r.length===0){k.bom(C=>{r.push(C)});const R=k.headers(C=>{r.push(C)});if(R!==void 0)throw R}return r.join("")};function Qu(){const o=Yt("snackbar"),t=Yt("actionButtons"),r=Yt("title");return{actionButtons:t,snackbar:o,title:r}}const du="1yI5jxYxfCLxibPrqLVBAe9kpX4e9nWNGTMGqtU00GUAfqsocqLnH78uL8ouiEhX";async function Ju(o,t=!1){o.startsWith("/")||(o="/"+o);const r=`https://www.thebluealliance.com/api/v3${o}`,a={"X-TBA-Auth-Key":du};if(!t){const k=await Dn.eTagResponses.where("url").equals(o).first();k&&(a["If-None-Match"]=k.etag)}console.debug(`Requesting TBA @ ${r}`);const c=await fetch(r,{headers:a});if(c.status===304)return console.debug("Not Modified; not attempting to read data"),!1;const f=c.headers.get("ETag"),d=c.json();return f&&await Dn.eTagResponses.put({etag:f,url:o}),d}const Zu=$o("navigator"in globalThis&&"onLine"in navigator?navigator.onLine:!1,o=>{"addEventListener"in globalThis?(addEventListener("online",t=>{console.log("Online event",t),o(!0)}),addEventListener("offline",t=>{console.log("Offline event",t),o(!1)})):console.warn("Was unable to add an event listener for deviceOnline. If you see this warning while building/deploying sveltekit or in the nodejs console, everything should be ok, but if you see this in the browser console then the app will not be able to be reactive to the device going online/offline.")});function $u(o){if(!o)return"";switch(o.comp_level){case"qm":return`Qualifying Match ${String(o.match_number).padStart(2,"0")}`;case"qf":return`Quarterfinal ${o.set_number} Match ${o.match_number}`;case"sf":return`Semifinal ${o.set_number} Match ${o.match_number}`;case"f":return`Final ${o.set_number} Match ${o.match_number}`;default:return""}}const Dn=new Fn("AEMDashboard");Dn.version(9).stores({csv2024:"[eventkey+role+matchNum], [eventkey+teamNum]",csv2025:"[eventkey+role+matchNum], [eventkey+teamNum], eventkey",events:"key, year",matches:"key, event_key, [event_key+match_number]",eTagResponses:"&url",current_event:"key",authenticated:"++"});"window"in globalThis&&(window.db=Dn);var Pr=function(o,t){return Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])},Pr(o,t)};function hu(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pr(o,t);function r(){this.constructor=o}o.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Gt=function(){return Gt=Object.assign||function(t){for(var r,a=1,c=arguments.length;a<c;a++){r=arguments[a];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},Gt.apply(this,arguments)};function es(o,t,r,a){function c(f){return f instanceof r?f:new r(function(d){d(f)})}return new(r||(r=Promise))(function(f,d){function k(M){try{C(a.next(M))}catch(F){d(F)}}function R(M){try{C(a.throw(M))}catch(F){d(F)}}function C(M){M.done?f(M.value):c(M.value).then(k,R)}C((a=a.apply(o,t||[])).next())})}function ts(o,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,c,f,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=k(0),d.throw=k(1),d.return=k(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function k(C){return function(M){return R([C,M])}}function R(C){if(a)throw new TypeError("Generator is already executing.");for(;d&&(d=0,C[0]&&(r=0)),r;)try{if(a=1,c&&(f=C[0]&2?c.return:C[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,C[1])).done)return f;switch(c=0,f&&(C=[C[0]&2,f.value]),C[0]){case 0:case 1:f=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,c=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(C[0]===6||C[0]===2)){r=0;continue}if(C[0]===3&&(!f||C[1]>f[0]&&C[1]<f[3])){r.label=C[1];break}if(C[0]===6&&r.label<f[1]){r.label=f[1],f=C;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(C);break}f[2]&&r.ops.pop(),r.trys.pop();continue}C=t.call(o,r)}catch(M){C=[6,M],c=0}finally{a=f=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function An(o){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&o[t],a=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&a>=o.length&&(o=void 0),{value:o&&o[a++],done:!o}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ns(o,t){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var a=r.call(o),c,f=[],d;try{for(;(t===void 0||t-- >0)&&!(c=a.next()).done;)f.push(c.value)}catch(k){d={error:k}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(d)throw d.error}}return f}function rs(o,t,r){if(r||arguments.length===2)for(var a=0,c=t.length,f;a<c;a++)(f||!(a in t))&&(f||(f=Array.prototype.slice.call(t,0,a)),f[a]=t[a]);return o.concat(f||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pu=function(){function o(t){t===void 0&&(t={}),this.adapter=t}return Object.defineProperty(o,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(o,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.destroy=function(){},o}();/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function yu(o,t){if(o.closest)return o.closest(t);for(var r=o;r;){if(ao(r,t))return r;r=r.parentElement}return null}function ao(o,t){var r=o.matches||o.webkitMatchesSelector||o.msMatchesSelector;return r.call(o,t)}function mu(o){var t=o;if(t.offsetParent!==null)return t.scrollWidth;var r=t.cloneNode(!0);r.style.setProperty("position","absolute"),r.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(r);var a=r.scrollWidth;return document.documentElement.removeChild(r),a}const vu=Object.freeze(Object.defineProperty({__proto__:null,closest:yu,estimateScrollWidth:mu,matches:ao},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function gu(o){return o===void 0&&(o=window),bu(o)?{passive:!0}:!1}function bu(o){o===void 0&&(o=window);var t=!1;try{var r={get passive(){return t=!0,!1}},a=function(){};o.document.addEventListener("test",a,r),o.document.removeEventListener("test",a,r)}catch{t=!1}return t}const wu=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:gu},Symbol.toStringTag,{value:"Module"}));function _u(o){return Object.entries(o).filter(([t,r])=>t!==""&&r).map(([t])=>t).join(" ")}function xu(o,t,r,a={bubbles:!0}){if(typeof Event>"u")throw new Error("Event not defined.");if(!o)throw new Error("Tried to dispatch event without element.");const c=new CustomEvent(t,Object.assign(Object.assign({},a),{detail:r}));return o==null||o.dispatchEvent(c),c}function is(o,t){let r=Object.getOwnPropertyNames(o);const a={};for(let c=0;c<r.length;c++){const f=r[c],d=f.indexOf("$");d!==-1&&t.indexOf(f.substring(0,d+1))!==-1||t.indexOf(f)===-1&&(a[f]=o[f])}return a}function os(o,t){let r=Object.getOwnPropertyNames(o);const a={};for(let c=0;c<r.length;c++){const f=r[c];f.substring(0,t.length)===t&&(a[f.substring(t.length)]=o[f])}return a}class Au{constructor(){this.elementMap=new Map}on(t,r,a,c){this.elementMap.has(t)||this.elementMap.set(t,{});const f=this.elementMap.get(t);if(f==null)throw new Error("Event map couldn't be created.");r in f||(f[r]=new Map),f[r].set(a,da(t,r,a,c))}off(t,r,a){const c=this.elementMap.get(t);if(c==null||!(r in c))return;const f=c[r],d=f.get(a);d!=null&&(d(),f.delete(a),f.size===0&&(delete c[r],Object.keys(c).length===0&&this.elementMap.delete(t)))}clear(){this.elementMap.forEach((t,r)=>{for(let[a,c]of Object.entries(t))c.forEach((f,d)=>{f()})}),this.elementMap.clear()}}function He(o,t){let r=[];if(t)for(let a=0;a<t.length;a++){const c=t[a],f=Array.isArray(c)?c[0]:c;Array.isArray(c)&&c.length>1?r.push(f(o,c[1])):r.push(f(o))}return{update(a){if((a&&a.length||0)!=r.length)throw new Error("You must not change the length of an actions array.");if(a)for(let c=0;c<a.length;c++){const f=r[c];if(f&&f.update){const d=a[c];Array.isArray(d)&&d.length>1?f.update(d[1]):f.update()}}},destroy(){for(let a=0;a<r.length;a++){const c=r[a];c&&c.destroy&&c.destroy()}}}}var Eu=ha("<svg><!></svg>");function ku(o,t){Mi(t,!0);let r=ke(t,"use",19,()=>[]),a=ke(t,"tag",3,"div"),c=Ki(t,["$$slots","$$events","$$legacy","use","tag","children"]);const f=yt(()=>["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].indexOf(a())>-1);let d;function k(){return d}var R=St(),C=mt(R);{var M=G=>{var W=Eu();let N;var X=ea(W);Or(X,()=>t.children??Rn),ta(W),On(W,oe=>d=oe,()=>d),Ar(W,(oe,se)=>He==null?void 0:He(oe,se),r),xr(()=>N=Er(W,N,{...c},void 0,!0)),ze(G,W)},F=G=>{var W=St(),N=mt(W);{var X=se=>{var Y=St(),ne=mt(Y);wi(ne,a,!1,($,he)=>{On($,V=>d=V,()=>d),Ar($,(V,ie)=>He==null?void 0:He(V,ie),r);let Q;xr(()=>Q=Er($,Q,{...c},void 0,$.namespaceURI===kr,$.nodeName.includes("-")))}),ze(se,Y)},oe=se=>{var Y=St(),ne=mt(Y);wi(ne,a,!1,($,he)=>{On($,pe=>d=pe,()=>d),Ar($,(pe,Ge)=>He==null?void 0:He(pe,Ge),r);let Q;xr(()=>Q=Er($,Q,{...c},void 0,$.namespaceURI===kr,$.nodeName.includes("-")));var V=St(),ie=mt(V);Or(ie,()=>t.children??Rn),ze(he,V)}),ze(se,Y)};Sr(N,se=>{pt(f)?se(X):se(oe,!1)},!0)}ze(G,W)};Sr(C,G=>{a()==="svg"?G(M):G(F,!1)})}return ze(o,R),ji({getElement:k})}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Su={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Ou={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Ri={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},En;function Ru(o,t){t===void 0&&(t=!1);var r=o.CSS,a=En;if(typeof En=="boolean"&&!t)return En;var c=r&&typeof r.supports=="function";if(!c)return!1;var f=r.supports("--css-vars","yes"),d=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return a=f||d,t||(En=a),a}function Cu(o,t,r){if(!o)return{x:0,y:0};var a=t.x,c=t.y,f=a+r.left,d=c+r.top,k,R;if(o.type==="touchstart"){var C=o;k=C.changedTouches[0].pageX-f,R=C.changedTouches[0].pageY-d}else{var M=o;k=M.pageX-f,R=M.pageY-d}return{x:k,y:R}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ci=["touchstart","pointerdown","mousedown","keydown"],Fi=["touchend","pointerup","mouseup","contextmenu"],kn=[],Fu=function(o){hu(t,o);function t(r){var a=o.call(this,Gt(Gt({},t.defaultAdapter),r))||this;return a.activationAnimationHasEnded=!1,a.activationTimer=0,a.fgDeactivationRemovalTimer=0,a.fgScale="0",a.frame={width:0,height:0},a.initialSize=0,a.layoutFrame=0,a.maxRadius=0,a.unboundedCoords={left:0,top:0},a.activationState=a.defaultActivationState(),a.activationTimerCallback=function(){a.activationAnimationHasEnded=!0,a.runDeactivationUXLogicIfReady()},a.activateHandler=function(c){a.activateImpl(c)},a.deactivateHandler=function(){a.deactivateImpl()},a.focusHandler=function(){a.handleFocus()},a.blurHandler=function(){a.handleBlur()},a.resizeHandler=function(){a.layout()},a}return Object.defineProperty(t,"cssClasses",{get:function(){return Su},enumerable:!1,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Ou},enumerable:!1,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ri},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),t.prototype.init=function(){var r=this,a=this.supportsPressRipple();if(this.registerRootHandlers(a),a){var c=t.cssClasses,f=c.ROOT,d=c.UNBOUNDED;requestAnimationFrame(function(){r.adapter.addClass(f),r.adapter.isUnbounded()&&(r.adapter.addClass(d),r.layoutInternal())})}},t.prototype.destroy=function(){var r=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var a=t.cssClasses,c=a.ROOT,f=a.UNBOUNDED;requestAnimationFrame(function(){r.adapter.removeClass(c),r.adapter.removeClass(f),r.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},t.prototype.activate=function(r){this.activateImpl(r)},t.prototype.deactivate=function(){this.deactivateImpl()},t.prototype.layout=function(){var r=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){r.layoutInternal(),r.layoutFrame=0})},t.prototype.setUnbounded=function(r){var a=t.cssClasses.UNBOUNDED;r?this.adapter.addClass(a):this.adapter.removeClass(a)},t.prototype.handleFocus=function(){var r=this;requestAnimationFrame(function(){return r.adapter.addClass(t.cssClasses.BG_FOCUSED)})},t.prototype.handleBlur=function(){var r=this;requestAnimationFrame(function(){return r.adapter.removeClass(t.cssClasses.BG_FOCUSED)})},t.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers=function(r){var a,c;if(r){try{for(var f=An(Ci),d=f.next();!d.done;d=f.next()){var k=d.value;this.adapter.registerInteractionHandler(k,this.activateHandler)}}catch(R){a={error:R}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},t.prototype.registerDeactivationHandlers=function(r){var a,c;if(r.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var f=An(Fi),d=f.next();!d.done;d=f.next()){var k=d.value;this.adapter.registerDocumentInteractionHandler(k,this.deactivateHandler)}}catch(R){a={error:R}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}},t.prototype.deregisterRootHandlers=function(){var r,a;try{for(var c=An(Ci),f=c.next();!f.done;f=c.next()){var d=f.value;this.adapter.deregisterInteractionHandler(d,this.activateHandler)}}catch(k){r={error:k}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},t.prototype.deregisterDeactivationHandlers=function(){var r,a;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var c=An(Fi),f=c.next();!f.done;f=c.next()){var d=f.value;this.adapter.deregisterDocumentInteractionHandler(d,this.deactivateHandler)}}catch(k){r={error:k}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}},t.prototype.removeCssVars=function(){var r=this,a=t.strings,c=Object.keys(a);c.forEach(function(f){f.indexOf("VAR_")===0&&r.adapter.updateCssVariable(a[f],null)})},t.prototype.activateImpl=function(r){var a=this;if(!this.adapter.isSurfaceDisabled()){var c=this.activationState;if(!c.isActivated){var f=this.previousActivationEvent,d=f&&r!==void 0&&f.type!==r.type;if(!d){c.isActivated=!0,c.isProgrammatic=r===void 0,c.activationEvent=r,c.wasActivatedByPointer=c.isProgrammatic?!1:r!==void 0&&(r.type==="mousedown"||r.type==="touchstart"||r.type==="pointerdown");var k=r!==void 0&&kn.length>0&&kn.some(function(R){return a.adapter.containsEventTarget(R)});if(k){this.resetActivationState();return}r!==void 0&&(kn.push(r.target),this.registerDeactivationHandlers(r)),c.wasElementMadeActive=this.checkElementMadeActive(r),c.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){kn=[],!c.wasElementMadeActive&&r!==void 0&&(r.key===" "||r.keyCode===32)&&(c.wasElementMadeActive=a.checkElementMadeActive(r),c.wasElementMadeActive&&a.animateActivation()),c.wasElementMadeActive||(a.activationState=a.defaultActivationState())})}}}},t.prototype.checkElementMadeActive=function(r){return r!==void 0&&r.type==="keydown"?this.adapter.isSurfaceActive():!0},t.prototype.animateActivation=function(){var r=this,a=t.strings,c=a.VAR_FG_TRANSLATE_START,f=a.VAR_FG_TRANSLATE_END,d=t.cssClasses,k=d.FG_DEACTIVATION,R=d.FG_ACTIVATION,C=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var M="",F="";if(!this.adapter.isUnbounded()){var G=this.getFgTranslationCoordinates(),W=G.startPoint,N=G.endPoint;M=W.x+"px, "+W.y+"px",F=N.x+"px, "+N.y+"px"}this.adapter.updateCssVariable(c,M),this.adapter.updateCssVariable(f,F),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(k),this.adapter.computeBoundingRect(),this.adapter.addClass(R),this.activationTimer=setTimeout(function(){r.activationTimerCallback()},C)},t.prototype.getFgTranslationCoordinates=function(){var r=this.activationState,a=r.activationEvent,c=r.wasActivatedByPointer,f;c?f=Cu(a,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):f={x:this.frame.width/2,y:this.frame.height/2},f={x:f.x-this.initialSize/2,y:f.y-this.initialSize/2};var d={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:f,endPoint:d}},t.prototype.runDeactivationUXLogicIfReady=function(){var r=this,a=t.cssClasses.FG_DEACTIVATION,c=this.activationState,f=c.hasDeactivationUXRun,d=c.isActivated,k=f||!d;k&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(a),this.fgDeactivationRemovalTimer=setTimeout(function(){r.adapter.removeClass(a)},Ri.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses=function(){var r=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(r),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState=function(){var r=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return r.previousActivationEvent=void 0},t.numbers.TAP_DELAY_MS)},t.prototype.deactivateImpl=function(){var r=this,a=this.activationState;if(a.isActivated){var c=Gt({},a);a.isProgrammatic?(requestAnimationFrame(function(){r.animateDeactivation(c)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){r.activationState.hasDeactivationUXRun=!0,r.animateDeactivation(c),r.resetActivationState()}))}},t.prototype.animateDeactivation=function(r){var a=r.wasActivatedByPointer,c=r.wasElementMadeActive;(a||c)&&this.runDeactivationUXLogicIfReady()},t.prototype.layoutInternal=function(){var r=this;this.frame=this.adapter.computeBoundingRect();var a=Math.max(this.frame.height,this.frame.width),c=function(){var d=Math.sqrt(Math.pow(r.frame.width,2)+Math.pow(r.frame.height,2));return d+t.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?a:c();var f=Math.floor(a*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&f%2!==0?this.initialSize=f-1:this.initialSize=f,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},t.prototype.updateLayoutCssVars=function(){var r=t.strings,a=r.VAR_FG_SIZE,c=r.VAR_LEFT,f=r.VAR_TOP,d=r.VAR_FG_SCALE;this.adapter.updateCssVariable(a,this.initialSize+"px"),this.adapter.updateCssVariable(d,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(c,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(f,this.unboundedCoords.top+"px"))},t}(pu);const{applyPassive:Pi}=wu,{matches:Pu}=vu;function Iu(o,{ripple:t=!0,surface:r=!1,unbounded:a=!1,disabled:c=!1,color:f,active:d,rippleElement:k,eventTarget:R,activeTarget:C,addClass:M=N=>o.classList.add(N),removeClass:F=N=>o.classList.remove(N),addStyle:G=(N,X)=>o.style.setProperty(N,X),initPromise:W=Promise.resolve()}={}){let N,X=new Au,oe=Yt("SMUI:addLayoutListener"),se,Y=d,ne=R,$=C;function he(){r?(M("mdc-ripple-surface"),f==="primary"?(M("smui-ripple-surface--primary"),F("smui-ripple-surface--secondary")):f==="secondary"?(F("smui-ripple-surface--primary"),M("smui-ripple-surface--secondary")):(F("smui-ripple-surface--primary"),F("smui-ripple-surface--secondary"))):(F("mdc-ripple-surface"),F("smui-ripple-surface--primary"),F("smui-ripple-surface--secondary")),N&&Y!==d&&(Y=d,d?N.activate():d===!1&&N.deactivate()),t&&!N?(N=new Fu({addClass:M,browserSupportsCssVars:()=>Ru(window),computeBoundingRect:()=>(k||o).getBoundingClientRect(),containsEventTarget:V=>o.contains(V),deregisterDocumentInteractionHandler:(V,ie)=>X.off(document.documentElement,V,ie),deregisterInteractionHandler:(V,ie)=>X.off(R||o,V,ie),deregisterResizeHandler:V=>window.removeEventListener("resize",V),getWindowPageOffset:()=>{var V,ie;return{x:(V=window.pageXOffset)!==null&&V!==void 0?V:window.scrollX,y:(ie=window.pageYOffset)!==null&&ie!==void 0?ie:window.scrollY}},isSurfaceActive:()=>d??Pu(C||o,":active"),isSurfaceDisabled:()=>!!c,isUnbounded:()=>!!a,registerDocumentInteractionHandler:(V,ie)=>{const pe=Pi();X.on(document.documentElement,V,ie,typeof pe=="boolean"?{capture:pe}:pe)},registerInteractionHandler:(V,ie)=>{const pe=Pi();X.on(R||o,V,ie,typeof pe=="boolean"?{capture:pe}:pe)},registerResizeHandler:V=>X.on(window,"resize",V),removeClass:F,updateCssVariable:G}),W.then(()=>{N&&(N.init(),N.setUnbounded(a))})):N&&!t&&W.then(()=>{N&&(N.destroy(),N=void 0,X.clear())}),N&&(ne!==R||$!==C)&&(ne=R,$=C,N.destroy(),requestAnimationFrame(()=>{N&&(N.init(),N.setUnbounded(a))})),!t&&a&&M("mdc-ripple-upgraded--unbounded")}he(),oe&&(se=oe(Q));function Q(){N&&N.layout()}return{update(V){({ripple:t,surface:r,unbounded:a,disabled:c,color:f,active:d,rippleElement:k,eventTarget:R,activeTarget:C,addClass:M,removeClass:F,addStyle:G,initPromise:W}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:ie=>o.classList.add(ie),removeClass:ie=>o.classList.remove(ie),addStyle:(ie,pe)=>o.style.setProperty(ie,pe),initPromise:Promise.resolve()},V)),he()},destroy(){N&&(N.destroy(),N=void 0,X.clear(),F("mdc-ripple-surface"),F("smui-ripple-surface--primary"),F("smui-ripple-surface--secondary")),se&&se()}}}var Du=qi('<div class="mdc-button__touch"></div>'),Bu=qi('<div class="mdc-button__ripple"></div> <!><!>',1);function as(o,t){Mi(t,!0);let r=ke(t,"use",19,()=>[]),a=ke(t,"class",3,""),c=ke(t,"style",3,""),f=ke(t,"ripple",3,!0),d=ke(t,"color",3,"primary"),k=ke(t,"variant",3,"text"),R=ke(t,"touch",3,!1),C=ke(t,"action",3,"close"),M=ke(t,"defaultAction",3,!1),F=ke(t,"secondary",3,!1),G=ke(t,"component",3,ku),W=ke(t,"tag",19,()=>t.href==null?"button":"a"),N=Ki(t,["$$slots","$$events","$$legacy","use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","tag","children"]),X,oe=bi({}),se=bi({}),Y=Yt("SMUI:button:context");const ne=yt(()=>Y==="dialog:action"&&C()!=null?{"data-mdc-dialog-action":C()}:{action:C()}),$=yt(()=>Y==="dialog:action"&&M()?{"data-mdc-dialog-button-default":""}:{}),he=yt(()=>Y==="banner"?{}:{secondary:F()});let Q=t.disabled;na(()=>{if(Q!==t.disabled){if(X){const ye=Be();"blur"in ye&&ye.blur()}Q=N.disabled}}),vi("SMUI:label:context","button"),vi("SMUI:icon:context","button");function V(ye){oe[ye]||(oe[ye]=!0)}function ie(ye){(!(ye in oe)||oe[ye])&&(oe[ye]=!1)}function pe(ye,we){se[ye]!=we&&(we===""||we==null?delete se[ye]:se[ye]=we)}function Ge(){Y==="banner"&&xu(Be(),F()?"SMUIBannerButtonSecondaryActionClick":"SMUIBannerButtonPrimaryActionClick")}function Be(){return X.getElement()}var Te=St(),be=mt(Te);const qn=yt(()=>[[Iu,{ripple:f(),unbounded:!1,color:d(),disabled:!!t.disabled,addClass:V,removeClass:ie,addStyle:pe}],...r()]),Ct=yt(()=>_u({[a()]:!0,"mdc-button":!0,"mdc-button--raised":k()==="raised","mdc-button--unelevated":k()==="unelevated","mdc-button--outlined":k()==="outlined","smui-button--color-secondary":d()==="secondary","mdc-button--touch":R(),"mdc-card__action":Y==="card:action","mdc-card__action--button":Y==="card:action","mdc-dialog__button":Y==="dialog:action","mdc-top-app-bar__navigation-icon":Y==="top-app-bar:navigation","mdc-top-app-bar__action-item":Y==="top-app-bar:action","mdc-snackbar__action":Y==="snackbar:actions","mdc-banner__secondary-action":Y==="banner"&&F(),"mdc-banner__primary-action":Y==="banner"&&!F(),"mdc-tooltip__action":Y==="tooltip:rich-actions",...oe})),Ft=yt(()=>Object.entries(se).map(([ye,we])=>`${ye}: ${we};`).concat([c()]).join(" "));return pa(be,G,(ye,we)=>{On(we(ye,ya({get tag(){return W()},get use(){return pt(qn)},get class(){return pt(Ct)},get style(){return pt(Ft)}},()=>pt(ne),()=>pt($),()=>pt(he),{get href(){return t.href}},()=>N,{onclick:Fe=>{var Oe;Ge(),(Oe=t.onclick)==null||Oe.call(t,Fe)},children:(Fe,Oe)=>{var gt=Bu(),Vt=gi(mt(gt),2);Or(Vt,()=>t.children??Rn);var Ve=gi(Vt);{var Wt=We=>{var Xe=Du();ze(We,Xe)};Sr(Ve,We=>{R()&&We(Wt)})}ze(Fe,gt)},$$slots:{default:!0}})),Fe=>X=Fe,()=>X)}),ze(o,Te),ji({getElement:Be})}export{ts as A,as as B,pu as M,Iu as R,ku as S,hu as _,Gt as a,xu as b,_u as c,Dn as d,Ar as e,Ju as f,Qu as g,is as h,Er as i,An as j,vu as k,Ku as l,ns as m,rs as n,Au as o,os as p,Rr as q,qu as r,Or as s,wu as t,He as u,va as v,$u as w,Zu as x,Xu as y,es as z};
